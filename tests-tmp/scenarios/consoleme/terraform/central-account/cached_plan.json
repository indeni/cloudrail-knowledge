{"format_version":"0.1","terraform_version":"0.12.29","variables":{"allow_internet_access":{"value":true},"allowed_inbound_cidr_blocks":{"value":["0.0.0.0/0"]},"application_admin":{"value":"y@indeni.com"},"attributes":{"value":[]},"bucket_name_prefix":{"value":"your-name-prefix"},"consoleme_instance_profile_name":{"value":"consolemeInstanceProfile"},"convert_case":{"value":"true"},"custom_user_data_script":{"value":""},"default_tags":{"value":{}},"delimiter":{"value":"-"},"ec2_ami_name_filter":{"value":"amzn2-ami-hvm-2.0.2020*-x86_64-ebs"},"ec2_ami_owner_filter":{"value":"amazon"},"email_addresses":{"value":["email_address_here@example.com"]},"instance_type":{"value":"t2.2xlarge"},"key_name":{"value":"kinnaird"},"kms_key_alias":{"value":"alias/consoleme"},"lb-authentication-authorization-endpoint":{"value":"https://accounts.google.com/o/oauth2/auth"},"lb-authentication-client-id":{"value":"150686249207-t0a8tqjeosi8tnb3aku7d8iiidsejpo7.apps.googleusercontent.com"},"lb-authentication-client-secret":{"value":"myAz-7Gusb6D75IAGZiWaT2V"},"lb-authentication-issuer":{"value":"https://accounts.google.com"},"lb-authentication-jwt-email-key":{"value":"email"},"lb-authentication-scope":{"value":"https://www.googleapis.com/auth/admin.directory.group.readonly email openid"},"lb-authentication-token-endpoint":{"value":"https://oauth2.googleapis.com/token"},"lb-authentication-user-info-endpoint":{"value":"https://www.googleapis.com/oauth2/v3/userinfo"},"lb-certificate-arn":{"value":""},"lb-self-signed-cert-cn":{"value":"example.com"},"lb_port":{"value":443},"name":{"value":"consoleme"},"namespace":{"value":"sfdc"},"private_subnet_cidrs":{"value":["10.1.1.0/28"]},"public_subnet_cidrs":{"value":["10.1.1.128/28","10.1.1.144/28"]},"region":{"value":"us-east-1"},"stage":{"value":"somestage"},"subnet_azs":{"value":["us-east-1a","us-east-1b"]},"sync_accounts_from_organizations":{"value":false},"sync_accounts_from_organizations_master_account_id":{"value":null},"sync_accounts_from_organizations_role_to_assume":{"value":"ConsoleMeTarget"},"volume_size":{"value":50},"vpc_cidr":{"value":"10.1.1.0/24"},"your_ses_identity":{"value":"your_identity.example.com"}},"planned_values":{"outputs":{"additional_tag_map":{"sensitive":false,"value":{}},"alias_arn":{"sensitive":false,"value":"module.kms_ebs.aws_kms_alias.default[0].arn"},"alias_name":{"sensitive":false,"value":"alias/consoleme"},"arn":{"sensitive":false,"value":["module.server.aws_instance.this[0].arn"]},"attributes":{"sensitive":false,"value":[]},"availability_zone":{"sensitive":false,"value":["module.server.aws_instance.this[0].availability_zone"]},"azs":{"sensitive":false,"value":["us-east-1a","us-east-1b"]},"context":{"sensitive":false,"value":{"additional_tag_map":{},"attributes":[],"delimiter":null,"enabled":true,"environment":null,"id_length_limit":null,"label_order":[],"name":"consoleme","namespace":"sfdc","regex_replace_chars":null,"stage":"somestage","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}}},"credit_specification":{"sensitive":false,"value":[[{"cpu_credits":"standard"}]]},"database_network_acl_id":{"sensitive":false,"value":""},"database_route_table_ids":{"sensitive":false,"value":["module.network.aws_route_table.private[0].id"]},"database_subnet_arns":{"sensitive":false,"value":[]},"database_subnet_group":{"sensitive":false,"value":""},"database_subnets":{"sensitive":false,"value":[]},"database_subnets_cidr_blocks":{"sensitive":false,"value":[]},"default_network_acl_id":{"sensitive":false,"value":"module.network.aws_vpc.this[0].default_network_acl_id"},"default_route_table_id":{"sensitive":false,"value":"module.network.aws_vpc.this[0].default_route_table_id"},"default_security_group_id":{"sensitive":false,"value":"module.network.aws_vpc.this[0].default_security_group_id"},"default_vpc_cidr_block":{"sensitive":false,"value":""},"default_vpc_default_network_acl_id":{"sensitive":false,"value":""},"default_vpc_default_route_table_id":{"sensitive":false,"value":""},"default_vpc_default_security_group_id":{"sensitive":false,"value":""},"default_vpc_enable_dns_hostnames":{"sensitive":false,"value":""},"default_vpc_enable_dns_support":{"sensitive":false,"value":""},"default_vpc_id":{"sensitive":false,"value":""},"default_vpc_instance_tenancy":{"sensitive":false,"value":""},"default_vpc_main_route_table_id":{"sensitive":false,"value":""},"delimiter":{"sensitive":false,"value":"-"},"ebs_block_device_volume_ids":{"sensitive":false},"elasticache_network_acl_id":{"sensitive":false,"value":""},"elasticache_route_table_ids":{"sensitive":false,"value":["module.network.aws_route_table.private[0].id"]},"elasticache_subnet_arns":{"sensitive":false,"value":[]},"elasticache_subnet_group":{"sensitive":false,"value":""},"elasticache_subnet_group_name":{"sensitive":false,"value":""},"elasticache_subnets":{"sensitive":false,"value":[]},"elasticache_subnets_cidr_blocks":{"sensitive":false,"value":[]},"enabled":{"sensitive":false,"value":true},"environment":{"sensitive":false,"value":""},"id":{"sensitive":false,"value":["module.server.aws_instance.this[0].id"]},"id_full":{"sensitive":false,"value":"sfdc-somestage-consoleme"},"id_length_limit":{"sensitive":false,"value":0},"igw_id":{"sensitive":false,"value":"module.network.aws_internet_gateway.this[0].id"},"instance_count":{"sensitive":false,"value":1},"instance_state":{"sensitive":false,"value":["module.server.aws_instance.this[0].instance_state"]},"intra_network_acl_id":{"sensitive":false,"value":""},"intra_route_table_ids":{"sensitive":false,"value":[]},"intra_subnet_arns":{"sensitive":false,"value":[]},"intra_subnets":{"sensitive":false,"value":[]},"intra_subnets_cidr_blocks":{"sensitive":false,"value":[]},"ipv6_addresses":{"sensitive":false},"key_arn":{"sensitive":false,"value":"module.kms_ebs.aws_kms_key.default[0].arn"},"key_id":{"sensitive":false,"value":"module.kms_ebs.aws_kms_key.default[0].key_id"},"key_name":{"sensitive":false,"value":["kinnaird"]},"label_order":{"sensitive":false,"value":["namespace","environment","stage","name","attributes"]},"metadata_options":{"sensitive":false,"value":[[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"required"}]]},"name":{"sensitive":false,"value":"consoleme"},"namespace":{"sensitive":false,"value":"sfdc"},"nat_ids":{"sensitive":false,"value":["module.network.aws_eip.nat[0].id"]},"nat_public_ips":{"sensitive":false,"value":["module.network.aws_eip.nat[0].public_ip"]},"natgw_ids":{"sensitive":false,"value":["module.network.aws_nat_gateway.this[0].id"]},"normalized_context":{"sensitive":false,"value":{"additional_tag_map":{},"attributes":[],"delimiter":"-","enabled":true,"environment":"","id_length_limit":0,"label_order":["namespace","environment","stage","name","attributes"],"name":"consoleme","namespace":"sfdc","regex_replace_chars":"/[^-a-zA-Z0-9]/","stage":"somestage","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}}},"password_data":{"sensitive":false,"value":["module.server.aws_instance.this[0].password_data"]},"placement_group":{"sensitive":false,"value":["module.server.aws_instance.this[0].placement_group"]},"primary_network_interface_id":{"sensitive":false,"value":["module.server.aws_instance.this[0].primary_network_interface_id"]},"private_dns":{"sensitive":false,"value":["module.server.aws_instance.this[0].private_dns"]},"private_ip":{"sensitive":false,"value":["module.server.aws_instance.this[0].private_ip"]},"private_network_acl_id":{"sensitive":false,"value":""},"private_route_table_ids":{"sensitive":false,"value":["module.network.aws_route_table.private[0].id"]},"private_subnet_arns":{"sensitive":false,"value":["module.network.aws_subnet.private[0].arn"]},"private_subnets":{"sensitive":false,"value":["module.network.aws_subnet.private[0].id"]},"private_subnets_cidr_blocks":{"sensitive":false,"value":["10.1.1.0/28"]},"public_dns":{"sensitive":false,"value":["module.server.aws_instance.this[0].public_dns"]},"public_fqdn":{"sensitive":false,"value":"aws_lb.public-to-private-lb.dns_name"},"public_ip":{"sensitive":false,"value":["module.server.aws_instance.this[0].public_ip"]},"public_network_acl_id":{"sensitive":false,"value":""},"public_route_table_ids":{"sensitive":false,"value":["module.network.aws_route_table.public[0].id"]},"public_subnet_arns":{"sensitive":false,"value":["module.network.aws_subnet.public[0].arn","module.network.aws_subnet.public[1].arn"]},"public_subnets":{"sensitive":false,"value":["module.network.aws_subnet.public[0].id","module.network.aws_subnet.public[1].id"]},"public_subnets_cidr_blocks":{"sensitive":false,"value":["10.1.1.128/28","10.1.1.144/28"]},"redshift_network_acl_id":{"sensitive":false,"value":""},"redshift_route_table_ids":{"sensitive":false,"value":["module.network.aws_route_table.private[0].id"]},"redshift_subnet_arns":{"sensitive":false,"value":[]},"redshift_subnet_group":{"sensitive":false,"value":""},"redshift_subnets":{"sensitive":false,"value":[]},"redshift_subnets_cidr_blocks":{"sensitive":false,"value":[]},"regex_replace_chars":{"sensitive":false,"value":"/[^-a-zA-Z0-9]/"},"root_block_device_volume_ids":{"sensitive":false},"security_groups":{"sensitive":false},"stage":{"sensitive":false,"value":"somestage"},"subnet_id":{"sensitive":false,"value":["module.network.aws_subnet.private[0].id"]},"tags":{"sensitive":false,"value":[{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}]},"tags_as_list_of_maps":{"sensitive":false,"value":[{"key":"Name","value":"sfdc-somestage-consoleme"},{"key":"Namespace","value":"sfdc"},{"key":"Stage","value":"somestage"}]},"vgw_id":{"sensitive":false,"value":"module.network.aws_vpn_gateway.this[0].id"},"volume_tags":{"sensitive":false,"value":[{"Name":"sfdc-somestage-consoleme"}]},"vpc_arn":{"sensitive":false,"value":"module.network.aws_vpc.this[0].arn"},"vpc_cidr_block":{"sensitive":false,"value":"10.1.1.0/24"},"vpc_enable_dns_hostnames":{"sensitive":false,"value":true},"vpc_enable_dns_support":{"sensitive":false,"value":true},"vpc_endpoint_apigw_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_apigw_id":{"sensitive":false,"value":""},"vpc_endpoint_apigw_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_cloudtrail_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_cloudtrail_id":{"sensitive":false,"value":""},"vpc_endpoint_cloudtrail_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_dynamodb_id":{"sensitive":false,"value":"module.network.aws_vpc_endpoint.dynamodb[0].id"},"vpc_endpoint_dynamodb_pl_id":{"sensitive":false,"value":"module.network.aws_vpc_endpoint.dynamodb[0].prefix_list_id"},"vpc_endpoint_ec2_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ec2_id":{"sensitive":false,"value":""},"vpc_endpoint_ec2_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ec2messages_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ec2messages_id":{"sensitive":false,"value":""},"vpc_endpoint_ec2messages_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ecr_api_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ecr_api_id":{"sensitive":false,"value":""},"vpc_endpoint_ecr_api_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ecr_dkr_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ecr_dkr_id":{"sensitive":false,"value":""},"vpc_endpoint_ecr_dkr_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ecs_agent_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ecs_agent_id":{"sensitive":false,"value":""},"vpc_endpoint_ecs_agent_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ecs_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ecs_id":{"sensitive":false,"value":""},"vpc_endpoint_ecs_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ecs_telemetry_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ecs_telemetry_id":{"sensitive":false,"value":""},"vpc_endpoint_ecs_telemetry_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_elasticloadbalancing_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_elasticloadbalancing_id":{"sensitive":false,"value":""},"vpc_endpoint_elasticloadbalancing_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_events_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_events_id":{"sensitive":false,"value":""},"vpc_endpoint_events_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_kms_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_kms_id":{"sensitive":false,"value":""},"vpc_endpoint_kms_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_logs_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_logs_id":{"sensitive":false,"value":""},"vpc_endpoint_logs_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_monitoring_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_monitoring_id":{"sensitive":false,"value":""},"vpc_endpoint_monitoring_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_s3_id":{"sensitive":false,"value":"module.network.aws_vpc_endpoint.s3[0].id"},"vpc_endpoint_s3_pl_id":{"sensitive":false,"value":"module.network.aws_vpc_endpoint.s3[0].prefix_list_id"},"vpc_endpoint_sns_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_sns_id":{"sensitive":false,"value":""},"vpc_endpoint_sns_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_sqs_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_sqs_id":{"sensitive":false,"value":""},"vpc_endpoint_sqs_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ssm_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ssm_id":{"sensitive":false,"value":""},"vpc_endpoint_ssm_network_interface_ids":{"sensitive":false,"value":[]},"vpc_endpoint_ssmmessages_dns_entry":{"sensitive":false,"value":[]},"vpc_endpoint_ssmmessages_id":{"sensitive":false,"value":""},"vpc_endpoint_ssmmessages_network_interface_ids":{"sensitive":false,"value":[]},"vpc_id":{"sensitive":false,"value":"module.network.aws_vpc.this[0].id"},"vpc_instance_tenancy":{"sensitive":false,"value":"default"},"vpc_main_route_table_id":{"sensitive":false,"value":"module.network.aws_vpc.this[0].main_route_table_id"},"vpc_secondary_cidr_blocks":{"sensitive":false,"value":[]},"vpc_security_group_ids":{"sensitive":false,"value":[["aws_security_group.server.id"]]},"zREADME":{"sensitive":false,"value":"# ------------------------------------------------------------------------------\n# ConsoleMe Demo Guide\n# ------------------------------------------------------------------------------\n\nIf you're following the Terraform demo environment and your Terraform apply was\nsuccessful, you can wait for a few minutes and then visit the ConsoleMe dashboard\nat the following URL:\n\n$ https://aws_lb.public-to-private-lb.dns_name:443\n\nIf you want to access the server over SSH, consider using Systems Manager or a VPN in.\n\n"}},"root_module":{"resources":[{"address":"aws_acm_certificate.lb-self-signed[0]","mode":"managed","type":"aws_acm_certificate","name":"lb-self-signed","index":0,"provider_name":"aws","schema_version":0,"values":{"certificate_authority_arn":null,"certificate_body":"tls_self_signed_cert.lb-self-signed.cert_pem","certificate_chain":null,"options":[],"private_key":"tls_private_key.lb-self-signed.private_key_pem","tags":null}},{"address":"aws_dynamodb_table.consoleme_audit_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_audit_global","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"group","type":"S"},{"name":"uuid","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"uuid","local_secondary_index":[],"name":"consoleme_audit_global","point_in_time_recovery":[{"enabled":true}],"range_key":"group","read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5}},{"address":"aws_dynamodb_table.consoleme_config_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_config_global","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"id","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"id","local_secondary_index":[],"name":"consoleme_config_global","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5}},{"address":"aws_dynamodb_table.consoleme_iamroles_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_iamroles_global","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"accountId","type":"S"},{"name":"arn","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"arn","local_secondary_index":[],"name":"consoleme_iamroles_global","point_in_time_recovery":[{"enabled":true}],"range_key":"accountId","read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"ttl","enabled":true}],"write_capacity":5}},{"address":"aws_dynamodb_table.consoleme_policy_requests","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_policy_requests","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"request_id","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"request_id","local_secondary_index":[],"name":"consoleme_policy_requests","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5}},{"address":"aws_dynamodb_table.consoleme_requests_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_requests_global","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"request_id","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"request_id","local_secondary_index":[],"name":"consoleme_requests_global","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5}},{"address":"aws_dynamodb_table.consoleme_resource_cache","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_resource_cache","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"resourceId","type":"S"},{"name":"resourceType","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"resourceId","local_secondary_index":[],"name":"consoleme_resource_cache","point_in_time_recovery":[{"enabled":true}],"range_key":"resourceType","read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"ttl","enabled":true}],"write_capacity":5}},{"address":"aws_dynamodb_table.consoleme_users_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_users_global","provider_name":"aws","schema_version":1,"values":{"attribute":[{"name":"username","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"username","local_secondary_index":[],"name":"consoleme_users_global","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5}},{"address":"aws_iam_instance_profile.ConsoleMeInstanceProfile","mode":"managed","type":"aws_iam_instance_profile","name":"ConsoleMeInstanceProfile","provider_name":"aws","schema_version":0,"values":{"name":"consolemeInstanceProfile","name_prefix":null,"path":"/","role":"consolemeInstanceProfile"}},{"address":"aws_iam_role.ConsoleMeInstanceProfile","mode":"managed","type":"aws_iam_role","name":"ConsoleMeInstanceProfile","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AssumeRoleEC2\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"consolemeInstanceProfile","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role.consoleme_example_app_role_1","mode":"managed","type":"aws_iam_role","name":"consoleme_example_app_role_1","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeAppA","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized-cli-only":"groupa@example.com"}}},{"address":"aws_iam_role.consoleme_example_app_role_2","mode":"managed","type":"aws_iam_role","name":"consoleme_example_app_role_2","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeAppB","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized-cli-only":"groupa@example.com:groupb@example.com"}}},{"address":"aws_iam_role.consoleme_example_user_role_1","mode":"managed","type":"aws_iam_role","name":"consoleme_example_user_role_1","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeUserA","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized":"consoleme_admins@example.com"}}},{"address":"aws_iam_role.consoleme_example_user_role_2","mode":"managed","type":"aws_iam_role","name":"consoleme_example_user_role_2","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeUserB","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized":"configeditors@example.com:consoleme_admins@example.com"}}},{"address":"aws_iam_role.consoleme_target","mode":"managed","type":"aws_iam_role","name":"consoleme_target","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeTarget","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role_policy.consoleme_app_role_policy1","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_app_role_policy1","provider_name":"aws","schema_version":0,"values":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_app_role_1.id"}},{"address":"aws_iam_role_policy.consoleme_app_role_policy2","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_app_role_policy2","provider_name":"aws","schema_version":0,"values":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_app_role_2.id"}},{"address":"aws_iam_role_policy.consoleme_target","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_target","provider_name":"aws","schema_version":0,"values":{"name":"ConsoleMeInstanceProfilePolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CentralAccountPermissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sts:assumerole\",\n        \"sqs:*\",\n        \"sns:*\",\n        \"s3:GetObject\",\n        \"iam:list*\",\n        \"dynamodb:*\",\n        \"config:*\",\n        \"cloudwatch:*\",\n        \"cloudtrail:*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"SendEmail\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ses:sendrawemail\",\n        \"ses:sendemail\"\n      ],\n      \"Resource\": \"arn:aws:ses:*:409917749248:identity/your_identity.example.com\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ses:FromAddress\": \"email_address_here@example.com\"\n        }\n      }\n    }\n  ]\n}","role":"aws_iam_role.ConsoleMeInstanceProfile.id"}},{"address":"aws_iam_role_policy.consoleme_target_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_target_role_policy","provider_name":"aws","schema_version":0,"values":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAccessThis\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sqs:UntagQueue\",\n        \"sqs:TagQueue\",\n        \"sqs:SetQueueAttributes\",\n        \"sqs:ListQueues\",\n        \"sqs:ListQueueTags\",\n        \"sqs:GetQueueUrl\",\n        \"sqs:GetQueueAttributes\",\n        \"sns:UnTagResource\",\n        \"sns:TagResource\",\n        \"sns:SetTopicAttributes\",\n        \"sns:ListTopics\",\n        \"sns:ListTagsForResource\",\n        \"sns:GetTopicAttributes\",\n        \"servicequotas:*\",\n        \"s3:PutBucketTagging\",\n        \"s3:PutBucketPolicy\",\n        \"s3:ListBucket\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:GetObject\",\n        \"s3:GetBucketTagging\",\n        \"s3:GetBucketPolicy\",\n        \"iam:*\",\n        \"ec2:describevpcendpoints\",\n        \"ec2:DescribeVpcs\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeInstances\",\n        \"config:Select*\",\n        \"config:List*\",\n        \"config:BatchGet*\",\n        \"cloudwatch:List*\",\n        \"cloudwatch:Get*\",\n        \"autoscaling:Describe*\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_target.id"}},{"address":"aws_iam_role_policy.consoleme_user_role_policy1","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_user_role_policy1","provider_name":"aws","schema_version":0,"values":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_user_role_1.id"}},{"address":"aws_iam_role_policy.consoleme_user_role_policy2","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_user_role_policy2","provider_name":"aws","schema_version":0,"values":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_user_role_2.id"}},{"address":"aws_iam_role_policy_attachment.ssm","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm","provider_name":"aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"aws_iam_role.ConsoleMeInstanceProfile.id"}},{"address":"aws_lb.public-to-private-lb","mode":"managed","type":"aws_lb","name":"public-to-private-lb","provider_name":"aws","schema_version":0,"values":{"access_logs":[],"customer_owned_ipv4_pool":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"idle_timeout":60,"internal":false,"load_balancer_type":"application","name":"consoleme-lb","name_prefix":null,"security_groups":["aws_security_group.lb-sg.id"],"subnets":["module.network.aws_subnet.public[0].id","module.network.aws_subnet.public[1].id"],"tags":null,"timeouts":null}},{"address":"aws_lb_listener.public-8081","mode":"managed","type":"aws_lb_listener","name":"public-8081","provider_name":"aws","schema_version":0,"values":{"certificate_arn":"aws_acm_certificate.lb-self-signed[0].arn","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[{"authentication_request_extra_params":null,"authorization_endpoint":"https://accounts.google.com/o/oauth2/auth","client_id":"150686249207-t0a8tqjeosi8tnb3aku7d8iiidsejpo7.apps.googleusercontent.com","client_secret":"myAz-7Gusb6D75IAGZiWaT2V","issuer":"https://accounts.google.com","scope":"https://www.googleapis.com/auth/admin.directory.group.readonly email openid","token_endpoint":"https://oauth2.googleapis.com/token","user_info_endpoint":"https://www.googleapis.com/oauth2/v3/userinfo"}],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":null,"type":"authenticate-oidc"},{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","type":"forward"}],"load_balancer_arn":"aws_lb.public-to-private-lb.arn","port":443,"protocol":"HTTPS","timeouts":null}},{"address":"aws_lb_listener_rule.unauthenticated-routes-1","mode":"managed","type":"aws_lb_listener_rule","name":"unauthenticated-routes-1","provider_name":"aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/api/v1/get_credentials?","/api/v1/get_roles?","/api/v2/mtls/roles/*","/noauth/v1/challenge_generator/*","/noauth/v1/challenge_poller/*"]}],"query_string":[],"source_ip":[]}],"listener_arn":"aws_lb_listener.public-8081.arn","priority":1}},{"address":"aws_lb_listener_rule.unauthenticated-routes-2","mode":"managed","type":"aws_lb_listener_rule","name":"unauthenticated-routes-2","provider_name":"aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/api/v1/myheaders/?"]}],"query_string":[],"source_ip":[]}],"listener_arn":"aws_lb_listener.public-8081.arn","priority":2}},{"address":"aws_lb_target_group.consoleme-servers","mode":"managed","type":"aws_lb_target_group","name":"consoleme-servers","provider_name":"aws","schema_version":0,"values":{"deregistration_delay":300,"lambda_multi_value_headers_enabled":false,"name":"consoleme-servers","name_prefix":null,"port":8081,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance","vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"aws_lb_target_group_attachment.test","mode":"managed","type":"aws_lb_target_group_attachment","name":"test","provider_name":"aws","schema_version":0,"values":{"availability_zone":null,"port":8081,"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","target_id":"module.server.aws_instance.this[0].id"}},{"address":"aws_s3_bucket.consoleme_files_bucket","mode":"managed","type":"aws_s3_bucket","name":"consoleme_files_bucket","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"your-name-prefix-random_string.omnipotence.result","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"AES256"}]}]}],"tags":{"Name":"your-name-prefix"},"website":[]}},{"address":"aws_s3_bucket_object.consoleme_config","mode":"managed","type":"aws_s3_bucket_object","name":"consoleme_config","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"your-name-prefix-random_string.omnipotence.result","cache_control":null,"content":"data.template_file.consoleme_config.rendered","content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"etag":"205722741510716813f0ffc319b1ab74","force_destroy":false,"key":"config.yaml","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":null,"tags":null,"website_redirect":null}},{"address":"aws_s3_bucket_object.consoleme_zip","mode":"managed","type":"aws_s3_bucket_object","name":"consoleme_zip","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"your-name-prefix-random_string.omnipotence.result","cache_control":null,"content":null,"content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"etag":"fa56372cc7f13165959d5491cad228ca","force_destroy":false,"key":"consoleme.tar.gz","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":"./consoleme.tar.gz","tags":null,"website_redirect":null}},{"address":"aws_security_group.lb-sg","mode":"managed","type":"aws_security_group","name":"lb-sg","provider_name":"aws","schema_version":1,"values":{"description":"Allows access to the load balancer, which forwards to the ConsoleMe server.","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS for accessing ConsoleMe","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"allow_access_to_consoleme","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"allow_access_to_consoleme"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"aws_security_group.server","mode":"managed","type":"aws_security_group","name":"server","provider_name":"aws","schema_version":1,"values":{"description":"Allow ingress from authorized IPs to self, and egress to everywhere.","name":"sfdc-somestage-consoleme-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"sfdc-somestage-consoleme-sg","Namespace":"sfdc","Stage":"somestage"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"aws_security_group_rule.external_egress_allow_all","mode":"managed","type":"aws_security_group_rule","name":"external_egress_allow_all","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"aws_security_group.server.id","self":false,"to_port":65535,"type":"egress"}},{"address":"aws_security_group_rule.external_ingress_8081","mode":"managed","type":"aws_security_group_rule","name":"external_ingress_8081","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":8081,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"aws_security_group.server.id","self":false,"to_port":8081,"type":"ingress"}},{"address":"aws_security_group_rule.internal_ingress_all_self","mode":"managed","type":"aws_security_group_rule","name":"internal_ingress_all_self","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["10.1.1.0/24"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"aws_security_group.server.id","self":false,"to_port":0,"type":"ingress"}},{"address":"data.aws_iam_policy_document.consoleme_target_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"consoleme_target_trust_policy","provider_name":"aws","schema_version":0,"values":{"override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["aws_iam_role.ConsoleMeInstanceProfile.arn"],"type":"AWS"}],"resources":null,"sid":"ConsoleMeAssumesTarget"}],"version":null}},{"address":"data.aws_iam_policy_document.consoleme_user_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"consoleme_user_trust_policy","provider_name":"aws","schema_version":0,"values":{"override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["aws_iam_role.ConsoleMeInstanceProfile.arn"],"type":"AWS"}],"resources":null,"sid":"ConsoleMeCanAssumeAllRoles"}],"version":null}},{"address":"data.template_file.consoleme_config","mode":"data","type":"template_file","name":"consoleme_config","provider_name":"template","schema_version":0,"values":{"filename":null,"template":"extends:\n  - example_config_base.yaml\n\ntornado:\n  debug: true\n  port: 8081\n  xsrf: true\n  uvloop: false\n\nchallenge_url:\n  enabled: true\n\n# Enter your team's e-mail address here. This e-mail will be used as the default approvers of IAM policy requests\napplication_admin: ${application_admin}\ndevelopment: false\nenvironment: prod\n\nlogging:\n  stdout_enabled: true\n  format: \"%(asctime)s - %(levelname)s - %(name)s - [%(filename)s:%(lineno)s - %(funcName)s() ] - %(message)s\"\n  level: debug\n  file: /logs/consoleme/consoleme_tornado.log\n\naccount_ids_to_name:\n  \"${current_account_id}\": default_account\n\ncache_cloud_accounts:\n  from_aws_organizations: ${sync_accounts_from_organizations}\n\ncache_accounts_from_aws_organizations:\n  organizations_master_account_id: \"${sync_accounts_from_organizations_master_account_id}\"\n  organizations_master_role_to_assume: \"${sync_accounts_from_organizations_role_to_assume}\"\n\ncloud_credential_authorization_mapping:\n  role_tags:\n    enabled: true\n    required_trust_policy_entity: arn:aws:iam::${current_account_id}:role/consolemeInstanceProfile\n    authorized_groups_tags:\n      - consoleme-authorized\n    authorized_groups_cli_only_tags:\n      - consoleme-authorized-cli-only\n  dynamic_config:\n    enabled: true\n  internal_plugin:\n    enabled: false\n\n# You'll probably want to override default_plugins logic to generate this data with your own business logic.\napplication_settings:\n  application_1:\n    owner: ${application_admin}\n    owner_url: https://www.example.com/groupa@example.com\n    app_url: https://www.example.com/ci_cd_pipeline/application_1\n    roles:\n      - ${demo_app_role_arn_1}\n  application_2:\n    owner: ${application_admin}\n    owner_url: https://www.example.com/groupb@example.com\n    app_url: https://www.example.com/ci_cd_pipeline/application_2\n    roles:\n      - ${demo_app_role_arn_2}\n\ndynamic_config:\n  # You can set this key in http://YOUR_CONSOLEME_DOMAIN/config as a rudimentary way to allow groups to access\n  # roles before you override get_eligible_roles with your own custom logic\n  group_mapping:\n    ${application_admin}:\n      roles:\n        - ${demo_user_role_arn_1}\n        - ${demo_user_role_arn_2}\n\npolicies:\n  role_name: ConsoleMeTarget\n\ncelery:\n  active_region: ${region}\n\nauth:\n  get_user_by_aws_alb_auth: true\n  set_auth_cookie: true\n\nget_user_by_aws_alb_auth_settings:\n  jwt_email_key: ${jwt_email_key}\n  jwt_groups_key: groups\n\njwt_secret: secret\nurl: ${user_facing_url}\n","vars":{"application_admin":"y@indeni.com","current_account_id":"409917749248","demo_app_role_arn_1":"aws_iam_role.consoleme_example_app_role_1.arn","demo_app_role_arn_2":"aws_iam_role.consoleme_example_app_role_2.arn","demo_target_role_arn":"aws_iam_role.consoleme_target.arn","demo_user_role_arn_1":"aws_iam_role.consoleme_example_user_role_1.arn","demo_user_role_arn_2":"aws_iam_role.consoleme_example_user_role_2.arn","jwt_email_key":"email","region":"us-east-1","sync_accounts_from_organizations":"false","sync_accounts_from_organizations_master_account_id":"409917749248","sync_accounts_from_organizations_role_to_assume":"ConsoleMeTarget","user_facing_url":"https://aws_lb.public-to-private-lb.dns_name:443"}}},{"address":"data.template_file.consoleme_userdata","mode":"data","type":"template_file","name":"consoleme_userdata","provider_name":"template","schema_version":0,"values":{"filename":null,"template":"#!/usr/bin/env bash\nset -x\n\nexport HOME=/root\nexport EC2_REGION=${region}\nexport CONSOLEME_CONFIG_S3=${CONSOLEME_CONFIG_S3}\n\n# ---------------------------------------------------------------------------------------------------------------------\n# Filter out useless messages from logs\n# ---------------------------------------------------------------------------------------------------------------------\ncat \u003c\u003cEOF \u003e /etc/rsyslog.d/01_filters.conf\n\nif \\$programname == 'systemd' and \\$msg contains \"Started Session\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Starting Session\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Created slice\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Starting user-\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Stopping user-\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Removed slice\" then stop\nEOF\nsystemctl restart rsyslog\n\n# ---------------------------------------------------------------------------------------------------------------------\n# Prereqs\n# ---------------------------------------------------------------------------------------------------------------------\n\n# Install Docker\nsudo yum update -y\nyum -y erase python3\nsudo amazon-linux-extras enable python3.8 # consoleme requires 3.8\nyum -y install git python3.8 python38-pip python38-devel\nyum -y install libcurl-devel\nyum -y install libxml2-devel xmlsec1-devel xmlsec1-openssl-devel libtool-ltdl-devel\nsudo yum install -y gcc-c++\n\nyum -y install gcc\nsudo amazon-linux-extras install -y docker\nsudo service docker start\nsudo usermod -a -G docker ec2-user\n\nmkdir -p /apps/consoleme\nmkdir /logs\ncd /apps/\nyum -y install unzip\naws s3 cp s3://${bucket}/consoleme.tar.gz /apps/\ntar -xzvf consoleme.tar.gz -C consoleme/\nrm consoleme.tar.gz\n\n#### User specific installation\n# Create a dedicated service user\nuseradd -r -s /bin/false consoleme\nusermod -aG consoleme consoleme\nusermod -aG docker consoleme\n\n# Flower\nuseradd -r -s /bin/false flower\nusermod -aG flower flower\nmkdir -p /apps/flower\nchown -R flower:flower /apps/flower\npython3.8 -m venv /apps/flower/env --copies\nsource /apps/flower/env/bin/activate\npip3.8 install flower redis\n\n# Set up a new Virtualenv in the Consoleme directory\npython3.8 -m venv /apps/consoleme/env\nsource /apps/consoleme/env/bin/activate\nchown -R consoleme:consoleme /apps/consoleme\nchown -R consoleme:consoleme /logs\n# Install it\ncd /apps/consoleme\npip3.8 install xmlsec\n\n# Make uses \"pip\" and \"python\", assuming they are 3.8, but they actually point to python2 (because yum uses it)\nalias python=python3.8\nalias pip=pip3.8\nmake env_install\n\nmake dynamo\nunalias python\nunalias pip\n\nsudo yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nsudo yum-config-manager --enable epel\nyum -y install redis\nsystemctl status redis\nsystemctl start redis\n\n# Update the UI\ncd /apps/consoleme\n\n# Install nvm\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh \u003e /tmp/nvm-install.sh\nchmod +x /tmp/nvm-install.sh\nbash /tmp/nvm-install.sh\necho 'export NVM_DIR=\"/root/.nvm\"' \u003e\u003e /root/.bashrc\necho '[ -s \"\\$NVM_DIR/nvm.sh\" ] \u0026\u0026 . \"\\$NVM_DIR/nvm.sh\"  # This loads nvm' \u003e\u003e /root/.bashrc\n. ~/.nvm/nvm.sh\n. ~/.bashrc\ncd /apps/consoleme\nnvm install 12.18.2\nnvm use 12.18.2\nnode -e \"console.log('Running Node.js ' + process.version)\"\nnpm install yarn -g\nyarn --cwd ui\nyarn --cwd ui build:prod\n\n# Since the setup ran as root, just chown it again so the consoleme user owns it\nchown -R consoleme:consoleme /apps/consoleme\nchown -R consoleme:consoleme /logs/consoleme\n\ncat \u003c\u003c EOF \u003e /etc/environment\nEC2_REGION=${region}\nCONSOLEME_CONFIG_S3=${CONSOLEME_CONFIG_S3}\nEOF\n\ncat \u003c\u003c EOF \u003e /etc/systemd/system/consoleme.service\n[Unit]\nDescription=ConsoleMe Service\nAfter=network.target\nStartLimitIntervalSec=0\nStartLimitBurst=5\nStartLimitIntervalSec=0\n\n[Service]\nEnvironment=EC2_REGION=${region}\nWorkingDirectory=/apps/consoleme\nType=simple\nRestart=always\nRestartSec=1\nUser=consoleme\nGroup=consoleme\nExecStart=/usr/bin/env /apps/consoleme/env/bin/python3.8 /apps/consoleme/consoleme/__main__.py\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\ncat \u003c\u003c EOF \u003e /etc/systemd/system/celery.service\n[Unit]\nDescription=Celery Service\nAfter=network.target\n\n[Service]\nType=forking\nUser=consoleme\nGroup=consoleme\nType=simple\nRestart=always\nRestartSec=1\nWorkingDirectory=/apps/consoleme\nEnvironment=EC2_REGION=${region}\nExecStart=/usr/bin/env /apps/consoleme/env/bin/python3.8 /apps/consoleme/env/bin/celery -A consoleme.celery.celery_tasks worker -l DEBUG -B -E --concurrency=15\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\ncat \u003c\u003c EOF \u003e\u003e /root/.bashrc\nexport CONSOLEME_CONFIG_S3=${CONSOLEME_CONFIG_S3}\nexport EC2_REGION=${region}\nEOF\n\n# Change permissions on service file\nchown root:root /etc/systemd/system/celery.service\nchmod 644 /etc/systemd/system/celery.service\nchown root:root /etc/systemd/system/consoleme.service\nchmod 644 /etc/systemd/system/consoleme.service\n\nsystemctl daemon-reload\n\nmkdir -p /home/consoleme\nchown consoleme:consoleme /home/consoleme/\n\ncat \u003c\u003c EOF \u003e\u003e /home/consoleme/.bashrc\nexport EC2_REGION=${region}\nEOF\n\n# Run script to decode and write a custom ConsoleMe configuration. This won't do anything unless CONSOLEME_CONFIG_S3 is defined.\nsudo -u consoleme bash -c '. /home/consoleme/.bashrc ; /apps/consoleme/env/bin/python3.8 /apps/consoleme/scripts/retrieve_or_decode_configuration.py'\n# Make sure it is listed\nsystemctl list-unit-files | grep celery.service\nsystemctl list-unit-files | grep consoleme.service\n# Enable the service and create the symlink in /usr/lib\nsystemctl start celery\nsystemctl enable celery\nsystemctl enable consoleme\nsystemctl start consoleme\n\nsudo -u consoleme bash -c '. /home/consoleme/.bashrc ; /apps/consoleme/env/bin/python3.8 /apps/consoleme/scripts/initialize_redis_oss.py'\n\necho \"Running custom userdata script\"\n${custom_user_data_script}","vars":{"CONSOLEME_CONFIG_S3":"s3://aws_s3_bucket.consoleme_files_bucket.id/aws_s3_bucket_object.consoleme_config.id","bucket":"your-name-prefix-random_string.omnipotence.result","current_account_id":"409917749248","custom_user_data_script":"","region":"us-east-1"}}},{"address":"random_string.omnipotence","mode":"managed","type":"random_string","name":"omnipotence","provider_name":"random","schema_version":1,"values":{"keepers":null,"length":4,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":false,"override_special":null,"special":false,"upper":false}},{"address":"tls_private_key.lb-self-signed","mode":"managed","type":"tls_private_key","name":"lb-self-signed","provider_name":"tls","schema_version":0,"values":{"algorithm":"RSA","ecdsa_curve":"P224","rsa_bits":2048}},{"address":"tls_self_signed_cert.lb-self-signed","mode":"managed","type":"tls_self_signed_cert","name":"lb-self-signed","provider_name":"tls","schema_version":0,"values":{"allowed_uses":["key_encipherment","digital_signature","server_auth"],"dns_names":null,"early_renewal_hours":0,"ip_addresses":null,"is_ca_certificate":null,"key_algorithm":"RSA","private_key_pem":"0cc2a046d6baa6a8a0e69d3dcc3d92aa382fe8d3","ready_for_renewal":true,"set_subject_key_id":null,"subject":[{"common_name":"example.com","country":null,"locality":null,"organization":"ACME Examples, Inc","organizational_unit":null,"postal_code":null,"province":null,"serial_number":null,"street_address":null}],"uris":null,"validity_period_hours":8760}}],"child_modules":[{"resources":[{"address":"module.kms_ebs.aws_kms_alias.default[0]","mode":"managed","type":"aws_kms_alias","name":"default","index":0,"provider_name":"aws","schema_version":0,"values":{"name":"alias/consoleme","name_prefix":null,"target_key_id":"module.kms_ebs.aws_kms_key.default[0].id"}},{"address":"module.kms_ebs.aws_kms_key.default[0]","mode":"managed","type":"aws_kms_key","name":"default","index":0,"provider_name":"aws","schema_version":0,"values":{"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS key for ConsoleMe disk","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}}}],"address":"module.kms_ebs"},{"resources":[{"address":"module.network.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"aws","schema_version":0,"values":{"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"sfdc-somestage-consoleme-us-east-1a"},"timeouts":null,"vpc":true}},{"address":"module.network.aws_internet_gateway.this[0]","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"aws","schema_version":0,"values":{"tags":{"Name":"sfdc-somestage-consoleme"},"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_nat_gateway.this[0]","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"aws","schema_version":0,"values":{"allocation_id":"module.network.aws_eip.nat[0].id","subnet_id":"module.network.aws_subnet.public[0].id","tags":{"Name":"sfdc-somestage-consoleme-us-east-1a"}}},{"address":"module.network.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"aws","schema_version":0,"values":{"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"nat_gateway_id":"module.network.aws_nat_gateway.this[0].id","route_table_id":"module.network.aws_route_table.private[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null}},{"address":"module.network.aws_route.public_internet_gateway[0]","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"aws","schema_version":0,"values":{"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"gateway_id":"module.network.aws_internet_gateway.this[0].id","route_table_id":"module.network.aws_route_table.public[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null}},{"address":"module.network.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"aws","schema_version":0,"values":{"tags":{"Name":"sfdc-somestage-consoleme-private-subnet-us-east-1a"},"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"tags":{"Name":"sfdc-somestage-consoleme-public-subnet"},"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.network.aws_route_table.private[0].id","subnet_id":"module.network.aws_subnet.private[0].id"}},{"address":"module.network.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.network.aws_route_table.public[0].id","subnet_id":"module.network.aws_subnet.public[0].id"}},{"address":"module.network.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.network.aws_route_table.public[0].id","subnet_id":"module.network.aws_subnet.public[1].id"}},{"address":"module.network.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.1.1.0/28","ipv6_cidr_block":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"sfdc-somestage-consoleme-private-subnet-us-east-1a"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.1.1.128/28","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"sfdc-somestage-consoleme-public-subnet-us-east-1a"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.1.1.144/28","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"sfdc-somestage-consoleme-public-subnet-us-east-1b"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_vpc.this[0]","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.1.1.0/24","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"sfdc-somestage-consoleme"}}},{"address":"module.network.aws_vpc_dhcp_options.this[0]","mode":"managed","type":"aws_vpc_dhcp_options","name":"this","index":0,"provider_name":"aws","schema_version":0,"values":{"domain_name":"","domain_name_servers":["AmazonProvidedDNS"],"netbios_name_servers":[],"netbios_node_type":"","ntp_servers":[],"tags":{"Name":"sfdc-somestage-consoleme"}}},{"address":"module.network.aws_vpc_dhcp_options_association.this[0]","mode":"managed","type":"aws_vpc_dhcp_options_association","name":"this","index":0,"provider_name":"aws","schema_version":0,"values":{"dhcp_options_id":"module.network.aws_vpc_dhcp_options.this[0].id","vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_vpc_endpoint.dynamodb[0]","mode":"managed","type":"aws_vpc_endpoint","name":"dynamodb","index":0,"provider_name":"aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":false,"service_name":"com.amazonaws.us-east-1.dynamodb","tags":null,"timeouts":null,"vpc_endpoint_type":"Gateway","vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_vpc_endpoint.s3[0]","mode":"managed","type":"aws_vpc_endpoint","name":"s3","index":0,"provider_name":"aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":false,"service_name":"com.amazonaws.us-east-1.s3","tags":null,"timeouts":null,"vpc_endpoint_type":"Gateway","vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_vpc_endpoint_route_table_association.private_dynamodb[0]","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"private_dynamodb","index":0,"provider_name":"aws","schema_version":0,"values":{"route_table_id":"module.network.aws_route_table.private[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.dynamodb[0].id"}},{"address":"module.network.aws_vpc_endpoint_route_table_association.private_s3[0]","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"private_s3","index":0,"provider_name":"aws","schema_version":0,"values":{"route_table_id":"module.network.aws_route_table.private[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.s3[0].id"}},{"address":"module.network.aws_vpc_endpoint_route_table_association.public_dynamodb[0]","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"public_dynamodb","index":0,"provider_name":"aws","schema_version":0,"values":{"route_table_id":"module.network.aws_route_table.public[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.dynamodb[0].id"}},{"address":"module.network.aws_vpc_endpoint_route_table_association.public_s3[0]","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"public_s3","index":0,"provider_name":"aws","schema_version":0,"values":{"route_table_id":"module.network.aws_route_table.public[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.s3[0].id"}},{"address":"module.network.aws_vpn_gateway.this[0]","mode":"managed","type":"aws_vpn_gateway","name":"this","index":0,"provider_name":"aws","schema_version":0,"values":{"amazon_side_asn":"64512","availability_zone":null,"tags":{"Name":"sfdc-somestage-consoleme"},"vpc_id":"module.network.aws_vpc.this[0].id"}},{"address":"module.network.aws_vpn_gateway_route_propagation.private[0]","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"private","index":0,"provider_name":"aws","schema_version":0,"values":{"route_table_id":"module.network.aws_route_table.private[0].id","vpn_gateway_id":"module.network.aws_vpn_gateway.this[0].id"}},{"address":"module.network.aws_vpn_gateway_route_propagation.public[0]","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"route_table_id":"module.network.aws_route_table.public[0].id","vpn_gateway_id":"module.network.aws_vpn_gateway.this[0].id"}}],"address":"module.network"},{"resources":[{"address":"module.server.aws_instance.this[0]","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"aws","schema_version":1,"values":{"ami":"ami-0d5ae01b1fcf7c45c","credit_specification":[{"cpu_credits":"standard"}],"disable_api_termination":false,"ebs_optimized":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"consolemeInstanceProfile","instance_initiated_shutdown_behavior":"","instance_type":"t2.2xlarge","key_name":"kinnaird","metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"required"}],"monitoring":false,"root_block_device":[{"delete_on_termination":true,"encrypted":true,"kms_key_id":"module.kms_ebs.aws_kms_key.default[0].arn","tags":null,"volume_size":50,"volume_type":"gp2"}],"source_dest_check":true,"subnet_id":"module.network.aws_subnet.private[0].id","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"},"tenancy":"default","timeouts":null,"user_data":"106219f3592ea5520f77ff17df2a33f418b6f3eb","user_data_base64":null,"volume_tags":{"Name":"sfdc-somestage-consoleme"},"vpc_security_group_ids":["aws_security_group.server.id"]}}],"address":"module.server"}]}},"resource_changes":[{"address":"aws_acm_certificate.lb-self-signed[0]","mode":"managed","type":"aws_acm_certificate","name":"lb-self-signed","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"certificate_authority_arn":null,"certificate_body":"tls_self_signed_cert.lb-self-signed.cert_pem","certificate_chain":null,"options":[],"private_key":"tls_private_key.lb-self-signed.private_key_pem","tags":null},"after_unknown":{"arn":true,"domain_name":true,"domain_validation_options":true,"id":true,"options":[],"status":true,"subject_alternative_names":true,"validation_emails":true,"validation_method":true}}},{"address":"aws_dynamodb_table.consoleme_audit_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_audit_global","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"group","type":"S"},{"name":"uuid","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"uuid","local_secondary_index":[],"name":"consoleme_audit_global","point_in_time_recovery":[{"enabled":true}],"range_key":"group","read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after_unknown":{"arn":true,"attribute":[{},{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"ttl":[{}]}}},{"address":"aws_dynamodb_table.consoleme_config_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_config_global","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"id","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"id","local_secondary_index":[],"name":"consoleme_config_global","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after_unknown":{"arn":true,"attribute":[{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"ttl":[{}]}}},{"address":"aws_dynamodb_table.consoleme_iamroles_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_iamroles_global","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"accountId","type":"S"},{"name":"arn","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"arn","local_secondary_index":[],"name":"consoleme_iamroles_global","point_in_time_recovery":[{"enabled":true}],"range_key":"accountId","read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"ttl","enabled":true}],"write_capacity":5},"after_unknown":{"arn":true,"attribute":[{},{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"ttl":[{}]}}},{"address":"aws_dynamodb_table.consoleme_policy_requests","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_policy_requests","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"request_id","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"request_id","local_secondary_index":[],"name":"consoleme_policy_requests","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after_unknown":{"arn":true,"attribute":[{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"ttl":[{}]}}},{"address":"aws_dynamodb_table.consoleme_requests_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_requests_global","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"request_id","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"request_id","local_secondary_index":[],"name":"consoleme_requests_global","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after_unknown":{"arn":true,"attribute":[{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"ttl":[{}]}}},{"address":"aws_dynamodb_table.consoleme_resource_cache","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_resource_cache","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"resourceId","type":"S"},{"name":"resourceType","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"resourceId","local_secondary_index":[],"name":"consoleme_resource_cache","point_in_time_recovery":[{"enabled":true}],"range_key":"resourceType","read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"ttl","enabled":true}],"write_capacity":5},"after_unknown":{"arn":true,"attribute":[{},{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"ttl":[{}]}}},{"address":"aws_dynamodb_table.consoleme_users_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_users_global","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"username","type":"S"}],"billing_mode":"PROVISIONED","global_secondary_index":[],"hash_key":"username","local_secondary_index":[],"name":"consoleme_users_global","point_in_time_recovery":[{"enabled":true}],"range_key":null,"read_capacity":5,"replica":[],"stream_enabled":true,"stream_view_type":"NEW_AND_OLD_IMAGES","tags":null,"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":5},"after_unknown":{"arn":true,"attribute":[{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"ttl":[{}]}}},{"address":"aws_iam_instance_profile.ConsoleMeInstanceProfile","mode":"managed","type":"aws_iam_instance_profile","name":"ConsoleMeInstanceProfile","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"consolemeInstanceProfile","name_prefix":null,"path":"/","role":"consolemeInstanceProfile"},"after_unknown":{"arn":true,"create_date":true,"id":true,"unique_id":true}}},{"address":"aws_iam_role.ConsoleMeInstanceProfile","mode":"managed","type":"aws_iam_role","name":"ConsoleMeInstanceProfile","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AssumeRoleEC2\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"consolemeInstanceProfile","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"unique_id":true}}},{"address":"aws_iam_role.consoleme_example_app_role_1","mode":"managed","type":"aws_iam_role","name":"consoleme_example_app_role_1","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeAppA","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized-cli-only":"groupa@example.com"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"tags":{},"unique_id":true}}},{"address":"aws_iam_role.consoleme_example_app_role_2","mode":"managed","type":"aws_iam_role","name":"consoleme_example_app_role_2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeAppB","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized-cli-only":"groupa@example.com:groupb@example.com"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"tags":{},"unique_id":true}}},{"address":"aws_iam_role.consoleme_example_user_role_1","mode":"managed","type":"aws_iam_role","name":"consoleme_example_user_role_1","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeUserA","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized":"consoleme_admins@example.com"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"tags":{},"unique_id":true}}},{"address":"aws_iam_role.consoleme_example_user_role_2","mode":"managed","type":"aws_iam_role","name":"consoleme_example_user_role_2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeUserB","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"consoleme-authorized":"configeditors@example.com:consoleme_admins@example.com"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"tags":{},"unique_id":true}}},{"address":"aws_iam_role.consoleme_target","mode":"managed","type":"aws_iam_role","name":"consoleme_target","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"data.aws_iam_policy_document.consoleme_target_trust_policy.json","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ConsoleMeTarget","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"unique_id":true}}},{"address":"aws_iam_role_policy.consoleme_app_role_policy1","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_app_role_policy1","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_app_role_1.id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy.consoleme_app_role_policy2","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_app_role_policy2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_app_role_2.id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy.consoleme_target","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_target","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"ConsoleMeInstanceProfilePolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CentralAccountPermissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sts:assumerole\",\n        \"sqs:*\",\n        \"sns:*\",\n        \"s3:GetObject\",\n        \"iam:list*\",\n        \"dynamodb:*\",\n        \"config:*\",\n        \"cloudwatch:*\",\n        \"cloudtrail:*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"SendEmail\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ses:sendrawemail\",\n        \"ses:sendemail\"\n      ],\n      \"Resource\": \"arn:aws:ses:*:409917749248:identity/your_identity.example.com\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ses:FromAddress\": \"email_address_here@example.com\"\n        }\n      }\n    }\n  ]\n}","role":"aws_iam_role.ConsoleMeInstanceProfile.id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy.consoleme_target_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_target_role_policy","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAccessThis\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sqs:UntagQueue\",\n        \"sqs:TagQueue\",\n        \"sqs:SetQueueAttributes\",\n        \"sqs:ListQueues\",\n        \"sqs:ListQueueTags\",\n        \"sqs:GetQueueUrl\",\n        \"sqs:GetQueueAttributes\",\n        \"sns:UnTagResource\",\n        \"sns:TagResource\",\n        \"sns:SetTopicAttributes\",\n        \"sns:ListTopics\",\n        \"sns:ListTagsForResource\",\n        \"sns:GetTopicAttributes\",\n        \"servicequotas:*\",\n        \"s3:PutBucketTagging\",\n        \"s3:PutBucketPolicy\",\n        \"s3:ListBucket\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:GetObject\",\n        \"s3:GetBucketTagging\",\n        \"s3:GetBucketPolicy\",\n        \"iam:*\",\n        \"ec2:describevpcendpoints\",\n        \"ec2:DescribeVpcs\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeInstances\",\n        \"config:Select*\",\n        \"config:List*\",\n        \"config:BatchGet*\",\n        \"cloudwatch:List*\",\n        \"cloudwatch:Get*\",\n        \"autoscaling:Describe*\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_target.id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy.consoleme_user_role_policy1","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_user_role_policy1","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_user_role_1.id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy.consoleme_user_role_policy2","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_user_role_policy2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"ConsoleMeTargetPolicy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","role":"aws_iam_role.consoleme_example_user_role_2.id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy_attachment.ssm","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"aws_iam_role.ConsoleMeInstanceProfile.id"},"after_unknown":{"id":true}}},{"address":"aws_lb.public-to-private-lb","mode":"managed","type":"aws_lb","name":"public-to-private-lb","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"customer_owned_ipv4_pool":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"idle_timeout":60,"internal":false,"load_balancer_type":"application","name":"consoleme-lb","name_prefix":null,"security_groups":["aws_security_group.lb-sg.id"],"subnets":["module.network.aws_subnet.public[0].id","module.network.aws_subnet.public[1].id"],"tags":null,"timeouts":null},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"dns_name":true,"id":true,"ip_address_type":true,"security_groups":[false],"subnet_mapping":true,"subnets":[false,false],"vpc_id":true,"zone_id":true}}},{"address":"aws_lb_listener.public-8081","mode":"managed","type":"aws_lb_listener","name":"public-8081","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"certificate_arn":"aws_acm_certificate.lb-self-signed[0].arn","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[{"authentication_request_extra_params":null,"authorization_endpoint":"https://accounts.google.com/o/oauth2/auth","client_id":"150686249207-t0a8tqjeosi8tnb3aku7d8iiidsejpo7.apps.googleusercontent.com","client_secret":"myAz-7Gusb6D75IAGZiWaT2V","issuer":"https://accounts.google.com","scope":"https://www.googleapis.com/auth/admin.directory.group.readonly email openid","token_endpoint":"https://oauth2.googleapis.com/token","user_info_endpoint":"https://www.googleapis.com/oauth2/v3/userinfo"}],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":null,"type":"authenticate-oidc"},{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","type":"forward"}],"load_balancer_arn":"aws_lb.public-to-private-lb.arn","port":443,"protocol":"HTTPS","timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[{"on_unauthenticated_request":true,"session_cookie_name":true,"session_timeout":true}],"fixed_response":[],"forward":[],"order":true,"redirect":[]},{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[]}],"id":true,"ssl_policy":true}}},{"address":"aws_lb_listener_rule.unauthenticated-routes-1","mode":"managed","type":"aws_lb_listener_rule","name":"unauthenticated-routes-1","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/api/v1/get_credentials?","/api/v1/get_roles?","/api/v2/mtls/roles/*","/noauth/v1/challenge_generator/*","/noauth/v1/challenge_poller/*"]}],"query_string":[],"source_ip":[]}],"listener_arn":"aws_lb_listener.public-8081.arn","priority":1},"after_unknown":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[]}],"arn":true,"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false,false,false,false,false]}],"query_string":[],"source_ip":[]}],"id":true}}},{"address":"aws_lb_listener_rule.unauthenticated-routes-2","mode":"managed","type":"aws_lb_listener_rule","name":"unauthenticated-routes-2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/api/v1/myheaders/?"]}],"query_string":[],"source_ip":[]}],"listener_arn":"aws_lb_listener.public-8081.arn","priority":2},"after_unknown":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[]}],"arn":true,"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false]}],"query_string":[],"source_ip":[]}],"id":true}}},{"address":"aws_lb_target_group.consoleme-servers","mode":"managed","type":"aws_lb_target_group","name":"consoleme-servers","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":300,"lambda_multi_value_headers_enabled":false,"name":"consoleme-servers","name_prefix":null,"port":8081,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance","vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"arn_suffix":true,"health_check":true,"id":true,"load_balancing_algorithm_type":true,"stickiness":true}}},{"address":"aws_lb_target_group_attachment.test","mode":"managed","type":"aws_lb_target_group_attachment","name":"test","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"port":8081,"target_group_arn":"aws_lb_target_group.consoleme-servers.arn","target_id":"module.server.aws_instance.this[0].id"},"after_unknown":{"id":true}}},{"address":"aws_s3_bucket.consoleme_files_bucket","mode":"managed","type":"aws_s3_bucket","name":"consoleme_files_bucket","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"your-name-prefix-random_string.omnipotence.result","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"AES256"}]}]}],"tags":{"Name":"your-name-prefix"},"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"versioning":true,"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket_object.consoleme_config","mode":"managed","type":"aws_s3_bucket_object","name":"consoleme_config","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"your-name-prefix-random_string.omnipotence.result","cache_control":null,"content":"data.template_file.consoleme_config.rendered","content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"etag":"205722741510716813f0ffc319b1ab74","force_destroy":false,"key":"config.yaml","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":null,"tags":null,"website_redirect":null},"after_unknown":{"content_type":true,"id":true,"kms_key_id":true,"server_side_encryption":true,"storage_class":true,"version_id":true}}},{"address":"aws_s3_bucket_object.consoleme_zip","mode":"managed","type":"aws_s3_bucket_object","name":"consoleme_zip","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"your-name-prefix-random_string.omnipotence.result","cache_control":null,"content":null,"content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"etag":"fa56372cc7f13165959d5491cad228ca","force_destroy":false,"key":"consoleme.tar.gz","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":"./consoleme.tar.gz","tags":null,"website_redirect":null},"after_unknown":{"content_type":true,"id":true,"kms_key_id":true,"server_side_encryption":true,"storage_class":true,"version_id":true}}},{"address":"aws_security_group.lb-sg","mode":"managed","type":"aws_security_group","name":"lb-sg","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Allows access to the load balancer, which forwards to the ConsoleMe server.","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS for accessing ConsoleMe","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"allow_access_to_consoleme","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"allow_access_to_consoleme"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"owner_id":true,"tags":{}}}},{"address":"aws_security_group.server","mode":"managed","type":"aws_security_group","name":"server","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow ingress from authorized IPs to self, and egress to everywhere.","name":"sfdc-somestage-consoleme-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Name":"sfdc-somestage-consoleme-sg","Namespace":"sfdc","Stage":"somestage"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"owner_id":true,"tags":{}}}},{"address":"aws_security_group_rule.external_egress_allow_all","mode":"managed","type":"aws_security_group_rule","name":"external_egress_allow_all","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"aws_security_group.server.id","self":false,"to_port":65535,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"source_security_group_id":true}}},{"address":"aws_security_group_rule.external_ingress_8081","mode":"managed","type":"aws_security_group_rule","name":"external_ingress_8081","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":8081,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"aws_security_group.server.id","self":false,"to_port":8081,"type":"ingress"},"after_unknown":{"cidr_blocks":[false],"id":true,"source_security_group_id":true}}},{"address":"aws_security_group_rule.internal_ingress_all_self","mode":"managed","type":"aws_security_group_rule","name":"internal_ingress_all_self","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["10.1.1.0/24"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"aws_security_group.server.id","self":false,"to_port":0,"type":"ingress"},"after_unknown":{"cidr_blocks":[false],"id":true,"source_security_group_id":true}}},{"address":"data.aws_iam_policy_document.consoleme_target_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"consoleme_target_trust_policy","provider_name":"aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["aws_iam_role.ConsoleMeInstanceProfile.arn"],"type":"AWS"}],"resources":null,"sid":"ConsoleMeAssumesTarget"}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[{"identifiers":[false]}]}]}}},{"address":"data.aws_iam_policy_document.consoleme_user_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"consoleme_user_trust_policy","provider_name":"aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["aws_iam_role.ConsoleMeInstanceProfile.arn"],"type":"AWS"}],"resources":null,"sid":"ConsoleMeCanAssumeAllRoles"}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[{"identifiers":[false]}]}]}}},{"address":"data.template_file.consoleme_config","mode":"data","type":"template_file","name":"consoleme_config","provider_name":"template","change":{"actions":["read"],"before":null,"after":{"filename":null,"template":"extends:\n  - example_config_base.yaml\n\ntornado:\n  debug: true\n  port: 8081\n  xsrf: true\n  uvloop: false\n\nchallenge_url:\n  enabled: true\n\n# Enter your team's e-mail address here. This e-mail will be used as the default approvers of IAM policy requests\napplication_admin: ${application_admin}\ndevelopment: false\nenvironment: prod\n\nlogging:\n  stdout_enabled: true\n  format: \"%(asctime)s - %(levelname)s - %(name)s - [%(filename)s:%(lineno)s - %(funcName)s() ] - %(message)s\"\n  level: debug\n  file: /logs/consoleme/consoleme_tornado.log\n\naccount_ids_to_name:\n  \"${current_account_id}\": default_account\n\ncache_cloud_accounts:\n  from_aws_organizations: ${sync_accounts_from_organizations}\n\ncache_accounts_from_aws_organizations:\n  organizations_master_account_id: \"${sync_accounts_from_organizations_master_account_id}\"\n  organizations_master_role_to_assume: \"${sync_accounts_from_organizations_role_to_assume}\"\n\ncloud_credential_authorization_mapping:\n  role_tags:\n    enabled: true\n    required_trust_policy_entity: arn:aws:iam::${current_account_id}:role/consolemeInstanceProfile\n    authorized_groups_tags:\n      - consoleme-authorized\n    authorized_groups_cli_only_tags:\n      - consoleme-authorized-cli-only\n  dynamic_config:\n    enabled: true\n  internal_plugin:\n    enabled: false\n\n# You'll probably want to override default_plugins logic to generate this data with your own business logic.\napplication_settings:\n  application_1:\n    owner: ${application_admin}\n    owner_url: https://www.example.com/groupa@example.com\n    app_url: https://www.example.com/ci_cd_pipeline/application_1\n    roles:\n      - ${demo_app_role_arn_1}\n  application_2:\n    owner: ${application_admin}\n    owner_url: https://www.example.com/groupb@example.com\n    app_url: https://www.example.com/ci_cd_pipeline/application_2\n    roles:\n      - ${demo_app_role_arn_2}\n\ndynamic_config:\n  # You can set this key in http://YOUR_CONSOLEME_DOMAIN/config as a rudimentary way to allow groups to access\n  # roles before you override get_eligible_roles with your own custom logic\n  group_mapping:\n    ${application_admin}:\n      roles:\n        - ${demo_user_role_arn_1}\n        - ${demo_user_role_arn_2}\n\npolicies:\n  role_name: ConsoleMeTarget\n\ncelery:\n  active_region: ${region}\n\nauth:\n  get_user_by_aws_alb_auth: true\n  set_auth_cookie: true\n\nget_user_by_aws_alb_auth_settings:\n  jwt_email_key: ${jwt_email_key}\n  jwt_groups_key: groups\n\njwt_secret: secret\nurl: ${user_facing_url}\n","vars":{"application_admin":"y@indeni.com","current_account_id":"409917749248","demo_app_role_arn_1":"aws_iam_role.consoleme_example_app_role_1.arn","demo_app_role_arn_2":"aws_iam_role.consoleme_example_app_role_2.arn","demo_target_role_arn":"aws_iam_role.consoleme_target.arn","demo_user_role_arn_1":"aws_iam_role.consoleme_example_user_role_1.arn","demo_user_role_arn_2":"aws_iam_role.consoleme_example_user_role_2.arn","jwt_email_key":"email","region":"us-east-1","sync_accounts_from_organizations":"false","sync_accounts_from_organizations_master_account_id":"409917749248","sync_accounts_from_organizations_role_to_assume":"ConsoleMeTarget","user_facing_url":"https://aws_lb.public-to-private-lb.dns_name:443"}},"after_unknown":{"id":true,"rendered":true,"vars":{}}}},{"address":"data.template_file.consoleme_userdata","mode":"data","type":"template_file","name":"consoleme_userdata","provider_name":"template","change":{"actions":["read"],"before":null,"after":{"filename":null,"template":"#!/usr/bin/env bash\nset -x\n\nexport HOME=/root\nexport EC2_REGION=${region}\nexport CONSOLEME_CONFIG_S3=${CONSOLEME_CONFIG_S3}\n\n# ---------------------------------------------------------------------------------------------------------------------\n# Filter out useless messages from logs\n# ---------------------------------------------------------------------------------------------------------------------\ncat \u003c\u003cEOF \u003e /etc/rsyslog.d/01_filters.conf\n\nif \\$programname == 'systemd' and \\$msg contains \"Started Session\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Starting Session\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Created slice\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Starting user-\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Stopping user-\" then stop\nif \\$programname == 'systemd' and \\$msg contains \"Removed slice\" then stop\nEOF\nsystemctl restart rsyslog\n\n# ---------------------------------------------------------------------------------------------------------------------\n# Prereqs\n# ---------------------------------------------------------------------------------------------------------------------\n\n# Install Docker\nsudo yum update -y\nyum -y erase python3\nsudo amazon-linux-extras enable python3.8 # consoleme requires 3.8\nyum -y install git python3.8 python38-pip python38-devel\nyum -y install libcurl-devel\nyum -y install libxml2-devel xmlsec1-devel xmlsec1-openssl-devel libtool-ltdl-devel\nsudo yum install -y gcc-c++\n\nyum -y install gcc\nsudo amazon-linux-extras install -y docker\nsudo service docker start\nsudo usermod -a -G docker ec2-user\n\nmkdir -p /apps/consoleme\nmkdir /logs\ncd /apps/\nyum -y install unzip\naws s3 cp s3://${bucket}/consoleme.tar.gz /apps/\ntar -xzvf consoleme.tar.gz -C consoleme/\nrm consoleme.tar.gz\n\n#### User specific installation\n# Create a dedicated service user\nuseradd -r -s /bin/false consoleme\nusermod -aG consoleme consoleme\nusermod -aG docker consoleme\n\n# Flower\nuseradd -r -s /bin/false flower\nusermod -aG flower flower\nmkdir -p /apps/flower\nchown -R flower:flower /apps/flower\npython3.8 -m venv /apps/flower/env --copies\nsource /apps/flower/env/bin/activate\npip3.8 install flower redis\n\n# Set up a new Virtualenv in the Consoleme directory\npython3.8 -m venv /apps/consoleme/env\nsource /apps/consoleme/env/bin/activate\nchown -R consoleme:consoleme /apps/consoleme\nchown -R consoleme:consoleme /logs\n# Install it\ncd /apps/consoleme\npip3.8 install xmlsec\n\n# Make uses \"pip\" and \"python\", assuming they are 3.8, but they actually point to python2 (because yum uses it)\nalias python=python3.8\nalias pip=pip3.8\nmake env_install\n\nmake dynamo\nunalias python\nunalias pip\n\nsudo yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nsudo yum-config-manager --enable epel\nyum -y install redis\nsystemctl status redis\nsystemctl start redis\n\n# Update the UI\ncd /apps/consoleme\n\n# Install nvm\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh \u003e /tmp/nvm-install.sh\nchmod +x /tmp/nvm-install.sh\nbash /tmp/nvm-install.sh\necho 'export NVM_DIR=\"/root/.nvm\"' \u003e\u003e /root/.bashrc\necho '[ -s \"\\$NVM_DIR/nvm.sh\" ] \u0026\u0026 . \"\\$NVM_DIR/nvm.sh\"  # This loads nvm' \u003e\u003e /root/.bashrc\n. ~/.nvm/nvm.sh\n. ~/.bashrc\ncd /apps/consoleme\nnvm install 12.18.2\nnvm use 12.18.2\nnode -e \"console.log('Running Node.js ' + process.version)\"\nnpm install yarn -g\nyarn --cwd ui\nyarn --cwd ui build:prod\n\n# Since the setup ran as root, just chown it again so the consoleme user owns it\nchown -R consoleme:consoleme /apps/consoleme\nchown -R consoleme:consoleme /logs/consoleme\n\ncat \u003c\u003c EOF \u003e /etc/environment\nEC2_REGION=${region}\nCONSOLEME_CONFIG_S3=${CONSOLEME_CONFIG_S3}\nEOF\n\ncat \u003c\u003c EOF \u003e /etc/systemd/system/consoleme.service\n[Unit]\nDescription=ConsoleMe Service\nAfter=network.target\nStartLimitIntervalSec=0\nStartLimitBurst=5\nStartLimitIntervalSec=0\n\n[Service]\nEnvironment=EC2_REGION=${region}\nWorkingDirectory=/apps/consoleme\nType=simple\nRestart=always\nRestartSec=1\nUser=consoleme\nGroup=consoleme\nExecStart=/usr/bin/env /apps/consoleme/env/bin/python3.8 /apps/consoleme/consoleme/__main__.py\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\ncat \u003c\u003c EOF \u003e /etc/systemd/system/celery.service\n[Unit]\nDescription=Celery Service\nAfter=network.target\n\n[Service]\nType=forking\nUser=consoleme\nGroup=consoleme\nType=simple\nRestart=always\nRestartSec=1\nWorkingDirectory=/apps/consoleme\nEnvironment=EC2_REGION=${region}\nExecStart=/usr/bin/env /apps/consoleme/env/bin/python3.8 /apps/consoleme/env/bin/celery -A consoleme.celery.celery_tasks worker -l DEBUG -B -E --concurrency=15\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\ncat \u003c\u003c EOF \u003e\u003e /root/.bashrc\nexport CONSOLEME_CONFIG_S3=${CONSOLEME_CONFIG_S3}\nexport EC2_REGION=${region}\nEOF\n\n# Change permissions on service file\nchown root:root /etc/systemd/system/celery.service\nchmod 644 /etc/systemd/system/celery.service\nchown root:root /etc/systemd/system/consoleme.service\nchmod 644 /etc/systemd/system/consoleme.service\n\nsystemctl daemon-reload\n\nmkdir -p /home/consoleme\nchown consoleme:consoleme /home/consoleme/\n\ncat \u003c\u003c EOF \u003e\u003e /home/consoleme/.bashrc\nexport EC2_REGION=${region}\nEOF\n\n# Run script to decode and write a custom ConsoleMe configuration. This won't do anything unless CONSOLEME_CONFIG_S3 is defined.\nsudo -u consoleme bash -c '. /home/consoleme/.bashrc ; /apps/consoleme/env/bin/python3.8 /apps/consoleme/scripts/retrieve_or_decode_configuration.py'\n# Make sure it is listed\nsystemctl list-unit-files | grep celery.service\nsystemctl list-unit-files | grep consoleme.service\n# Enable the service and create the symlink in /usr/lib\nsystemctl start celery\nsystemctl enable celery\nsystemctl enable consoleme\nsystemctl start consoleme\n\nsudo -u consoleme bash -c '. /home/consoleme/.bashrc ; /apps/consoleme/env/bin/python3.8 /apps/consoleme/scripts/initialize_redis_oss.py'\n\necho \"Running custom userdata script\"\n${custom_user_data_script}","vars":{"CONSOLEME_CONFIG_S3":"s3://aws_s3_bucket.consoleme_files_bucket.id/aws_s3_bucket_object.consoleme_config.id","bucket":"your-name-prefix-random_string.omnipotence.result","current_account_id":"409917749248","custom_user_data_script":"","region":"us-east-1"}},"after_unknown":{"id":true,"rendered":true,"vars":{}}}},{"address":"module.kms_ebs.aws_kms_alias.default[0]","module_address":"module.kms_ebs","mode":"managed","type":"aws_kms_alias","name":"default","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"alias/consoleme","name_prefix":null,"target_key_id":"module.kms_ebs.aws_kms_key.default[0].id"},"after_unknown":{"arn":true,"id":true,"target_key_arn":true}}},{"address":"module.kms_ebs.aws_kms_key.default[0]","module_address":"module.kms_ebs","mode":"managed","type":"aws_kms_key","name":"default","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS key for ConsoleMe disk","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}},"after_unknown":{"arn":true,"id":true,"key_id":true,"policy":true,"tags":{}}}},{"address":"module.network.aws_eip.nat[0]","module_address":"module.network","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"sfdc-somestage-consoleme-us-east-1a"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{}}}},{"address":"module.network.aws_internet_gateway.this[0]","module_address":"module.network","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"sfdc-somestage-consoleme"},"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{}}}},{"address":"module.network.aws_nat_gateway.this[0]","module_address":"module.network","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"allocation_id":"module.network.aws_eip.nat[0].id","subnet_id":"module.network.aws_subnet.public[0].id","tags":{"Name":"sfdc-somestage-consoleme-us-east-1a"}},"after_unknown":{"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"tags":{}}}},{"address":"module.network.aws_route.private_nat_gateway[0]","module_address":"module.network","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"nat_gateway_id":"module.network.aws_nat_gateway.this[0].id","route_table_id":"module.network.aws_route_table.private[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"destination_prefix_list_id":true,"egress_only_gateway_id":true,"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"local_gateway_id":true,"network_interface_id":true,"origin":true,"state":true,"timeouts":{}}}},{"address":"module.network.aws_route.public_internet_gateway[0]","module_address":"module.network","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"gateway_id":"module.network.aws_internet_gateway.this[0].id","route_table_id":"module.network.aws_route_table.public[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"destination_prefix_list_id":true,"egress_only_gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"local_gateway_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"state":true,"timeouts":{}}}},{"address":"module.network.aws_route_table.private[0]","module_address":"module.network","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"sfdc-somestage-consoleme-private-subnet-us-east-1a"},"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{}}}},{"address":"module.network.aws_route_table.public[0]","module_address":"module.network","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"sfdc-somestage-consoleme-public-subnet"},"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{}}}},{"address":"module.network.aws_route_table_association.private[0]","module_address":"module.network","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.network.aws_route_table.private[0].id","subnet_id":"module.network.aws_subnet.private[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_route_table_association.public[0]","module_address":"module.network","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.network.aws_route_table.public[0].id","subnet_id":"module.network.aws_subnet.public[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_route_table_association.public[1]","module_address":"module.network","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.network.aws_route_table.public[0].id","subnet_id":"module.network.aws_subnet.public[1].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_subnet.private[0]","module_address":"module.network","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.1.1.0/28","ipv6_cidr_block":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"sfdc-somestage-consoleme-private-subnet-us-east-1a"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{}}}},{"address":"module.network.aws_subnet.public[0]","module_address":"module.network","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.1.1.128/28","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"sfdc-somestage-consoleme-public-subnet-us-east-1a"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{}}}},{"address":"module.network.aws_subnet.public[1]","module_address":"module.network","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.1.1.144/28","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"sfdc-somestage-consoleme-public-subnet-us-east-1b"},"timeouts":null,"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{}}}},{"address":"module.network.aws_vpc.this[0]","module_address":"module.network","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.1.1.0/24","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"sfdc-somestage-consoleme"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{}}}},{"address":"module.network.aws_vpc_dhcp_options.this[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_dhcp_options","name":"this","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"domain_name":"","domain_name_servers":["AmazonProvidedDNS"],"netbios_name_servers":[],"netbios_node_type":"","ntp_servers":[],"tags":{"Name":"sfdc-somestage-consoleme"}},"after_unknown":{"arn":true,"domain_name_servers":[false],"id":true,"netbios_name_servers":[],"ntp_servers":[],"owner_id":true,"tags":{}}}},{"address":"module.network.aws_vpc_dhcp_options_association.this[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_dhcp_options_association","name":"this","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"dhcp_options_id":"module.network.aws_vpc_dhcp_options.this[0].id","vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_vpc_endpoint.dynamodb[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint","name":"dynamodb","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":false,"service_name":"com.amazonaws.us-east-1.dynamodb","tags":null,"timeouts":null,"vpc_endpoint_type":"Gateway","vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"id":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true}}},{"address":"module.network.aws_vpc_endpoint.s3[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint","name":"s3","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":false,"service_name":"com.amazonaws.us-east-1.s3","tags":null,"timeouts":null,"vpc_endpoint_type":"Gateway","vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"id":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true}}},{"address":"module.network.aws_vpc_endpoint_route_table_association.private_dynamodb[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"private_dynamodb","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"route_table_id":"module.network.aws_route_table.private[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.dynamodb[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_vpc_endpoint_route_table_association.private_s3[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"private_s3","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"route_table_id":"module.network.aws_route_table.private[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.s3[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_vpc_endpoint_route_table_association.public_dynamodb[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"public_dynamodb","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"route_table_id":"module.network.aws_route_table.public[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.dynamodb[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_vpc_endpoint_route_table_association.public_s3[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"public_s3","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"route_table_id":"module.network.aws_route_table.public[0].id","vpc_endpoint_id":"module.network.aws_vpc_endpoint.s3[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_vpn_gateway.this[0]","module_address":"module.network","mode":"managed","type":"aws_vpn_gateway","name":"this","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"amazon_side_asn":"64512","availability_zone":null,"tags":{"Name":"sfdc-somestage-consoleme"},"vpc_id":"module.network.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"tags":{}}}},{"address":"module.network.aws_vpn_gateway_route_propagation.private[0]","module_address":"module.network","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"private","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"route_table_id":"module.network.aws_route_table.private[0].id","vpn_gateway_id":"module.network.aws_vpn_gateway.this[0].id"},"after_unknown":{"id":true}}},{"address":"module.network.aws_vpn_gateway_route_propagation.public[0]","module_address":"module.network","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"public","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"route_table_id":"module.network.aws_route_table.public[0].id","vpn_gateway_id":"module.network.aws_vpn_gateway.this[0].id"},"after_unknown":{"id":true}}},{"address":"module.server.aws_instance.this[0]","module_address":"module.server","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0d5ae01b1fcf7c45c","credit_specification":[{"cpu_credits":"standard"}],"disable_api_termination":false,"ebs_optimized":false,"get_password_data":false,"hibernation":null,"iam_instance_profile":"consolemeInstanceProfile","instance_initiated_shutdown_behavior":"","instance_type":"t2.2xlarge","key_name":"kinnaird","metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"required"}],"monitoring":false,"root_block_device":[{"delete_on_termination":true,"encrypted":true,"kms_key_id":"module.kms_ebs.aws_kms_key.default[0].arn","tags":null,"volume_size":50,"volume_type":"gp2"}],"source_dest_check":true,"subnet_id":"module.network.aws_subnet.private[0].id","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"},"tenancy":"default","timeouts":null,"user_data":"106219f3592ea5520f77ff17df2a33f418b6f3eb","user_data_base64":null,"volume_tags":{"Name":"sfdc-somestage-consoleme"},"vpc_security_group_ids":["aws_security_group.server.id"]},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[{}],"ebs_block_device":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"metadata_options":[{}],"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":[{"device_name":true,"iops":true,"throughput":true,"volume_id":true}],"secondary_private_ips":true,"security_groups":true,"tags":{},"volume_tags":{},"vpc_security_group_ids":[false]}}},{"address":"random_string.omnipotence","mode":"managed","type":"random_string","name":"omnipotence","provider_name":"random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":4,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":false,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true}}},{"address":"tls_private_key.lb-self-signed","mode":"managed","type":"tls_private_key","name":"lb-self-signed","provider_name":"tls","change":{"actions":["create"],"before":null,"after":{"algorithm":"RSA","ecdsa_curve":"P224","rsa_bits":2048},"after_unknown":{"id":true,"private_key_pem":true,"public_key_fingerprint_md5":true,"public_key_openssh":true,"public_key_pem":true}}},{"address":"tls_self_signed_cert.lb-self-signed","mode":"managed","type":"tls_self_signed_cert","name":"lb-self-signed","provider_name":"tls","change":{"actions":["create"],"before":null,"after":{"allowed_uses":["key_encipherment","digital_signature","server_auth"],"dns_names":null,"early_renewal_hours":0,"ip_addresses":null,"is_ca_certificate":null,"key_algorithm":"RSA","private_key_pem":"0cc2a046d6baa6a8a0e69d3dcc3d92aa382fe8d3","ready_for_renewal":true,"set_subject_key_id":null,"subject":[{"common_name":"example.com","country":null,"locality":null,"organization":"ACME Examples, Inc","organizational_unit":null,"postal_code":null,"province":null,"serial_number":null,"street_address":null}],"uris":null,"validity_period_hours":8760},"after_unknown":{"allowed_uses":[false,false,false],"cert_pem":true,"id":true,"subject":[{}],"validity_end_time":true,"validity_start_time":true}}}],"output_changes":{"additional_tag_map":{"actions":["create"],"before":null,"after":{},"after_unknown":false},"alias_arn":{"actions":["create"],"before":null,"after":"module.kms_ebs.aws_kms_alias.default[0].arn","after_unknown":false},"alias_name":{"actions":["create"],"before":null,"after":"alias/consoleme","after_unknown":false},"arn":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].arn"],"after_unknown":false},"attributes":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"availability_zone":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].availability_zone"],"after_unknown":false},"azs":{"actions":["create"],"before":null,"after":["us-east-1a","us-east-1b"],"after_unknown":false},"context":{"actions":["create"],"before":null,"after":{"additional_tag_map":{},"attributes":[],"delimiter":null,"enabled":true,"environment":null,"id_length_limit":null,"label_order":[],"name":"consoleme","namespace":"sfdc","regex_replace_chars":null,"stage":"somestage","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}},"after_unknown":false},"credit_specification":{"actions":["create"],"before":null,"after":[[{"cpu_credits":"standard"}]],"after_unknown":false},"database_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_route_table_ids":{"actions":["create"],"before":null,"after":["module.network.aws_route_table.private[0].id"],"after_unknown":false},"database_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_subnet_group":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"default_network_acl_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc.this[0].default_network_acl_id","after_unknown":false},"default_route_table_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc.this[0].default_route_table_id","after_unknown":false},"default_security_group_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc.this[0].default_security_group_id","after_unknown":false},"default_vpc_cidr_block":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_default_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_default_route_table_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_default_security_group_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_enable_dns_hostnames":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_enable_dns_support":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_instance_tenancy":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_main_route_table_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"delimiter":{"actions":["create"],"before":null,"after":"-","after_unknown":false},"ebs_block_device_volume_ids":{"actions":["create"],"before":null,"after_unknown":true},"elasticache_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_route_table_ids":{"actions":["create"],"before":null,"after":["module.network.aws_route_table.private[0].id"],"after_unknown":false},"elasticache_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"elasticache_subnet_group":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_subnet_group_name":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"elasticache_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"enabled":{"actions":["create"],"before":null,"after":true,"after_unknown":false},"environment":{"actions":["create"],"before":null,"after":"","after_unknown":false},"id":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].id"],"after_unknown":false},"id_full":{"actions":["create"],"before":null,"after":"sfdc-somestage-consoleme","after_unknown":false},"id_length_limit":{"actions":["create"],"before":null,"after":0,"after_unknown":false},"igw_id":{"actions":["create"],"before":null,"after":"module.network.aws_internet_gateway.this[0].id","after_unknown":false},"instance_count":{"actions":["create"],"before":null,"after":1,"after_unknown":false},"instance_state":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].instance_state"],"after_unknown":false},"intra_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"intra_route_table_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"ipv6_addresses":{"actions":["create"],"before":null,"after_unknown":true},"key_arn":{"actions":["create"],"before":null,"after":"module.kms_ebs.aws_kms_key.default[0].arn","after_unknown":false},"key_id":{"actions":["create"],"before":null,"after":"module.kms_ebs.aws_kms_key.default[0].key_id","after_unknown":false},"key_name":{"actions":["create"],"before":null,"after":["kinnaird"],"after_unknown":false},"label_order":{"actions":["create"],"before":null,"after":["namespace","environment","stage","name","attributes"],"after_unknown":false},"metadata_options":{"actions":["create"],"before":null,"after":[[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"required"}]],"after_unknown":false},"name":{"actions":["create"],"before":null,"after":"consoleme","after_unknown":false},"namespace":{"actions":["create"],"before":null,"after":"sfdc","after_unknown":false},"nat_ids":{"actions":["create"],"before":null,"after":["module.network.aws_eip.nat[0].id"],"after_unknown":false},"nat_public_ips":{"actions":["create"],"before":null,"after":["module.network.aws_eip.nat[0].public_ip"],"after_unknown":false},"natgw_ids":{"actions":["create"],"before":null,"after":["module.network.aws_nat_gateway.this[0].id"],"after_unknown":false},"normalized_context":{"actions":["create"],"before":null,"after":{"additional_tag_map":{},"attributes":[],"delimiter":"-","enabled":true,"environment":"","id_length_limit":0,"label_order":["namespace","environment","stage","name","attributes"],"name":"consoleme","namespace":"sfdc","regex_replace_chars":"/[^-a-zA-Z0-9]/","stage":"somestage","tags":{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}},"after_unknown":false},"password_data":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].password_data"],"after_unknown":false},"placement_group":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].placement_group"],"after_unknown":false},"primary_network_interface_id":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].primary_network_interface_id"],"after_unknown":false},"private_dns":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].private_dns"],"after_unknown":false},"private_ip":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].private_ip"],"after_unknown":false},"private_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"private_route_table_ids":{"actions":["create"],"before":null,"after":["module.network.aws_route_table.private[0].id"],"after_unknown":false},"private_subnet_arns":{"actions":["create"],"before":null,"after":["module.network.aws_subnet.private[0].arn"],"after_unknown":false},"private_subnets":{"actions":["create"],"before":null,"after":["module.network.aws_subnet.private[0].id"],"after_unknown":false},"private_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":["10.1.1.0/28"],"after_unknown":false},"public_dns":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].public_dns"],"after_unknown":false},"public_fqdn":{"actions":["create"],"before":null,"after":"aws_lb.public-to-private-lb.dns_name","after_unknown":false},"public_ip":{"actions":["create"],"before":null,"after":["module.server.aws_instance.this[0].public_ip"],"after_unknown":false},"public_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"public_route_table_ids":{"actions":["create"],"before":null,"after":["module.network.aws_route_table.public[0].id"],"after_unknown":false},"public_subnet_arns":{"actions":["create"],"before":null,"after":["module.network.aws_subnet.public[0].arn","module.network.aws_subnet.public[1].arn"],"after_unknown":false},"public_subnets":{"actions":["create"],"before":null,"after":["module.network.aws_subnet.public[0].id","module.network.aws_subnet.public[1].id"],"after_unknown":false},"public_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":["10.1.1.128/28","10.1.1.144/28"],"after_unknown":false},"redshift_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"redshift_route_table_ids":{"actions":["create"],"before":null,"after":["module.network.aws_route_table.private[0].id"],"after_unknown":false},"redshift_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"redshift_subnet_group":{"actions":["create"],"before":null,"after":"","after_unknown":false},"redshift_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"redshift_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"regex_replace_chars":{"actions":["create"],"before":null,"after":"/[^-a-zA-Z0-9]/","after_unknown":false},"root_block_device_volume_ids":{"actions":["create"],"before":null,"after_unknown":true},"security_groups":{"actions":["create"],"before":null,"after_unknown":true},"stage":{"actions":["create"],"before":null,"after":"somestage","after_unknown":false},"subnet_id":{"actions":["create"],"before":null,"after":["module.network.aws_subnet.private[0].id"],"after_unknown":false},"tags":{"actions":["create"],"before":null,"after":[{"Name":"sfdc-somestage-consoleme","Namespace":"sfdc","Stage":"somestage"}],"after_unknown":false},"tags_as_list_of_maps":{"actions":["create"],"before":null,"after":[{"key":"Name","value":"sfdc-somestage-consoleme"},{"key":"Namespace","value":"sfdc"},{"key":"Stage","value":"somestage"}],"after_unknown":false},"vgw_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpn_gateway.this[0].id","after_unknown":false},"volume_tags":{"actions":["create"],"before":null,"after":[{"Name":"sfdc-somestage-consoleme"}],"after_unknown":false},"vpc_arn":{"actions":["create"],"before":null,"after":"module.network.aws_vpc.this[0].arn","after_unknown":false},"vpc_cidr_block":{"actions":["create"],"before":null,"after":"10.1.1.0/24","after_unknown":false},"vpc_enable_dns_hostnames":{"actions":["create"],"before":null,"after":true,"after_unknown":false},"vpc_enable_dns_support":{"actions":["create"],"before":null,"after":true,"after_unknown":false},"vpc_endpoint_apigw_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_apigw_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_apigw_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_cloudtrail_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_cloudtrail_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_cloudtrail_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_dynamodb_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc_endpoint.dynamodb[0].id","after_unknown":false},"vpc_endpoint_dynamodb_pl_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc_endpoint.dynamodb[0].prefix_list_id","after_unknown":false},"vpc_endpoint_ec2_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ec2_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ec2_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ec2messages_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ec2messages_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ec2messages_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecr_api_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecr_api_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ecr_api_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecr_dkr_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecr_dkr_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ecr_dkr_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecs_agent_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecs_agent_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ecs_agent_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecs_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecs_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ecs_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecs_telemetry_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ecs_telemetry_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ecs_telemetry_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_elasticloadbalancing_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_elasticloadbalancing_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_elasticloadbalancing_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_events_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_events_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_events_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_kms_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_kms_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_kms_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_logs_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_logs_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_logs_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_monitoring_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_monitoring_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_monitoring_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_s3_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc_endpoint.s3[0].id","after_unknown":false},"vpc_endpoint_s3_pl_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc_endpoint.s3[0].prefix_list_id","after_unknown":false},"vpc_endpoint_sns_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_sns_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_sns_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_sqs_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_sqs_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_sqs_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ssm_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ssm_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ssm_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ssmmessages_dns_entry":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_endpoint_ssmmessages_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_endpoint_ssmmessages_network_interface_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc.this[0].id","after_unknown":false},"vpc_instance_tenancy":{"actions":["create"],"before":null,"after":"default","after_unknown":false},"vpc_main_route_table_id":{"actions":["create"],"before":null,"after":"module.network.aws_vpc.this[0].main_route_table_id","after_unknown":false},"vpc_secondary_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"vpc_security_group_ids":{"actions":["create"],"before":null,"after":[["aws_security_group.server.id"]],"after_unknown":false},"zREADME":{"actions":["create"],"before":null,"after":"# ------------------------------------------------------------------------------\n# ConsoleMe Demo Guide\n# ------------------------------------------------------------------------------\n\nIf you're following the Terraform demo environment and your Terraform apply was\nsuccessful, you can wait for a few minutes and then visit the ConsoleMe dashboard\nat the following URL:\n\n$ https://aws_lb.public-to-private-lb.dns_name:443\n\nIf you want to access the server over SSH, consider using Systems Manager or a VPN in.\n\n","after_unknown":false}},"prior_state":{"format_version":"0.1","terraform_version":"0.12.29","values":{"root_module":{"resources":[{"address":"data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_name":"aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0d5ae01b1fcf7c45c","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-019159f1e06f32720","volume_size":"8","volume_type":"standard"},"no_device":"","virtual_name":""}],"creation_date":"2020-12-21T22:36:01.000Z","description":"Amazon Linux 2 AMI 2.0.20201218.1 x86_64 HVM ebs","executable_users":null,"filter":[{"name":"name","values":["amzn2-ami-hvm-2.0.2020*-x86_64-ebs"]}],"hypervisor":"xen","id":"ami-0d5ae01b1fcf7c45c","image_id":"ami-0d5ae01b1fcf7c45c","image_location":"amazon/amzn2-ami-hvm-2.0.20201218.1-x86_64-ebs","image_owner_alias":"amazon","image_type":"machine","kernel_id":null,"most_recent":true,"name":"amzn2-ami-hvm-2.0.20201218.1-x86_64-ebs","name_regex":null,"owner_id":"137112412989","owners":["amazon"],"platform":null,"product_codes":[],"public":true,"ramdisk_id":null,"root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-019159f1e06f32720","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"virtualization_type":"hvm"}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"409917749248","arn":"arn:aws:sts::409917749248:assumed-role/AWSReservedSSO_admin_in_develop_b9929fcb3b2e1ca7/ido.r@indeni.com","id":"409917749248","user_id":"AROAV64IAPAAHXF7EYUGV:ido.r@indeni.com"}},{"address":"data.aws_iam_policy_document.ConsoleMeInstanceProfile","mode":"data","type":"aws_iam_policy_document","name":"ConsoleMeInstanceProfile","provider_name":"aws","schema_version":0,"values":{"id":"1935890424","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CentralAccountPermissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sts:assumerole\",\n        \"sqs:*\",\n        \"sns:*\",\n        \"s3:GetObject\",\n        \"iam:list*\",\n        \"dynamodb:*\",\n        \"config:*\",\n        \"cloudwatch:*\",\n        \"cloudtrail:*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"SendEmail\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ses:sendrawemail\",\n        \"ses:sendemail\"\n      ],\n      \"Resource\": \"arn:aws:ses:*:409917749248:identity/your_identity.example.com\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ses:FromAddress\": \"email_address_here@example.com\"\n        }\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["cloudtrail:*","cloudwatch:*","config:*","dynamodb:*","iam:list*","s3:GetObject","sns:*","sqs:*","sts:assumerole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":"CentralAccountPermissions"},{"actions":["ses:sendemail","ses:sendrawemail"],"condition":[{"test":"StringLike","values":["email_address_here@example.com"],"variable":"ses:FromAddress"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:ses:*:409917749248:identity/your_identity.example.com"],"sid":"SendEmail"}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.ConsoleMe_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"ConsoleMe_trust_policy","provider_name":"aws","schema_version":0,"values":{"id":"3546792178","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AssumeRoleEC2\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":"AssumeRoleEC2"}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.consoleme_target","mode":"data","type":"aws_iam_policy_document","name":"consoleme_target","provider_name":"aws","schema_version":0,"values":{"id":"4208297264","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAccessThis\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sqs:UntagQueue\",\n        \"sqs:TagQueue\",\n        \"sqs:SetQueueAttributes\",\n        \"sqs:ListQueues\",\n        \"sqs:ListQueueTags\",\n        \"sqs:GetQueueUrl\",\n        \"sqs:GetQueueAttributes\",\n        \"sns:UnTagResource\",\n        \"sns:TagResource\",\n        \"sns:SetTopicAttributes\",\n        \"sns:ListTopics\",\n        \"sns:ListTagsForResource\",\n        \"sns:GetTopicAttributes\",\n        \"servicequotas:*\",\n        \"s3:PutBucketTagging\",\n        \"s3:PutBucketPolicy\",\n        \"s3:ListBucket\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:GetObject\",\n        \"s3:GetBucketTagging\",\n        \"s3:GetBucketPolicy\",\n        \"iam:*\",\n        \"ec2:describevpcendpoints\",\n        \"ec2:DescribeVpcs\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeInstances\",\n        \"config:Select*\",\n        \"config:List*\",\n        \"config:BatchGet*\",\n        \"cloudwatch:List*\",\n        \"cloudwatch:Get*\",\n        \"autoscaling:Describe*\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["autoscaling:Describe*","cloudwatch:Get*","cloudwatch:List*","config:BatchGet*","config:List*","config:Select*","ec2:DescribeInstances","ec2:DescribeSubnets","ec2:DescribeVpcs","ec2:describevpcendpoints","iam:*","s3:GetBucketPolicy","s3:GetBucketTagging","s3:GetObject","s3:ListAllMyBuckets","s3:ListBucket","s3:PutBucketPolicy","s3:PutBucketTagging","servicequotas:*","sns:GetTopicAttributes","sns:ListTagsForResource","sns:ListTopics","sns:SetTopicAttributes","sns:TagResource","sns:UnTagResource","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ListQueueTags","sqs:ListQueues","sqs:SetQueueAttributes","sqs:TagQueue","sqs:UntagQueue"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":"ConsoleMeWillAccessThis"}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.consoleme_user_deny_all","mode":"data","type":"aws_iam_policy_document","name":"consoleme_user_deny_all","provider_name":"aws","schema_version":0,"values":{"id":"1539188472","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"ConsoleMeWillAssumeThis\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"*\",\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["*"],"condition":[],"effect":"Deny","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":"ConsoleMeWillAssumeThis"}],"version":"2012-10-17"}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}}],"child_modules":[{"resources":[{"address":"data.aws_vpc_endpoint_service.dynamodb","mode":"data","type":"aws_vpc_endpoint_service","name":"dynamodb","index":0,"provider_name":"aws","schema_version":0,"values":{"acceptance_required":false,"arn":"arn:aws:ec2:us-east-1:409917749248:vpc-endpoint-service/vpce-svc-099eb39957ebe7ecc","availability_zones":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"base_endpoint_dns_names":["dynamodb.us-east-1.amazonaws.com"],"filter":null,"id":"2816157640","manages_vpc_endpoints":false,"owner":"amazon","private_dns_name":"","service":"dynamodb","service_id":"vpce-svc-099eb39957ebe7ecc","service_name":"com.amazonaws.us-east-1.dynamodb","service_type":"Gateway","tags":{},"vpc_endpoint_policy_supported":true}},{"address":"data.aws_vpc_endpoint_service.s3","mode":"data","type":"aws_vpc_endpoint_service","name":"s3","index":0,"provider_name":"aws","schema_version":0,"values":{"acceptance_required":false,"arn":"arn:aws:ec2:us-east-1:409917749248:vpc-endpoint-service/vpce-svc-0aa7c06513d4872d5","availability_zones":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"base_endpoint_dns_names":["s3.us-east-1.amazonaws.com"],"filter":null,"id":"195798706","manages_vpc_endpoints":false,"owner":"amazon","private_dns_name":"","service":"s3","service_id":"vpce-svc-0aa7c06513d4872d5","service_name":"com.amazonaws.us-east-1.s3","service_type":"Gateway","tags":{},"vpc_endpoint_policy_supported":true}}],"address":"module.network"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","version_constraint":"\u003e= 3","expressions":{"region":{"references":["var.region"]}}},"template":{"name":"template","version_constraint":"~\u003e 2.1"}},"root_module":{"outputs":{"public_fqdn":{"expression":{"references":["aws_lb.public-to-private-lb"]},"description":"The public address of the load balancer running the application."},"zREADME":{"expression":{"references":["aws_lb.public-to-private-lb","var.lb_port"]}}},"resources":[{"address":"aws_acm_certificate.lb-self-signed","mode":"managed","type":"aws_acm_certificate","name":"lb-self-signed","provider_config_key":"aws","expressions":{"certificate_body":{"references":["tls_self_signed_cert.lb-self-signed"]},"private_key":{"references":["tls_private_key.lb-self-signed"]}},"schema_version":0,"count_expression":{"references":["var.lb-certificate-arn"]},"raw_data":{"FileName":"acm.tf","StartLine":23,"EndLine":27}},{"address":"aws_dynamodb_table.consoleme_audit_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_audit_global","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"uuid"},"type":{"constant_value":"S"}},{"name":{"constant_value":"group"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PROVISIONED"},"hash_key":{"constant_value":"uuid"},"name":{"constant_value":"consoleme_audit_global"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"range_key":{"constant_value":"group"},"read_capacity":{"constant_value":5},"stream_enabled":{"constant_value":true},"stream_view_type":{"constant_value":"NEW_AND_OLD_IMAGES"},"ttl":[{"attribute_name":{"constant_value":""},"enabled":{"constant_value":false}}],"write_capacity":{"constant_value":5}},"schema_version":1,"raw_data":{"FileName":"dynamodb.tf","StartLine":1,"EndLine":29}},{"address":"aws_dynamodb_table.consoleme_config_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_config_global","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"id"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PROVISIONED"},"hash_key":{"constant_value":"id"},"name":{"constant_value":"consoleme_config_global"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"read_capacity":{"constant_value":5},"stream_enabled":{"constant_value":true},"stream_view_type":{"constant_value":"NEW_AND_OLD_IMAGES"},"ttl":[{"attribute_name":{"constant_value":""},"enabled":{"constant_value":false}}],"write_capacity":{"constant_value":5}},"schema_version":1,"raw_data":{"FileName":"dynamodb.tf","StartLine":31,"EndLine":54}},{"address":"aws_dynamodb_table.consoleme_iamroles_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_iamroles_global","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"arn"},"type":{"constant_value":"S"}},{"name":{"constant_value":"accountId"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PROVISIONED"},"hash_key":{"constant_value":"arn"},"name":{"constant_value":"consoleme_iamroles_global"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"range_key":{"constant_value":"accountId"},"read_capacity":{"constant_value":5},"stream_enabled":{"constant_value":true},"stream_view_type":{"constant_value":"NEW_AND_OLD_IMAGES"},"ttl":[{"attribute_name":{"constant_value":"ttl"},"enabled":{"constant_value":true}}],"write_capacity":{"constant_value":5}},"schema_version":1,"raw_data":{"FileName":"dynamodb.tf","StartLine":57,"EndLine":85}},{"address":"aws_dynamodb_table.consoleme_policy_requests","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_policy_requests","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"request_id"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PROVISIONED"},"hash_key":{"constant_value":"request_id"},"name":{"constant_value":"consoleme_policy_requests"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"read_capacity":{"constant_value":5},"stream_enabled":{"constant_value":true},"stream_view_type":{"constant_value":"NEW_AND_OLD_IMAGES"},"ttl":[{"attribute_name":{"constant_value":""},"enabled":{"constant_value":false}}],"write_capacity":{"constant_value":5}},"schema_version":1,"raw_data":{"FileName":"dynamodb.tf","StartLine":87,"EndLine":109}},{"address":"aws_dynamodb_table.consoleme_requests_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_requests_global","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"request_id"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PROVISIONED"},"hash_key":{"constant_value":"request_id"},"name":{"constant_value":"consoleme_requests_global"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"read_capacity":{"constant_value":5},"stream_enabled":{"constant_value":true},"stream_view_type":{"constant_value":"NEW_AND_OLD_IMAGES"},"ttl":[{"attribute_name":{"constant_value":""},"enabled":{"constant_value":false}}],"write_capacity":{"constant_value":5}},"schema_version":1,"raw_data":{"FileName":"dynamodb.tf","StartLine":112,"EndLine":134}},{"address":"aws_dynamodb_table.consoleme_resource_cache","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_resource_cache","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"resourceId"},"type":{"constant_value":"S"}},{"name":{"constant_value":"resourceType"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PROVISIONED"},"hash_key":{"constant_value":"resourceId"},"name":{"constant_value":"consoleme_resource_cache"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"range_key":{"constant_value":"resourceType"},"read_capacity":{"constant_value":5},"stream_enabled":{"constant_value":true},"stream_view_type":{"constant_value":"NEW_AND_OLD_IMAGES"},"ttl":[{"attribute_name":{"constant_value":"ttl"},"enabled":{"constant_value":true}}],"write_capacity":{"constant_value":5}},"schema_version":1,"raw_data":{"FileName":"dynamodb.tf","StartLine":136,"EndLine":164}},{"address":"aws_dynamodb_table.consoleme_users_global","mode":"managed","type":"aws_dynamodb_table","name":"consoleme_users_global","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"username"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PROVISIONED"},"hash_key":{"constant_value":"username"},"name":{"constant_value":"consoleme_users_global"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"read_capacity":{"constant_value":5},"stream_enabled":{"constant_value":true},"stream_view_type":{"constant_value":"NEW_AND_OLD_IMAGES"},"ttl":[{"attribute_name":{"constant_value":""},"enabled":{"constant_value":false}}],"write_capacity":{"constant_value":5}},"schema_version":1,"raw_data":{"FileName":"dynamodb.tf","StartLine":167,"EndLine":189}},{"address":"aws_iam_instance_profile.ConsoleMeInstanceProfile","mode":"managed","type":"aws_iam_instance_profile","name":"ConsoleMeInstanceProfile","provider_config_key":"aws","expressions":{"name":{"references":["var.consoleme_instance_profile_name"]},"role":{"references":["aws_iam_role.ConsoleMeInstanceProfile"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":91,"EndLine":94}},{"address":"aws_iam_role.ConsoleMeInstanceProfile","mode":"managed","type":"aws_iam_role","name":"ConsoleMeInstanceProfile","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ConsoleMe_trust_policy"]},"name":{"references":["var.consoleme_instance_profile_name"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":86,"EndLine":89}},{"address":"aws_iam_role.consoleme_example_app_role_1","mode":"managed","type":"aws_iam_role","name":"consoleme_example_app_role_1","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.consoleme_target_trust_policy"]},"name":{"constant_value":"ConsoleMeAppA"},"tags":{"constant_value":{"consoleme-authorized-cli-only":"groupa@example.com"}}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":67,"EndLine":73}},{"address":"aws_iam_role.consoleme_example_app_role_2","mode":"managed","type":"aws_iam_role","name":"consoleme_example_app_role_2","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.consoleme_target_trust_policy"]},"name":{"constant_value":"ConsoleMeAppB"},"tags":{"constant_value":{"consoleme-authorized-cli-only":"groupa@example.com:groupb@example.com"}}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":75,"EndLine":81}},{"address":"aws_iam_role.consoleme_example_user_role_1","mode":"managed","type":"aws_iam_role","name":"consoleme_example_user_role_1","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.consoleme_target_trust_policy"]},"name":{"constant_value":"ConsoleMeUserA"},"tags":{"constant_value":{"consoleme-authorized":"consoleme_admins@example.com"}}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":50,"EndLine":56}},{"address":"aws_iam_role.consoleme_example_user_role_2","mode":"managed","type":"aws_iam_role","name":"consoleme_example_user_role_2","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.consoleme_target_trust_policy"]},"name":{"constant_value":"ConsoleMeUserB"},"tags":{"constant_value":{"consoleme-authorized":"configeditors@example.com:consoleme_admins@example.com"}}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":58,"EndLine":64}},{"address":"aws_iam_role.consoleme_target","mode":"managed","type":"aws_iam_role","name":"consoleme_target","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.consoleme_target_trust_policy"]},"name":{"constant_value":"ConsoleMeTarget"}},"schema_version":0,"raw_data":{"FileName":"iam_spoke_roles.tf","StartLine":66,"EndLine":69}},{"address":"aws_iam_role_policy.consoleme_app_role_policy1","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_app_role_policy1","provider_config_key":"aws","expressions":{"name":{"constant_value":"ConsoleMeTargetPolicy"},"policy":{"references":["data.aws_iam_policy_document.consoleme_user_deny_all"]},"role":{"references":["aws_iam_role.consoleme_example_app_role_1"]}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":24,"EndLine":28}},{"address":"aws_iam_role_policy.consoleme_app_role_policy2","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_app_role_policy2","provider_config_key":"aws","expressions":{"name":{"constant_value":"ConsoleMeTargetPolicy"},"policy":{"references":["data.aws_iam_policy_document.consoleme_user_deny_all"]},"role":{"references":["aws_iam_role.consoleme_example_app_role_2"]}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":30,"EndLine":34}},{"address":"aws_iam_role_policy.consoleme_target","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_target","provider_config_key":"aws","expressions":{"name":{"constant_value":"ConsoleMeInstanceProfilePolicy"},"policy":{"references":["data.aws_iam_policy_document.ConsoleMeInstanceProfile"]},"role":{"references":["aws_iam_role.ConsoleMeInstanceProfile"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":43,"EndLine":47}},{"address":"aws_iam_role_policy.consoleme_target_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_target_role_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"ConsoleMeTargetPolicy"},"policy":{"references":["data.aws_iam_policy_document.consoleme_target"]},"role":{"references":["aws_iam_role.consoleme_target"]}},"schema_version":0,"raw_data":{"FileName":"iam_spoke_roles.tf","StartLine":46,"EndLine":50}},{"address":"aws_iam_role_policy.consoleme_user_role_policy1","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_user_role_policy1","provider_config_key":"aws","expressions":{"name":{"constant_value":"ConsoleMeTargetPolicy"},"policy":{"references":["data.aws_iam_policy_document.consoleme_user_deny_all"]},"role":{"references":["aws_iam_role.consoleme_example_user_role_1"]}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":12,"EndLine":16}},{"address":"aws_iam_role_policy.consoleme_user_role_policy2","mode":"managed","type":"aws_iam_role_policy","name":"consoleme_user_role_policy2","provider_config_key":"aws","expressions":{"name":{"constant_value":"ConsoleMeTargetPolicy"},"policy":{"references":["data.aws_iam_policy_document.consoleme_user_deny_all"]},"role":{"references":["aws_iam_role.consoleme_example_user_role_2"]}},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":18,"EndLine":22}},{"address":"aws_iam_role_policy_attachment.ssm","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"role":{"references":["aws_iam_role.ConsoleMeInstanceProfile"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":50,"EndLine":53}},{"address":"aws_lb.public-to-private-lb","mode":"managed","type":"aws_lb","name":"public-to-private-lb","provider_config_key":"aws","expressions":{"internal":{"references":["var.allow_internet_access"]},"load_balancer_type":{"constant_value":"application"},"name":{"constant_value":"consoleme-lb"},"security_groups":{"references":["aws_security_group.lb-sg"]},"subnets":{"references":["module.network.public_subnets"]}},"schema_version":0,"raw_data":{"FileName":"lb.tf","StartLine":9,"EndLine":15}},{"address":"aws_lb_listener.public-8081","mode":"managed","type":"aws_lb_listener","name":"public-8081","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["var.lb-certificate-arn","aws_acm_certificate.lb-self-signed[0]","var.lb-certificate-arn"]},"default_action":[{"authenticate_oidc":[{"authorization_endpoint":{"references":["var.lb-authentication-authorization-endpoint"]},"client_id":{"references":["var.lb-authentication-client-id"]},"client_secret":{"references":["var.lb-authentication-client-secret"]},"issuer":{"references":["var.lb-authentication-issuer"]},"scope":{"references":["var.lb-authentication-scope"]},"token_endpoint":{"references":["var.lb-authentication-token-endpoint"]},"user_info_endpoint":{"references":["var.lb-authentication-user-info-endpoint"]}}],"type":{"constant_value":"authenticate-oidc"}},{"target_group_arn":{"references":["aws_lb_target_group.consoleme-servers"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.public-to-private-lb"]},"port":{"references":["var.lb_port"]},"protocol":{"constant_value":"HTTPS"}},"schema_version":0,"raw_data":{"FileName":"lb.tf","StartLine":65,"EndLine":90}},{"address":"aws_lb_listener_rule.unauthenticated-routes-1","mode":"managed","type":"aws_lb_listener_rule","name":"unauthenticated-routes-1","provider_config_key":"aws","expressions":{"action":[{"target_group_arn":{"references":["aws_lb_target_group.consoleme-servers"]},"type":{"constant_value":"forward"}}],"condition":[{"path_pattern":[{"values":{"constant_value":["/api/v1/get_credentials?","/api/v1/get_roles?","/noauth/v1/challenge_generator/*","/noauth/v1/challenge_poller/*","/api/v2/mtls/roles/*"]}}]}],"listener_arn":{"references":["aws_lb_listener.public-8081"]},"priority":{"constant_value":1}},"schema_version":0,"raw_data":{"FileName":"lb.tf","StartLine":32,"EndLine":47}},{"address":"aws_lb_listener_rule.unauthenticated-routes-2","mode":"managed","type":"aws_lb_listener_rule","name":"unauthenticated-routes-2","provider_config_key":"aws","expressions":{"action":[{"target_group_arn":{"references":["aws_lb_target_group.consoleme-servers"]},"type":{"constant_value":"forward"}}],"condition":[{"path_pattern":[{"values":{"constant_value":["/api/v1/myheaders/?"]}}]}],"listener_arn":{"references":["aws_lb_listener.public-8081"]},"priority":{"constant_value":2}},"schema_version":0,"raw_data":{"FileName":"lb.tf","StartLine":49,"EndLine":63}},{"address":"aws_lb_target_group.consoleme-servers","mode":"managed","type":"aws_lb_target_group","name":"consoleme-servers","provider_config_key":"aws","expressions":{"name":{"constant_value":"consoleme-servers"},"port":{"constant_value":8081},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["module.network.vpc_id"]}},"schema_version":0,"raw_data":{"FileName":"lb.tf","StartLine":17,"EndLine":22}},{"address":"aws_lb_target_group_attachment.test","mode":"managed","type":"aws_lb_target_group_attachment","name":"test","provider_config_key":"aws","expressions":{"port":{"constant_value":8081},"target_group_arn":{"references":["aws_lb_target_group.consoleme-servers"]},"target_id":{"references":["module.server.id"]}},"schema_version":0,"raw_data":{"FileName":"lb.tf","StartLine":24,"EndLine":28}},{"address":"aws_s3_bucket.consoleme_files_bucket","mode":"managed","type":"aws_s3_bucket","name":"consoleme_files_bucket","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["var.bucket_name_prefix","random_string.omnipotence"]},"force_destroy":{"constant_value":true},"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]}],"tags":{"references":["var.bucket_name_prefix","var.default_tags"]}},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":8,"EndLine":22}},{"address":"aws_s3_bucket_object.consoleme_config","mode":"managed","type":"aws_s3_bucket_object","name":"consoleme_config","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.consoleme_files_bucket"]},"content":{"references":["data.template_file.consoleme_config"]},"etag":{"references":["data.template_file.consoleme_config"]},"key":{"constant_value":"config.yaml"}},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":35,"EndLine":42}},{"address":"aws_s3_bucket_object.consoleme_zip","mode":"managed","type":"aws_s3_bucket_object","name":"consoleme_zip","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.consoleme_files_bucket"]},"etag":{"references":["path.module"]},"key":{"constant_value":"consoleme.tar.gz"},"source":{"references":["path.module"]}},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":26,"EndLine":33}},{"address":"aws_security_group.lb-sg","mode":"managed","type":"aws_security_group","name":"lb-sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allows access to the load balancer, which forwards to the ConsoleMe server."},"name":{"constant_value":"allow_access_to_consoleme"},"tags":{"constant_value":{"Name":"allow_access_to_consoleme"}},"vpc_id":{"references":["module.network.vpc_id"]}},"schema_version":1,"raw_data":{"FileName":"security_group.tf","StartLine":37,"EndLine":60}},{"address":"aws_security_group.server","mode":"managed","type":"aws_security_group","name":"server","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow ingress from authorized IPs to self, and egress to everywhere."},"name":{"references":["module.security_group_label.id"]},"tags":{"references":["module.security_group_label.tags"]},"vpc_id":{"references":["module.network.vpc_id"]}},"schema_version":1,"raw_data":{"FileName":"security_group.tf","StartLine":1,"EndLine":6}},{"address":"aws_security_group_rule.external_egress_allow_all","mode":"managed","type":"aws_security_group_rule","name":"external_egress_allow_all","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"from_port":{"constant_value":0},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.server"]},"to_port":{"constant_value":65535},"type":{"constant_value":"egress"}},"schema_version":2,"raw_data":{"FileName":"security_group.tf","StartLine":27,"EndLine":34}},{"address":"aws_security_group_rule.external_ingress_8081","mode":"managed","type":"aws_security_group_rule","name":"external_ingress_8081","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["var.allowed_inbound_cidr_blocks"]},"from_port":{"constant_value":8081},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.server"]},"to_port":{"constant_value":8081},"type":{"constant_value":"ingress"}},"schema_version":2,"raw_data":{"FileName":"security_group.tf","StartLine":18,"EndLine":25}},{"address":"aws_security_group_rule.internal_ingress_all_self","mode":"managed","type":"aws_security_group_rule","name":"internal_ingress_all_self","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["var.vpc_cidr"]},"from_port":{"constant_value":0},"protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.server"]},"to_port":{"constant_value":0},"type":{"constant_value":"ingress"}},"schema_version":2,"raw_data":{"FileName":"security_group.tf","StartLine":8,"EndLine":15}},{"address":"random_string.omnipotence","mode":"managed","type":"random_string","name":"omnipotence","provider_config_key":"random","expressions":{"length":{"constant_value":4},"number":{"constant_value":false},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":1,"raw_data":{"FileName":"s3.tf","StartLine":1,"EndLine":6}},{"address":"tls_private_key.lb-self-signed","mode":"managed","type":"tls_private_key","name":"lb-self-signed","provider_config_key":"tls","expressions":{"algorithm":{"constant_value":"RSA"},"rsa_bits":{"constant_value":"2048"}},"schema_version":0,"raw_data":{"FileName":"acm.tf","StartLine":1,"EndLine":4}},{"address":"tls_self_signed_cert.lb-self-signed","mode":"managed","type":"tls_self_signed_cert","name":"lb-self-signed","provider_config_key":"tls","expressions":{"allowed_uses":{"constant_value":["key_encipherment","digital_signature","server_auth"]},"key_algorithm":{"constant_value":"RSA"},"private_key_pem":{"references":["tls_private_key.lb-self-signed"]},"subject":[{"common_name":{"references":["var.lb-self-signed-cert-cn"]},"organization":{"constant_value":"ACME Examples, Inc"}}],"validity_period_hours":{"constant_value":8760}},"schema_version":0,"raw_data":{"FileName":"acm.tf","StartLine":6,"EndLine":21}},{"address":"data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"references":["var.ec2_ami_name_filter"]}}],"most_recent":{"constant_value":true},"owners":{"references":["var.ec2_ami_owner_filter"]}},"schema_version":0,"raw_data":{"FileName":"data.tf","StartLine":4,"EndLine":15}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0,"raw_data":{"FileName":"data.tf","StartLine":1,"EndLine":1}},{"address":"data.aws_iam_policy_document.ConsoleMeInstanceProfile","mode":"data","type":"aws_iam_policy_document","name":"ConsoleMeInstanceProfile","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["cloudtrail:*","cloudwatch:*","config:*","dynamodb:*","iam:list*","sns:*","sqs:*","sts:assumerole","s3:GetObject"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"CentralAccountPermissions"}},{"actions":{"constant_value":["ses:sendemail","ses:sendrawemail"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"references":["var.email_addresses"]},"variable":{"constant_value":"ses:FromAddress"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["data.aws_caller_identity.current","var.your_ses_identity"]},"sid":{"constant_value":"SendEmail"}}]},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":8,"EndLine":41}},{"address":"data.aws_iam_policy_document.ConsoleMe_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"ConsoleMe_trust_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"AssumeRoleEC2"}}]},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":60,"EndLine":80}},{"address":"data.aws_iam_policy_document.consoleme_target","mode":"data","type":"aws_iam_policy_document","name":"consoleme_target","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["autoscaling:Describe*","cloudwatch:Get*","cloudwatch:List*","config:BatchGet*","config:List*","config:Select*","ec2:DescribeInstances","ec2:DescribeSubnets","ec2:DescribeVpcs","ec2:describevpcendpoints","iam:*","s3:GetBucketPolicy","s3:GetBucketTagging","s3:GetObject","s3:ListAllMyBuckets","s3:ListAllMyBuckets","s3:ListBucket","s3:PutBucketPolicy","s3:PutBucketTagging","servicequotas:*","sns:GetTopicAttributes","sns:ListTagsForResource","sns:ListTopics","sns:SetTopicAttributes","sns:TagResource","sns:UnTagResource","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ListQueueTags","sqs:ListQueues","sqs:SetQueueAttributes","sqs:TagQueue","sqs:UntagQueue"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"ConsoleMeWillAccessThis"}}]},"schema_version":0,"raw_data":{"FileName":"iam_spoke_roles.tf","StartLine":3,"EndLine":44}},{"address":"data.aws_iam_policy_document.consoleme_target_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"consoleme_target_trust_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["aws_iam_role.ConsoleMeInstanceProfile"]},"type":{"constant_value":"AWS"}}],"sid":{"constant_value":"ConsoleMeAssumesTarget"}}]},"schema_version":0,"raw_data":{"FileName":"iam_spoke_roles.tf","StartLine":52,"EndLine":64}},{"address":"data.aws_iam_policy_document.consoleme_user_deny_all","mode":"data","type":"aws_iam_policy_document","name":"consoleme_user_deny_all","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["*"]},"effect":{"constant_value":"Deny"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"ConsoleMeWillAssumeThis"}}]},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":1,"EndLine":10}},{"address":"data.aws_iam_policy_document.consoleme_user_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"consoleme_user_trust_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["aws_iam_role.ConsoleMeInstanceProfile"]},"type":{"constant_value":"AWS"}}],"sid":{"constant_value":"ConsoleMeCanAssumeAllRoles"}}]},"schema_version":0,"raw_data":{"FileName":"iam_example_roles.tf","StartLine":36,"EndLine":48}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0,"raw_data":{"FileName":"data.tf","StartLine":2,"EndLine":2}},{"address":"data.template_file.consoleme_config","mode":"data","type":"template_file","name":"consoleme_config","provider_config_key":"template","expressions":{"template":{"references":["path.module"]},"vars":{"references":["aws_iam_role.consoleme_target","aws_iam_role.consoleme_example_app_role_1","aws_iam_role.consoleme_example_app_role_2","aws_iam_role.consoleme_example_user_role_1","aws_iam_role.consoleme_example_user_role_2","data.aws_caller_identity.current","var.sync_accounts_from_organizations","var.sync_accounts_from_organizations_master_account_id","var.sync_accounts_from_organizations_master_account_id","data.aws_caller_identity.current","var.sync_accounts_from_organizations_role_to_assume","var.application_admin","data.aws_region.current","var.lb-authentication-jwt-email-key","aws_lb.public-to-private-lb","var.lb_port"]}},"schema_version":0,"raw_data":{"FileName":"data.tf","StartLine":17,"EndLine":34}},{"address":"data.template_file.consoleme_userdata","mode":"data","type":"template_file","name":"consoleme_userdata","provider_config_key":"template","expressions":{"template":{"references":["path.module"]},"vars":{"references":["aws_s3_bucket.consoleme_files_bucket","data.aws_caller_identity.current","data.aws_region.current","aws_s3_bucket.consoleme_files_bucket","aws_s3_bucket_object.consoleme_config","var.custom_user_data_script"]}},"schema_version":0,"raw_data":{"FileName":"data.tf","StartLine":36,"EndLine":45}}],"module_calls":{"compute_label":{"source":"git::https://github.com/cloudposse/terraform-terraform-label.git?ref=0.5.0","expressions":{"convert_case":{"references":["var.convert_case"]},"delimiter":{"references":["var.delimiter"]},"enabled":{"constant_value":"true"},"name":{"references":["var.name"]},"namespace":{"references":["var.namespace"]},"stage":{"references":["var.stage"]},"tags":{"references":["var.default_tags"]}},"module":{"outputs":{"attributes":{"expression":{"references":["local.attributes"]},"description":"Normalized attributes"},"delimiter":{"expression":{"references":["local.delimiter"]},"description":"Delimiter between `namespace`, `stage`, `name` and `attributes`"},"id":{"expression":{"references":["local.id"]},"description":"Disambiguated ID"},"name":{"expression":{"references":["local.name"]},"description":"Normalized name"},"namespace":{"expression":{"references":["local.namespace"]},"description":"Normalized namespace"},"stage":{"expression":{"references":["local.stage"]},"description":"Normalized stage"},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"}},"variables":{"attributes":{"default":[],"description":"Additional attributes (e.g. `1`)"},"convert_case":{"default":true,"description":"Convert fields to lower case"},"delimiter":{"default":"-","description":"Delimiter to be used between `namespace`, `stage`, `name` and `attributes`"},"enabled":{"default":true,"description":"Set to false to prevent the module from creating any resources"},"name":{"default":"","description":"Solution name, e.g. `app` or `jenkins`"},"namespace":{"default":"","description":"Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'"},"stage":{"default":"","description":"Stage, e.g. 'prod', 'staging', 'dev'"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}},"raw_data":{"FileName":"labels.tf","StartLine":24,"EndLine":33}},"kms_ebs":{"source":"git::https://github.com/cloudposse/terraform-aws-kms-key.git?ref=0.7.0","expressions":{"alias":{"references":["var.kms_key_alias"]},"deletion_window_in_days":{"constant_value":10},"description":{"constant_value":"KMS key for ConsoleMe disk"},"enable_key_rotation":{"constant_value":true},"name":{"references":["var.name"]},"namespace":{"references":["var.namespace"]},"stage":{"references":["var.stage"]},"tags":{"references":["module.compute_label.tags"]}},"module":{"outputs":{"alias_arn":{"expression":{"references":["aws_kms_alias.default"]},"description":"Alias ARN"},"alias_name":{"expression":{"references":["aws_kms_alias.default"]},"description":"Alias name"},"key_arn":{"expression":{"references":["aws_kms_key.default"]},"description":"Key ARN"},"key_id":{"expression":{"references":["aws_kms_key.default"]},"description":"Key ID"}},"resources":[{"address":"aws_kms_alias.default","mode":"managed","type":"aws_kms_alias","name":"default","provider_config_key":"kms_ebs:aws","expressions":{"name":{"references":["var.alias","module.this.id"]},"target_key_id":{"references":["aws_kms_key.default"]}},"schema_version":0,"count_expression":{"references":["module.this.enabled"]},"raw_data":{"FileName":".terraform/modules/kms_ebs/main.tf","StartLine":10,"EndLine":14}},{"address":"aws_kms_key.default","mode":"managed","type":"aws_kms_key","name":"default","provider_config_key":"kms_ebs:aws","expressions":{"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enable_key_rotation":{"references":["var.enable_key_rotation"]},"policy":{"references":["var.policy"]},"tags":{"references":["module.this.tags"]}},"schema_version":0,"count_expression":{"references":["module.this.enabled"]},"raw_data":{"FileName":".terraform/modules/kms_ebs/main.tf","StartLine":1,"EndLine":8}}],"module_calls":{"this":{"source":"git::https://github.com/cloudposse/terraform-null-label.git?ref=tags/0.19.2","expressions":{"additional_tag_map":{"references":["var.additional_tag_map"]},"attributes":{"references":["var.attributes"]},"context":{"references":["var.context"]},"delimiter":{"references":["var.delimiter"]},"enabled":{"references":["var.enabled"]},"environment":{"references":["var.environment"]},"id_length_limit":{"references":["var.id_length_limit"]},"label_order":{"references":["var.label_order"]},"name":{"references":["var.name"]},"namespace":{"references":["var.namespace"]},"regex_replace_chars":{"references":["var.regex_replace_chars"]},"stage":{"references":["var.stage"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"additional_tag_map":{"expression":{"references":["local.additional_tag_map"]},"description":"The merged additional_tag_map"},"attributes":{"expression":{"references":["local.enabled","local.attributes"]},"description":"List of attributes"},"context":{"expression":{"references":["local.input"]},"description":"Merged but otherwise unmodified input to this module, to be used as context input to other modules.\nNote: this version will have null values as defaults, not the values actually used as defaults.\n"},"delimiter":{"expression":{"references":["local.enabled","local.delimiter"]},"description":"Delimiter between `namespace`, `environment`, `stage`, `name` and `attributes`"},"enabled":{"expression":{"references":["local.enabled"]},"description":"True if module is enabled, false otherwise"},"environment":{"expression":{"references":["local.enabled","local.environment"]},"description":"Normalized environment"},"id":{"expression":{"references":["local.enabled","local.id"]},"description":"Disambiguated ID restricted to `id_length_limit` characters in total"},"id_full":{"expression":{"references":["local.enabled","local.id_full"]},"description":"Disambiguated ID not restricted in length"},"id_length_limit":{"expression":{"references":["local.id_length_limit"]},"description":"The id_length_limit actually used to create the ID, with `0` meaning unlimited"},"label_order":{"expression":{"references":["local.label_order"]},"description":"The naming order actually used to create the ID"},"name":{"expression":{"references":["local.enabled","local.name"]},"description":"Normalized name"},"namespace":{"expression":{"references":["local.enabled","local.namespace"]},"description":"Normalized namespace"},"normalized_context":{"expression":{"references":["local.output_context"]},"description":"Normalized context of this module"},"regex_replace_chars":{"expression":{"references":["local.regex_replace_chars"]},"description":"The regex_replace_chars actually used to create the ID"},"stage":{"expression":{"references":["local.enabled","local.stage"]},"description":"Normalized stage"},"tags":{"expression":{"references":["local.enabled","local.tags"]},"description":"Normalized Tag map"},"tags_as_list_of_maps":{"expression":{"references":["local.tags_as_list_of_maps"]},"description":"Additional tags as a list of maps, which can be used in several AWS resources"}},"variables":{"additional_tag_map":{"default":{},"description":"Additional tags for appending to tags_as_list_of_maps. Not added to `tags`."},"attributes":{"default":[],"description":"Additional attributes (e.g. `1`)"},"context":{"default":{"additional_tag_map":{},"attributes":[],"delimiter":null,"enabled":true,"environment":null,"id_length_limit":null,"label_order":[],"name":null,"namespace":null,"regex_replace_chars":null,"stage":null,"tags":{}},"description":"Single object for setting entire context at once.\nSee description of individual variables for details.\nLeave string and numeric variables as `null` to use default value.\nIndividual variable settings (non-null) override settings in context object,\nexcept for attributes, tags, and additional_tag_map, which are merged.\n"},"delimiter":{"default":null,"description":"Delimiter to be used between `namespace`, `environment`, `stage`, `name` and `attributes`.\nDefaults to `-` (hyphen). Set to `\"\"` to use no delimiter at all.\n"},"enabled":{"default":null,"description":"Set to false to prevent the module from creating any resources"},"environment":{"default":null,"description":"Environment, e.g. 'uw2', 'us-west-2', OR 'prod', 'staging', 'dev', 'UAT'"},"id_length_limit":{"default":null,"description":"Limit `id` to this many characters.\nSet to `0` for unlimited length.\nSet to `null` for default, which is `0`.\nDoes not affect `id_full`.\n"},"label_order":{"default":null,"description":"The naming order of the id output and Name tag.\nDefaults to [\"namespace\", \"environment\", \"stage\", \"name\", \"attributes\"].\nYou can omit any of the 5 elements, but at least one must be present.\n"},"name":{"default":null,"description":"Solution name, e.g. 'app' or 'jenkins'"},"namespace":{"default":null,"description":"Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'"},"regex_replace_chars":{"default":null,"description":"Regex to replace chars with empty string in `namespace`, `environment`, `stage` and `name`.\nIf not set, `\"/[^a-zA-Z0-9-]/\"` is used to remove all characters other than hyphens, letters and digits.\n"},"stage":{"default":null,"description":"Stage, e.g. 'prod', 'staging', 'dev', OR 'source', 'build', 'test', 'deploy', 'release'"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}},"raw_data":{"FileName":".terraform/modules/kms_ebs/context.tf","StartLine":21,"EndLine":38}}},"variables":{"additional_tag_map":{"default":{},"description":"Additional tags for appending to tags_as_list_of_maps. Not added to `tags`."},"alias":{"default":"","description":"The display name of the alias. The name must start with the word `alias` followed by a forward slash"},"attributes":{"default":[],"description":"Additional attributes (e.g. `1`)"},"context":{"default":{"additional_tag_map":{},"attributes":[],"delimiter":null,"enabled":true,"environment":null,"id_length_limit":null,"label_order":[],"name":null,"namespace":null,"regex_replace_chars":null,"stage":null,"tags":{}},"description":"Single object for setting entire context at once.\nSee description of individual variables for details.\nLeave string and numeric variables as `null` to use default value.\nIndividual variable settings (non-null) override settings in context object,\nexcept for attributes, tags, and additional_tag_map, which are merged.\n"},"deletion_window_in_days":{"default":10,"description":"Duration in days after which the key is deleted after destruction of the resource"},"delimiter":{"default":null,"description":"Delimiter to be used between `namespace`, `environment`, `stage`, `name` and `attributes`.\nDefaults to `-` (hyphen). Set to `\"\"` to use no delimiter at all.\n"},"description":{"default":"Parameter Store KMS master key","description":"The description of the key as viewed in AWS console"},"enable_key_rotation":{"default":true,"description":"Specifies whether key rotation is enabled"},"enabled":{"default":null,"description":"Set to false to prevent the module from creating any resources"},"environment":{"default":null,"description":"Environment, e.g. 'uw2', 'us-west-2', OR 'prod', 'staging', 'dev', 'UAT'"},"id_length_limit":{"default":null,"description":"Limit `id` to this many characters.\nSet to `0` for unlimited length.\nSet to `null` for default, which is `0`.\nDoes not affect `id_full`.\n"},"label_order":{"default":null,"description":"The naming order of the id output and Name tag.\nDefaults to [\"namespace\", \"environment\", \"stage\", \"name\", \"attributes\"].\nYou can omit any of the 5 elements, but at least one must be present.\n"},"name":{"default":null,"description":"Solution name, e.g. 'app' or 'jenkins'"},"namespace":{"default":null,"description":"Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'"},"policy":{"default":"","description":"A valid KMS policy JSON document. Note that if the policy document is not specific enough (but still valid), Terraform may view the policy as constantly changing in a terraform plan. In this case, please make sure you use the verbose/specific version of the policy."},"regex_replace_chars":{"default":null,"description":"Regex to replace chars with empty string in `namespace`, `environment`, `stage` and `name`.\nIf not set, `\"/[^a-zA-Z0-9-]/\"` is used to remove all characters other than hyphens, letters and digits.\n"},"stage":{"default":null,"description":"Stage, e.g. 'prod', 'staging', 'dev', OR 'source', 'build', 'test', 'deploy', 'release'"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}},"raw_data":{"FileName":"main.tf","StartLine":33,"EndLine":43}},"network":{"source":"github.com/terraform-aws-modules/terraform-aws-vpc?ref=v2.7.0","expressions":{"azs":{"references":["var.subnet_azs"]},"cidr":{"references":["var.vpc_cidr"]},"create_database_subnet_group":{"constant_value":false},"create_vpc":{"constant_value":true},"enable_dhcp_options":{"constant_value":true},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"enable_dynamodb_endpoint":{"constant_value":true},"enable_nat_gateway":{"constant_value":true},"enable_s3_endpoint":{"constant_value":true},"enable_vpn_gateway":{"constant_value":true},"name":{"references":["module.network_label.id"]},"private_subnet_suffix":{"constant_value":"private-subnet"},"private_subnets":{"references":["var.private_subnet_cidrs"]},"propagate_private_route_tables_vgw":{"constant_value":true},"propagate_public_route_tables_vgw":{"constant_value":true},"public_subnet_suffix":{"constant_value":"public-subnet"},"public_subnets":{"references":["var.public_subnet_cidrs"]},"tags":{"references":["var.default_tags"]}},"module":{"outputs":{"azs":{"expression":{"references":["var.azs"]},"description":"A list of availability zones specified as argument to this module"},"database_network_acl_id":{"expression":{"references":["aws_network_acl.database"]},"description":"ID of the database network ACL"},"database_route_table_ids":{"expression":{"references":["aws_route_table.database","aws_route_table.database","aws_route_table.private"]},"description":"List of IDs of database route tables"},"database_subnet_arns":{"expression":{"references":["aws_subnet.database"]},"description":"List of ARNs of database subnets"},"database_subnet_group":{"expression":{"references":["aws_db_subnet_group.database"]},"description":"ID of database subnet group"},"database_subnets":{"expression":{"references":["aws_subnet.database"]},"description":"List of IDs of database subnets"},"database_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of cidr_blocks of database subnets"},"default_network_acl_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the default network ACL"},"default_route_table_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the default route table"},"default_security_group_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the security group created by default on VPC creation"},"default_vpc_cidr_block":{"expression":{"references":["aws_default_vpc.this"]},"description":"The CIDR block of the VPC"},"default_vpc_default_network_acl_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the default network ACL"},"default_vpc_default_route_table_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the default route table"},"default_vpc_default_security_group_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the security group created by default on VPC creation"},"default_vpc_enable_dns_hostnames":{"expression":{"references":["aws_default_vpc.this"]},"description":"Whether or not the VPC has DNS hostname support"},"default_vpc_enable_dns_support":{"expression":{"references":["aws_default_vpc.this"]},"description":"Whether or not the VPC has DNS support"},"default_vpc_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the VPC"},"default_vpc_instance_tenancy":{"expression":{"references":["aws_default_vpc.this"]},"description":"Tenancy of instances spin up within VPC"},"default_vpc_main_route_table_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the main route table associated with this VPC"},"elasticache_network_acl_id":{"expression":{"references":["aws_network_acl.elasticache"]},"description":"ID of the elasticache network ACL"},"elasticache_route_table_ids":{"expression":{"references":["aws_route_table.elasticache","aws_route_table.elasticache","aws_route_table.private"]},"description":"List of IDs of elasticache route tables"},"elasticache_subnet_arns":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of ARNs of elasticache subnets"},"elasticache_subnet_group":{"expression":{"references":["aws_elasticache_subnet_group.elasticache"]},"description":"ID of elasticache subnet group"},"elasticache_subnet_group_name":{"expression":{"references":["aws_elasticache_subnet_group.elasticache"]},"description":"Name of elasticache subnet group"},"elasticache_subnets":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IDs of elasticache subnets"},"elasticache_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of cidr_blocks of elasticache subnets"},"igw_id":{"expression":{"references":["aws_internet_gateway.this"]},"description":"The ID of the Internet Gateway"},"intra_network_acl_id":{"expression":{"references":["aws_network_acl.intra"]},"description":"ID of the intra network ACL"},"intra_route_table_ids":{"expression":{"references":["aws_route_table.intra"]},"description":"List of IDs of intra route tables"},"intra_subnet_arns":{"expression":{"references":["aws_subnet.intra"]},"description":"List of ARNs of intra subnets"},"intra_subnets":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IDs of intra subnets"},"intra_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of cidr_blocks of intra subnets"},"nat_ids":{"expression":{"references":["aws_eip.nat"]},"description":"List of allocation ID of Elastic IPs created for AWS NAT Gateway"},"nat_public_ips":{"expression":{"references":["aws_eip.nat"]},"description":"List of public Elastic IPs created for AWS NAT Gateway"},"natgw_ids":{"expression":{"references":["aws_nat_gateway.this"]},"description":"List of NAT Gateway IDs"},"private_network_acl_id":{"expression":{"references":["aws_network_acl.private"]},"description":"ID of the private network ACL"},"private_route_table_ids":{"expression":{"references":["aws_route_table.private"]},"description":"List of IDs of private route tables"},"private_subnet_arns":{"expression":{"references":["aws_subnet.private"]},"description":"List of ARNs of private subnets"},"private_subnets":{"expression":{"references":["aws_subnet.private"]},"description":"List of IDs of private subnets"},"private_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of cidr_blocks of private subnets"},"public_network_acl_id":{"expression":{"references":["aws_network_acl.public"]},"description":"ID of the public network ACL"},"public_route_table_ids":{"expression":{"references":["aws_route_table.public"]},"description":"List of IDs of public route tables"},"public_subnet_arns":{"expression":{"references":["aws_subnet.public"]},"description":"List of ARNs of public subnets"},"public_subnets":{"expression":{"references":["aws_subnet.public"]},"description":"List of IDs of public subnets"},"public_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of cidr_blocks of public subnets"},"redshift_network_acl_id":{"expression":{"references":["aws_network_acl.redshift"]},"description":"ID of the redshift network ACL"},"redshift_route_table_ids":{"expression":{"references":["aws_route_table.redshift","aws_route_table.redshift","aws_route_table.private"]},"description":"List of IDs of redshift route tables"},"redshift_subnet_arns":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of ARNs of redshift subnets"},"redshift_subnet_group":{"expression":{"references":["aws_redshift_subnet_group.redshift"]},"description":"ID of redshift subnet group"},"redshift_subnets":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IDs of redshift subnets"},"redshift_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of cidr_blocks of redshift subnets"},"vgw_id":{"expression":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this"]},"description":"The ID of the VPN Gateway"},"vpc_arn":{"expression":{"references":["aws_vpc.this"]},"description":"The ARN of the VPC"},"vpc_cidr_block":{"expression":{"references":["aws_vpc.this"]},"description":"The CIDR block of the VPC"},"vpc_enable_dns_hostnames":{"expression":{"references":["aws_vpc.this"]},"description":"Whether or not the VPC has DNS hostname support"},"vpc_enable_dns_support":{"expression":{"references":["aws_vpc.this"]},"description":"Whether or not the VPC has DNS support"},"vpc_endpoint_apigw_dns_entry":{"expression":{"references":["aws_vpc_endpoint.apigw"]},"description":"The DNS entries for the VPC Endpoint for APIGW."},"vpc_endpoint_apigw_id":{"expression":{"references":["aws_vpc_endpoint.apigw"]},"description":"The ID of VPC endpoint for APIGW"},"vpc_endpoint_apigw_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.apigw"]},"description":"One or more network interfaces for the VPC Endpoint for APIGW."},"vpc_endpoint_cloudtrail_dns_entry":{"expression":{"references":["aws_vpc_endpoint.cloudtrail"]},"description":"The DNS entries for the VPC Endpoint for CloudTrail."},"vpc_endpoint_cloudtrail_id":{"expression":{"references":["aws_vpc_endpoint.cloudtrail"]},"description":"The ID of VPC endpoint for CloudTrail"},"vpc_endpoint_cloudtrail_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.cloudtrail"]},"description":"One or more network interfaces for the VPC Endpoint for CloudTrail."},"vpc_endpoint_dynamodb_id":{"expression":{"references":["aws_vpc_endpoint.dynamodb"]},"description":"The ID of VPC endpoint for DynamoDB"},"vpc_endpoint_dynamodb_pl_id":{"expression":{"references":["aws_vpc_endpoint.dynamodb"]},"description":"The prefix list for the DynamoDB VPC endpoint."},"vpc_endpoint_ec2_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ec2"]},"description":"The DNS entries for the VPC Endpoint for EC2."},"vpc_endpoint_ec2_id":{"expression":{"references":["aws_vpc_endpoint.ec2"]},"description":"The ID of VPC endpoint for EC2"},"vpc_endpoint_ec2_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ec2"]},"description":"One or more network interfaces for the VPC Endpoint for EC2"},"vpc_endpoint_ec2messages_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ec2messages"]},"description":"The DNS entries for the VPC Endpoint for EC2MESSAGES."},"vpc_endpoint_ec2messages_id":{"expression":{"references":["aws_vpc_endpoint.ec2messages"]},"description":"The ID of VPC endpoint for EC2MESSAGES"},"vpc_endpoint_ec2messages_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ec2messages"]},"description":"One or more network interfaces for the VPC Endpoint for EC2MESSAGES"},"vpc_endpoint_ecr_api_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ecr_api"]},"description":"The DNS entries for the VPC Endpoint for ECR API."},"vpc_endpoint_ecr_api_id":{"expression":{"references":["aws_vpc_endpoint.ecr_api"]},"description":"The ID of VPC endpoint for ECR API"},"vpc_endpoint_ecr_api_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ecr_api"]},"description":"One or more network interfaces for the VPC Endpoint for ECR API."},"vpc_endpoint_ecr_dkr_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ecr_dkr"]},"description":"The DNS entries for the VPC Endpoint for ECR DKR."},"vpc_endpoint_ecr_dkr_id":{"expression":{"references":["aws_vpc_endpoint.ecr_dkr"]},"description":"The ID of VPC endpoint for ECR DKR"},"vpc_endpoint_ecr_dkr_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ecr_dkr"]},"description":"One or more network interfaces for the VPC Endpoint for ECR DKR."},"vpc_endpoint_ecs_agent_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ecs_agent"]},"description":"The DNS entries for the VPC Endpoint for ECS Agent."},"vpc_endpoint_ecs_agent_id":{"expression":{"references":["aws_vpc_endpoint.ecs_agent"]},"description":"The ID of VPC endpoint for ECS Agent"},"vpc_endpoint_ecs_agent_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ecs_agent"]},"description":"One or more network interfaces for the VPC Endpoint for ECS Agent."},"vpc_endpoint_ecs_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ecs"]},"description":"The DNS entries for the VPC Endpoint for ECS."},"vpc_endpoint_ecs_id":{"expression":{"references":["aws_vpc_endpoint.ecs"]},"description":"The ID of VPC endpoint for ECS"},"vpc_endpoint_ecs_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ecs"]},"description":"One or more network interfaces for the VPC Endpoint for ECS."},"vpc_endpoint_ecs_telemetry_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ecs_telemetry"]},"description":"The DNS entries for the VPC Endpoint for ECS Telemetry."},"vpc_endpoint_ecs_telemetry_id":{"expression":{"references":["aws_vpc_endpoint.ecs_telemetry"]},"description":"The ID of VPC endpoint for ECS Telemetry"},"vpc_endpoint_ecs_telemetry_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ecs_telemetry"]},"description":"One or more network interfaces for the VPC Endpoint for ECS Telemetry."},"vpc_endpoint_elasticloadbalancing_dns_entry":{"expression":{"references":["aws_vpc_endpoint.elasticloadbalancing"]},"description":"The DNS entries for the VPC Endpoint for Elastic Load Balancing."},"vpc_endpoint_elasticloadbalancing_id":{"expression":{"references":["aws_vpc_endpoint.elasticloadbalancing"]},"description":"The ID of VPC endpoint for Elastic Load Balancing"},"vpc_endpoint_elasticloadbalancing_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.elasticloadbalancing"]},"description":"One or more network interfaces for the VPC Endpoint for Elastic Load Balancing."},"vpc_endpoint_events_dns_entry":{"expression":{"references":["aws_vpc_endpoint.events"]},"description":"The DNS entries for the VPC Endpoint for CloudWatch Events."},"vpc_endpoint_events_id":{"expression":{"references":["aws_vpc_endpoint.events"]},"description":"The ID of VPC endpoint for CloudWatch Events"},"vpc_endpoint_events_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.events"]},"description":"One or more network interfaces for the VPC Endpoint for CloudWatch Events."},"vpc_endpoint_kms_dns_entry":{"expression":{"references":["aws_vpc_endpoint.kms"]},"description":"The DNS entries for the VPC Endpoint for KMS."},"vpc_endpoint_kms_id":{"expression":{"references":["aws_vpc_endpoint.kms"]},"description":"The ID of VPC endpoint for KMS"},"vpc_endpoint_kms_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.kms"]},"description":"One or more network interfaces for the VPC Endpoint for KMS."},"vpc_endpoint_logs_dns_entry":{"expression":{"references":["aws_vpc_endpoint.logs"]},"description":"The DNS entries for the VPC Endpoint for CloudWatch Logs."},"vpc_endpoint_logs_id":{"expression":{"references":["aws_vpc_endpoint.logs"]},"description":"The ID of VPC endpoint for CloudWatch Logs"},"vpc_endpoint_logs_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.logs"]},"description":"One or more network interfaces for the VPC Endpoint for CloudWatch Logs."},"vpc_endpoint_monitoring_dns_entry":{"expression":{"references":["aws_vpc_endpoint.monitoring"]},"description":"The DNS entries for the VPC Endpoint for CloudWatch Monitoring."},"vpc_endpoint_monitoring_id":{"expression":{"references":["aws_vpc_endpoint.monitoring"]},"description":"The ID of VPC endpoint for CloudWatch Monitoring"},"vpc_endpoint_monitoring_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.monitoring"]},"description":"One or more network interfaces for the VPC Endpoint for CloudWatch Monitoring."},"vpc_endpoint_s3_id":{"expression":{"references":["aws_vpc_endpoint.s3"]},"description":"The ID of VPC endpoint for S3"},"vpc_endpoint_s3_pl_id":{"expression":{"references":["aws_vpc_endpoint.s3"]},"description":"The prefix list for the S3 VPC endpoint."},"vpc_endpoint_sns_dns_entry":{"expression":{"references":["aws_vpc_endpoint.sns"]},"description":"The DNS entries for the VPC Endpoint for SNS."},"vpc_endpoint_sns_id":{"expression":{"references":["aws_vpc_endpoint.sns"]},"description":"The ID of VPC endpoint for SNS"},"vpc_endpoint_sns_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.sns"]},"description":"One or more network interfaces for the VPC Endpoint for SNS."},"vpc_endpoint_sqs_dns_entry":{"expression":{"references":["aws_vpc_endpoint.sqs"]},"description":"The DNS entries for the VPC Endpoint for SQS."},"vpc_endpoint_sqs_id":{"expression":{"references":["aws_vpc_endpoint.sqs"]},"description":"The ID of VPC endpoint for SQS"},"vpc_endpoint_sqs_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.sqs"]},"description":"One or more network interfaces for the VPC Endpoint for SQS."},"vpc_endpoint_ssm_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ssm"]},"description":"The DNS entries for the VPC Endpoint for SSM."},"vpc_endpoint_ssm_id":{"expression":{"references":["aws_vpc_endpoint.ssm"]},"description":"The ID of VPC endpoint for SSM"},"vpc_endpoint_ssm_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ssm"]},"description":"One or more network interfaces for the VPC Endpoint for SSM."},"vpc_endpoint_ssmmessages_dns_entry":{"expression":{"references":["aws_vpc_endpoint.ssmmessages"]},"description":"The DNS entries for the VPC Endpoint for SSMMESSAGES."},"vpc_endpoint_ssmmessages_id":{"expression":{"references":["aws_vpc_endpoint.ssmmessages"]},"description":"The ID of VPC endpoint for SSMMESSAGES"},"vpc_endpoint_ssmmessages_network_interface_ids":{"expression":{"references":["aws_vpc_endpoint.ssmmessages"]},"description":"One or more network interfaces for the VPC Endpoint for SSMMESSAGES."},"vpc_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the VPC"},"vpc_instance_tenancy":{"expression":{"references":["aws_vpc.this"]},"description":"Tenancy of instances spin up within VPC"},"vpc_main_route_table_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the main route table associated with this VPC"},"vpc_secondary_cidr_blocks":{"expression":{"references":["aws_vpc_ipv4_cidr_block_association.this"]},"description":"List of secondary CIDR blocks of the VPC"}},"resources":[{"address":"aws_db_subnet_group.database","mode":"managed","type":"aws_db_subnet_group","name":"database","provider_config_key":"network:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.name"]},"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.name","var.tags","var.database_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.create_database_subnet_group"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":317,"EndLine":331}},{"address":"aws_default_network_acl.this","mode":"managed","type":"aws_default_network_acl","name":"this","provider_config_key":"network:aws","expressions":{"default_network_acl_id":{"references":["aws_vpc.this"]},"tags":{"references":["var.default_network_acl_name","var.tags","var.default_network_acl_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.manage_default_network_acl"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":429,"EndLine":474}},{"address":"aws_default_vpc.this","mode":"managed","type":"aws_default_vpc","name":"this","provider_config_key":"network:aws","expressions":{"enable_classiclink":{"references":["var.default_vpc_enable_classiclink"]},"enable_dns_hostnames":{"references":["var.default_vpc_enable_dns_hostnames"]},"enable_dns_support":{"references":["var.default_vpc_enable_dns_support"]},"tags":{"references":["var.default_vpc_name","var.tags","var.default_vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.manage_default_vpc"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1413,"EndLine":1427}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_eip_tags"]},"vpc":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","var.reuse_nat_ips","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":770,"EndLine":786}},{"address":"aws_elasticache_subnet_group.elasticache","mode":"managed","type":"aws_elasticache_subnet_group","name":"elasticache","provider_config_key":"network:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.name"]},"subnet_ids":{"references":["aws_subnet.elasticache"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.create_elasticache_subnet_group"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":395,"EndLine":401}},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":84,"EndLine":96}},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_config_key":"network:aws","expressions":{"allocation_id":{"references":["local.nat_gateway_ips","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.public","var.single_nat_gateway","count.index"]},"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_gateway_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]},"depends_on":["aws_internet_gateway.this"],"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":788,"EndLine":813}},{"address":"aws_network_acl.database","mode":"managed","type":"aws_network_acl","name":"database","provider_config_key":"network:aws","expressions":{"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.database_subnet_suffix","var.name","var.tags","var.database_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":617,"EndLine":630}},{"address":"aws_network_acl.elasticache","mode":"managed","type":"aws_network_acl","name":"elasticache","provider_config_key":"network:aws","expressions":{"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.elasticache_subnet_suffix","var.name","var.tags","var.elasticache_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":709,"EndLine":722}},{"address":"aws_network_acl.intra","mode":"managed","type":"aws_network_acl","name":"intra","provider_config_key":"network:aws","expressions":{"subnet_ids":{"references":["aws_subnet.intra"]},"tags":{"references":["var.intra_subnet_suffix","var.name","var.tags","var.intra_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":571,"EndLine":584}},{"address":"aws_network_acl.private","mode":"managed","type":"aws_network_acl","name":"private","provider_config_key":"network:aws","expressions":{"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["var.private_subnet_suffix","var.name","var.tags","var.private_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":525,"EndLine":538}},{"address":"aws_network_acl.public","mode":"managed","type":"aws_network_acl","name":"public","provider_config_key":"network:aws","expressions":{"subnet_ids":{"references":["aws_subnet.public"]},"tags":{"references":["var.public_subnet_suffix","var.name","var.tags","var.public_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":479,"EndLine":492}},{"address":"aws_network_acl.redshift","mode":"managed","type":"aws_network_acl","name":"redshift","provider_config_key":"network:aws","expressions":{"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.redshift_subnet_suffix","var.name","var.tags","var.redshift_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":663,"EndLine":676}},{"address":"aws_network_acl_rule.database_inbound","mode":"managed","type":"aws_network_acl_rule","name":"database_inbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.database_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0]"]},"protocol":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_inbound_acl_rules","count.index"]},"to_port":{"references":["var.database_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":632,"EndLine":644}},{"address":"aws_network_acl_rule.database_outbound","mode":"managed","type":"aws_network_acl_rule","name":"database_outbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.database_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0]"]},"protocol":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_outbound_acl_rules","count.index"]},"to_port":{"references":["var.database_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":646,"EndLine":658}},{"address":"aws_network_acl_rule.elasticache_inbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_inbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0]"]},"protocol":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":724,"EndLine":736}},{"address":"aws_network_acl_rule.elasticache_outbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_outbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0]"]},"protocol":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":738,"EndLine":750}},{"address":"aws_network_acl_rule.intra_inbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_inbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.intra_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0]"]},"protocol":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_inbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":586,"EndLine":598}},{"address":"aws_network_acl_rule.intra_outbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_outbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.intra_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0]"]},"protocol":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_outbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":600,"EndLine":612}},{"address":"aws_network_acl_rule.private_inbound","mode":"managed","type":"aws_network_acl_rule","name":"private_inbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.private_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0]"]},"protocol":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_inbound_acl_rules","count.index"]},"to_port":{"references":["var.private_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":540,"EndLine":552}},{"address":"aws_network_acl_rule.private_outbound","mode":"managed","type":"aws_network_acl_rule","name":"private_outbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.private_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0]"]},"protocol":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_outbound_acl_rules","count.index"]},"to_port":{"references":["var.private_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":554,"EndLine":566}},{"address":"aws_network_acl_rule.public_inbound","mode":"managed","type":"aws_network_acl_rule","name":"public_inbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.public_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0]"]},"protocol":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_inbound_acl_rules","count.index"]},"to_port":{"references":["var.public_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":494,"EndLine":506}},{"address":"aws_network_acl_rule.public_outbound","mode":"managed","type":"aws_network_acl_rule","name":"public_outbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.public_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0]"]},"protocol":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_outbound_acl_rules","count.index"]},"to_port":{"references":["var.public_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":508,"EndLine":520}},{"address":"aws_network_acl_rule.redshift_inbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_inbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.redshift_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0]"]},"protocol":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_inbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":678,"EndLine":690}},{"address":"aws_network_acl_rule.redshift_outbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_outbound","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.redshift_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0]"]},"protocol":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_outbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":692,"EndLine":704}},{"address":"aws_redshift_subnet_group.redshift","mode":"managed","type":"aws_redshift_subnet_group","name":"redshift","provider_config_key":"network:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.name"]},"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.name","var.tags","var.redshift_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.create_redshift_subnet_group"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":356,"EndLine":370}},{"address":"aws_route.database_internet_gateway","mode":"managed","type":"aws_route","name":"database_internet_gateway","provider_config_key":"network:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0]"]},"route_table_id":{"references":["aws_route_table.database[0]"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":172,"EndLine":182}},{"address":"aws_route.database_nat_gateway","mode":"managed","type":"aws_route","name":"database_nat_gateway","provider_config_key":"network:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route","var.enable_nat_gateway","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":184,"EndLine":194}},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"network:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":815,"EndLine":825}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"network:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0]"]},"route_table_id":{"references":["aws_route_table.public[0]"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":115,"EndLine":125}},{"address":"aws_route_table.database","mode":"managed","type":"aws_route_table","name":"database","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.tags","var.database_route_table_tags","var.name","var.database_subnet_suffix"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_database_subnet_route_table","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":158,"EndLine":170}},{"address":"aws_route_table.elasticache","mode":"managed","type":"aws_route_table","name":"elasticache","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.tags","var.elasticache_route_table_tags","var.name","var.elasticache_subnet_suffix"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_elasticache_subnet_route_table","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":216,"EndLine":228}},{"address":"aws_route_table.intra","mode":"managed","type":"aws_route_table","name":"intra","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.name","var.intra_subnet_suffix","var.tags","var.intra_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":233,"EndLine":245}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.name","var.private_subnet_suffix","var.private_subnet_suffix","var.name","var.azs","count.index","var.tags","var.private_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","local.max_subnet_length","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":131,"EndLine":153}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.public_subnet_suffix","var.name","var.tags","var.public_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":101,"EndLine":113}},{"address":"aws_route_table.redshift","mode":"managed","type":"aws_route_table","name":"redshift","provider_config_key":"network:aws","expressions":{"tags":{"references":["var.tags","var.redshift_route_table_tags","var.name","var.redshift_subnet_suffix"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_redshift_subnet_route_table","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":199,"EndLine":211}},{"address":"aws_route_table_association.database","mode":"managed","type":"aws_route_table_association","name":"database","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.database","aws_route_table.private","var.single_nat_gateway","var.create_database_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.database","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1302,"EndLine":1310}},{"address":"aws_route_table_association.elasticache","mode":"managed","type":"aws_route_table_association","name":"elasticache","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.elasticache","aws_route_table.private","var.single_nat_gateway","var.create_elasticache_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.elasticache","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1332,"EndLine":1343}},{"address":"aws_route_table_association.intra","mode":"managed","type":"aws_route_table_association","name":"intra","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.intra"]},"subnet_id":{"references":["aws_subnet.intra","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_subnets","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1345,"EndLine":1350}},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_subnets","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1292,"EndLine":1300}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0]"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1352,"EndLine":1357}},{"address":"aws_route_table_association.redshift","mode":"managed","type":"aws_route_table_association","name":"redshift","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.private","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1312,"EndLine":1320}},{"address":"aws_route_table_association.redshift_public","mode":"managed","type":"aws_route_table_association","name":"redshift_public","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.public","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1322,"EndLine":1330}},{"address":"aws_subnet.database","mode":"managed","type":"aws_subnet","name":"database","provider_config_key":"network:aws","expressions":{"availability_zone":{"references":["var.azs","count.index"]},"cidr_block":{"references":["var.database_subnets","count.index"]},"tags":{"references":["var.database_subnet_suffix","var.name","var.azs","count.index","var.tags","var.database_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":297,"EndLine":315}},{"address":"aws_subnet.elasticache","mode":"managed","type":"aws_subnet","name":"elasticache","provider_config_key":"network:aws","expressions":{"availability_zone":{"references":["var.azs","count.index"]},"cidr_block":{"references":["var.elasticache_subnets","count.index"]},"tags":{"references":["var.elasticache_subnet_suffix","var.name","var.azs","count.index","var.tags","var.elasticache_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":375,"EndLine":393}},{"address":"aws_subnet.intra","mode":"managed","type":"aws_subnet","name":"intra","provider_config_key":"network:aws","expressions":{"availability_zone":{"references":["var.azs","count.index"]},"cidr_block":{"references":["var.intra_subnets","count.index"]},"tags":{"references":["var.intra_subnet_suffix","var.name","var.azs","count.index","var.tags","var.intra_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.intra_subnets","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":406,"EndLine":424}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"network:aws","expressions":{"availability_zone":{"references":["var.azs","count.index"]},"cidr_block":{"references":["var.private_subnets","count.index"]},"tags":{"references":["var.private_subnet_suffix","var.name","var.azs","count.index","var.tags","var.private_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.private_subnets","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":274,"EndLine":292}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"network:aws","expressions":{"availability_zone":{"references":["var.azs","count.index"]},"cidr_block":{"references":["var.public_subnets","count.index"]},"map_public_ip_on_launch":{"references":["var.map_public_ip_on_launch"]},"tags":{"references":["var.public_subnet_suffix","var.name","var.azs","count.index","var.tags","var.public_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.public_subnets","var.one_nat_gateway_per_az","var.public_subnets","var.azs","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":250,"EndLine":269}},{"address":"aws_subnet.redshift","mode":"managed","type":"aws_subnet","name":"redshift","provider_config_key":"network:aws","expressions":{"availability_zone":{"references":["var.azs","count.index"]},"cidr_block":{"references":["var.redshift_subnets","count.index"]},"tags":{"references":["var.redshift_subnet_suffix","var.name","var.azs","count.index","var.tags","var.redshift_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":336,"EndLine":354}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_config_key":"network:aws","expressions":{"assign_generated_ipv6_cidr_block":{"references":["var.assign_generated_ipv6_cidr_block"]},"cidr_block":{"references":["var.cidr"]},"enable_dns_hostnames":{"references":["var.enable_dns_hostnames"]},"enable_dns_support":{"references":["var.enable_dns_support"]},"instance_tenancy":{"references":["var.instance_tenancy"]},"tags":{"references":["var.name","var.tags","var.vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":24,"EndLine":40}},{"address":"aws_vpc_dhcp_options.this","mode":"managed","type":"aws_vpc_dhcp_options","name":"this","provider_config_key":"network:aws","expressions":{"domain_name":{"references":["var.dhcp_options_domain_name"]},"domain_name_servers":{"references":["var.dhcp_options_domain_name_servers"]},"netbios_name_servers":{"references":["var.dhcp_options_netbios_name_servers"]},"netbios_node_type":{"references":["var.dhcp_options_netbios_node_type"]},"ntp_servers":{"references":["var.dhcp_options_ntp_servers"]},"tags":{"references":["var.name","var.tags","var.dhcp_options_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dhcp_options"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":53,"EndLine":69}},{"address":"aws_vpc_dhcp_options_association.this","mode":"managed","type":"aws_vpc_dhcp_options_association","name":"this","provider_config_key":"network:aws","expressions":{"dhcp_options_id":{"references":["aws_vpc_dhcp_options.this[0]"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dhcp_options"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":74,"EndLine":79}},{"address":"aws_vpc_endpoint.apigw","mode":"managed","type":"aws_vpc_endpoint","name":"apigw","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.apigw_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.apigw_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.apigw[0]"]},"subnet_ids":{"references":["var.apigw_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_apigw_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1058,"EndLine":1068}},{"address":"aws_vpc_endpoint.cloudtrail","mode":"managed","type":"aws_vpc_endpoint","name":"cloudtrail","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.cloudtrail_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.cloudtrail_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.cloudtrail[0]"]},"subnet_ids":{"references":["var.cloudtrail_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_cloudtrail_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1276,"EndLine":1286}},{"address":"aws_vpc_endpoint.dynamodb","mode":"managed","type":"aws_vpc_endpoint","name":"dynamodb","provider_config_key":"network:aws","expressions":{"service_name":{"references":["data.aws_vpc_endpoint_service.dynamodb[0]"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dynamodb_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":873,"EndLine":878}},{"address":"aws_vpc_endpoint.ec2","mode":"managed","type":"aws_vpc_endpoint","name":"ec2","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ec2_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ec2_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ec2[0]"]},"subnet_ids":{"references":["var.ec2_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ec2_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":974,"EndLine":984}},{"address":"aws_vpc_endpoint.ec2messages","mode":"managed","type":"aws_vpc_endpoint","name":"ec2messages","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ec2messages_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ec2messages_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ec2messages[0]"]},"subnet_ids":{"references":["var.ec2messages_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ec2messages_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":995,"EndLine":1005}},{"address":"aws_vpc_endpoint.ecr_api","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_api","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ecr_api_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ecr_api_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ecr_api[0]"]},"subnet_ids":{"references":["var.ecr_api_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecr_api_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1016,"EndLine":1026}},{"address":"aws_vpc_endpoint.ecr_dkr","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_dkr","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ecr_dkr_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ecr_dkr_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ecr_dkr[0]"]},"subnet_ids":{"references":["var.ecr_dkr_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecr_dkr_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1037,"EndLine":1047}},{"address":"aws_vpc_endpoint.ecs","mode":"managed","type":"aws_vpc_endpoint","name":"ecs","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ecs_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ecs_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ecs[0]"]},"subnet_ids":{"references":["var.ecs_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecs_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1100,"EndLine":1110}},{"address":"aws_vpc_endpoint.ecs_agent","mode":"managed","type":"aws_vpc_endpoint","name":"ecs_agent","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ecs_agent_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ecs_agent_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ecs_agent[0]"]},"subnet_ids":{"references":["var.ecs_agent_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecs_agent_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1122,"EndLine":1132}},{"address":"aws_vpc_endpoint.ecs_telemetry","mode":"managed","type":"aws_vpc_endpoint","name":"ecs_telemetry","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ecs_telemetry_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ecs_telemetry_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ecs_telemetry[0]"]},"subnet_ids":{"references":["var.ecs_telemetry_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecs_telemetry_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1144,"EndLine":1154}},{"address":"aws_vpc_endpoint.elasticloadbalancing","mode":"managed","type":"aws_vpc_endpoint","name":"elasticloadbalancing","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.elasticloadbalancing_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.elasticloadbalancing_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.elasticloadbalancing[0]"]},"subnet_ids":{"references":["var.elasticloadbalancing_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_elasticloadbalancing_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1254,"EndLine":1264}},{"address":"aws_vpc_endpoint.events","mode":"managed","type":"aws_vpc_endpoint","name":"events","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.events_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.events_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.events[0]"]},"subnet_ids":{"references":["var.events_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_events_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1232,"EndLine":1242}},{"address":"aws_vpc_endpoint.kms","mode":"managed","type":"aws_vpc_endpoint","name":"kms","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.kms_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.kms_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.kms[0]"]},"subnet_ids":{"references":["var.kms_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_kms_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1079,"EndLine":1089}},{"address":"aws_vpc_endpoint.logs","mode":"managed","type":"aws_vpc_endpoint","name":"logs","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.logs_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.logs_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.logs[0]"]},"subnet_ids":{"references":["var.logs_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_logs_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1210,"EndLine":1220}},{"address":"aws_vpc_endpoint.monitoring","mode":"managed","type":"aws_vpc_endpoint","name":"monitoring","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.monitoring_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.monitoring_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.monitoring[0]"]},"subnet_ids":{"references":["var.monitoring_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_monitoring_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1188,"EndLine":1198}},{"address":"aws_vpc_endpoint.s3","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_config_key":"network:aws","expressions":{"service_name":{"references":["data.aws_vpc_endpoint_service.s3[0]"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_s3_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":836,"EndLine":841}},{"address":"aws_vpc_endpoint.sns","mode":"managed","type":"aws_vpc_endpoint","name":"sns","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.sns_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.sns_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.sns[0]"]},"subnet_ids":{"references":["var.sns_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_sns_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1166,"EndLine":1176}},{"address":"aws_vpc_endpoint.sqs","mode":"managed","type":"aws_vpc_endpoint","name":"sqs","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.sqs_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.sqs_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.sqs[0]"]},"subnet_ids":{"references":["var.sqs_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_sqs_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":911,"EndLine":921}},{"address":"aws_vpc_endpoint.ssm","mode":"managed","type":"aws_vpc_endpoint","name":"ssm","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ssm_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ssm_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ssm[0]"]},"subnet_ids":{"references":["var.ssm_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ssm_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":932,"EndLine":942}},{"address":"aws_vpc_endpoint.ssmmessages","mode":"managed","type":"aws_vpc_endpoint","name":"ssmmessages","provider_config_key":"network:aws","expressions":{"private_dns_enabled":{"references":["var.ssmmessages_endpoint_private_dns_enabled"]},"security_group_ids":{"references":["var.ssmmessages_endpoint_security_group_ids"]},"service_name":{"references":["data.aws_vpc_endpoint_service.ssmmessages[0]"]},"subnet_ids":{"references":["var.ssmmessages_endpoint_subnet_ids","aws_subnet.private"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ssmmessages_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":953,"EndLine":963}},{"address":"aws_vpc_endpoint_route_table_association.intra_dynamodb","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"intra_dynamodb","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.intra"]},"vpc_endpoint_id":{"references":["aws_vpc_endpoint.dynamodb[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dynamodb_endpoint","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":887,"EndLine":892}},{"address":"aws_vpc_endpoint_route_table_association.intra_s3","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"intra_s3","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.intra"]},"vpc_endpoint_id":{"references":["aws_vpc_endpoint.s3[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_s3_endpoint","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":850,"EndLine":855}},{"address":"aws_vpc_endpoint_route_table_association.private_dynamodb","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"private_dynamodb","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"vpc_endpoint_id":{"references":["aws_vpc_endpoint.dynamodb[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dynamodb_endpoint","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":880,"EndLine":885}},{"address":"aws_vpc_endpoint_route_table_association.private_s3","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"private_s3","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"vpc_endpoint_id":{"references":["aws_vpc_endpoint.s3[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_s3_endpoint","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":843,"EndLine":848}},{"address":"aws_vpc_endpoint_route_table_association.public_dynamodb","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"public_dynamodb","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0]"]},"vpc_endpoint_id":{"references":["aws_vpc_endpoint.dynamodb[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dynamodb_endpoint","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":894,"EndLine":899}},{"address":"aws_vpc_endpoint_route_table_association.public_s3","mode":"managed","type":"aws_vpc_endpoint_route_table_association","name":"public_s3","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0]"]},"vpc_endpoint_id":{"references":["aws_vpc_endpoint.s3[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_s3_endpoint","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":857,"EndLine":862}},{"address":"aws_vpc_ipv4_cidr_block_association.this","mode":"managed","type":"aws_vpc_ipv4_cidr_block_association","name":"this","provider_config_key":"network:aws","expressions":{"cidr_block":{"references":["var.secondary_cidr_blocks","count.index"]},"vpc_id":{"references":["aws_vpc.this[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.secondary_cidr_blocks","var.secondary_cidr_blocks"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":42,"EndLine":48}},{"address":"aws_vpn_gateway.this","mode":"managed","type":"aws_vpn_gateway","name":"this","provider_config_key":"network:aws","expressions":{"amazon_side_asn":{"references":["var.amazon_side_asn"]},"tags":{"references":["var.name","var.tags","var.vpn_gateway_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_vpn_gateway"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1362,"EndLine":1375}},{"address":"aws_vpn_gateway_attachment.this","mode":"managed","type":"aws_vpn_gateway_attachment","name":"this","provider_config_key":"network:aws","expressions":{"vpc_id":{"references":["local.vpc_id"]},"vpn_gateway_id":{"references":["var.vpn_gateway_id"]}},"schema_version":0,"count_expression":{"references":["var.vpn_gateway_id"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1377,"EndLine":1382}},{"address":"aws_vpn_gateway_route_propagation.private","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"private","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_private_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1397,"EndLine":1408}},{"address":"aws_vpn_gateway_route_propagation.public","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"public","provider_config_key":"network:aws","expressions":{"route_table_id":{"references":["aws_route_table.public","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_public_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1384,"EndLine":1395}},{"address":"data.aws_vpc_endpoint_service.apigw","mode":"data","type":"aws_vpc_endpoint_service","name":"apigw","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"execute-api"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_apigw_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1052,"EndLine":1056}},{"address":"data.aws_vpc_endpoint_service.cloudtrail","mode":"data","type":"aws_vpc_endpoint_service","name":"cloudtrail","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"cloudtrail"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_cloudtrail_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1270,"EndLine":1274}},{"address":"data.aws_vpc_endpoint_service.dynamodb","mode":"data","type":"aws_vpc_endpoint_service","name":"dynamodb","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"dynamodb"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dynamodb_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":867,"EndLine":871}},{"address":"data.aws_vpc_endpoint_service.ec2","mode":"data","type":"aws_vpc_endpoint_service","name":"ec2","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ec2"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ec2_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":968,"EndLine":972}},{"address":"data.aws_vpc_endpoint_service.ec2messages","mode":"data","type":"aws_vpc_endpoint_service","name":"ec2messages","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ec2messages"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ec2messages_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":989,"EndLine":993}},{"address":"data.aws_vpc_endpoint_service.ecr_api","mode":"data","type":"aws_vpc_endpoint_service","name":"ecr_api","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ecr.api"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecr_api_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1010,"EndLine":1014}},{"address":"data.aws_vpc_endpoint_service.ecr_dkr","mode":"data","type":"aws_vpc_endpoint_service","name":"ecr_dkr","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ecr.dkr"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecr_dkr_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1031,"EndLine":1035}},{"address":"data.aws_vpc_endpoint_service.ecs","mode":"data","type":"aws_vpc_endpoint_service","name":"ecs","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ecs"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecs_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1094,"EndLine":1098}},{"address":"data.aws_vpc_endpoint_service.ecs_agent","mode":"data","type":"aws_vpc_endpoint_service","name":"ecs_agent","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ecs-agent"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecs_agent_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1116,"EndLine":1120}},{"address":"data.aws_vpc_endpoint_service.ecs_telemetry","mode":"data","type":"aws_vpc_endpoint_service","name":"ecs_telemetry","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ecs-telemetry"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ecs_telemetry_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1138,"EndLine":1142}},{"address":"data.aws_vpc_endpoint_service.elasticloadbalancing","mode":"data","type":"aws_vpc_endpoint_service","name":"elasticloadbalancing","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"elasticloadbalancing"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_elasticloadbalancing_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1248,"EndLine":1252}},{"address":"data.aws_vpc_endpoint_service.events","mode":"data","type":"aws_vpc_endpoint_service","name":"events","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"events"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_events_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1226,"EndLine":1230}},{"address":"data.aws_vpc_endpoint_service.kms","mode":"data","type":"aws_vpc_endpoint_service","name":"kms","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"kms"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_kms_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1073,"EndLine":1077}},{"address":"data.aws_vpc_endpoint_service.logs","mode":"data","type":"aws_vpc_endpoint_service","name":"logs","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"logs"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_logs_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1204,"EndLine":1208}},{"address":"data.aws_vpc_endpoint_service.monitoring","mode":"data","type":"aws_vpc_endpoint_service","name":"monitoring","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"monitoring"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_monitoring_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1182,"EndLine":1186}},{"address":"data.aws_vpc_endpoint_service.s3","mode":"data","type":"aws_vpc_endpoint_service","name":"s3","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"s3"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_s3_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":830,"EndLine":834}},{"address":"data.aws_vpc_endpoint_service.sns","mode":"data","type":"aws_vpc_endpoint_service","name":"sns","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"sns"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_sns_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":1160,"EndLine":1164}},{"address":"data.aws_vpc_endpoint_service.sqs","mode":"data","type":"aws_vpc_endpoint_service","name":"sqs","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"sqs"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_sqs_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":905,"EndLine":909}},{"address":"data.aws_vpc_endpoint_service.ssm","mode":"data","type":"aws_vpc_endpoint_service","name":"ssm","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ssm"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ssm_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":926,"EndLine":930}},{"address":"data.aws_vpc_endpoint_service.ssmmessages","mode":"data","type":"aws_vpc_endpoint_service","name":"ssmmessages","provider_config_key":"network:aws","expressions":{"service":{"constant_value":"ssmmessages"}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_ssmmessages_endpoint"]},"raw_data":{"FileName":".terraform/modules/network/main.tf","StartLine":947,"EndLine":951}}],"variables":{"amazon_side_asn":{"default":"64512","description":"The Autonomous System Number (ASN) for the Amazon side of the gateway. By default the virtual private gateway is created with the current default Amazon ASN."},"apigw_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for API GW endpoint"},"apigw_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for API GW  endpoint"},"apigw_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for API GW endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"assign_generated_ipv6_cidr_block":{"default":false,"description":"Requests an Amazon-provided IPv6 CIDR block with a /56 prefix length for the VPC. You cannot specify the range of IP addresses, or the size of the CIDR block"},"azs":{"default":[],"description":"A list of availability zones in the region"},"cidr":{"default":"0.0.0.0/0","description":"The CIDR block for the VPC. Default value is a valid CIDR, but not acceptable by AWS and should be overridden"},"cloudtrail_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for CloudTrail endpoint"},"cloudtrail_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for CloudTrail endpoint"},"cloudtrail_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for CloudTrail endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"create_database_internet_gateway_route":{"default":false,"description":"Controls if an internet gateway route for public database access should be created"},"create_database_nat_gateway_route":{"default":false,"description":"Controls if a nat gateway route should be created to give internet access to the database subnets"},"create_database_subnet_group":{"default":true,"description":"Controls if database subnet group should be created"},"create_database_subnet_route_table":{"default":false,"description":"Controls if separate route table for database should be created"},"create_elasticache_subnet_group":{"default":true,"description":"Controls if elasticache subnet group should be created"},"create_elasticache_subnet_route_table":{"default":false,"description":"Controls if separate route table for elasticache should be created"},"create_redshift_subnet_group":{"default":true,"description":"Controls if redshift subnet group should be created"},"create_redshift_subnet_route_table":{"default":false,"description":"Controls if separate route table for redshift should be created"},"create_vpc":{"default":true,"description":"Controls if VPC should be created (it affects almost all resources)"},"database_acl_tags":{"default":{},"description":"Additional tags for the database subnets network ACL"},"database_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for database subnets"},"database_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets inbound network ACL rules"},"database_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets outbound network ACL rules"},"database_route_table_tags":{"default":{},"description":"Additional tags for the database route tables"},"database_subnet_group_tags":{"default":{},"description":"Additional tags for the database subnet group"},"database_subnet_suffix":{"default":"db","description":"Suffix to append to database subnets name"},"database_subnet_tags":{"default":{},"description":"Additional tags for the database subnets"},"database_subnets":{"default":[],"description":"A list of database subnets"},"default_network_acl_egress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of egress rules to set on the Default Network ACL"},"default_network_acl_ingress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of ingress rules to set on the Default Network ACL"},"default_network_acl_name":{"default":"","description":"Name to be used on the Default Network ACL"},"default_network_acl_tags":{"default":{},"description":"Additional tags for the Default Network ACL"},"default_vpc_enable_classiclink":{"default":false,"description":"Should be true to enable ClassicLink in the Default VPC"},"default_vpc_enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the Default VPC"},"default_vpc_enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the Default VPC"},"default_vpc_name":{"default":"","description":"Name to be used on the Default VPC"},"default_vpc_tags":{"default":{},"description":"Additional tags for the Default VPC"},"dhcp_options_domain_name":{"default":"","description":"Specifies DNS name for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_domain_name_servers":{"default":["AmazonProvidedDNS"],"description":"Specify a list of DNS server addresses for DHCP options set, default to AWS provided (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_name_servers":{"default":[],"description":"Specify a list of netbios servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_node_type":{"default":"","description":"Specify netbios node_type for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_ntp_servers":{"default":[],"description":"Specify a list of NTP servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_tags":{"default":{},"description":"Additional tags for the DHCP option set (requires enable_dhcp_options set to true)"},"ec2_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for EC2 endpoint"},"ec2_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for EC2 endpoint"},"ec2_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for EC2 endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"ec2messages_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for EC2MESSAGES endpoint"},"ec2messages_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for EC2MESSAGES endpoint"},"ec2messages_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for EC2MESSAGES endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"ecr_api_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for ECR API endpoint"},"ecr_api_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for ECR API endpoint"},"ecr_api_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for ECR api endpoint. If omitted, private subnets will be used."},"ecr_dkr_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for ECR DKR endpoint"},"ecr_dkr_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for ECR DKR endpoint"},"ecr_dkr_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for ECR dkr endpoint. If omitted, private subnets will be used."},"ecs_agent_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for ECS Agent endpoint"},"ecs_agent_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for ECS Agent endpoint"},"ecs_agent_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for ECS Agent endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"ecs_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for ECS endpoint"},"ecs_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for ECS endpoint"},"ecs_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for ECS endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"ecs_telemetry_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for ECS Telemetry endpoint"},"ecs_telemetry_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for ECS Telemetry endpoint"},"ecs_telemetry_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for ECS Telemetry endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"elasticache_acl_tags":{"default":{},"description":"Additional tags for the elasticache subnets network ACL"},"elasticache_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for elasticache subnets"},"elasticache_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets inbound network ACL rules"},"elasticache_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets outbound network ACL rules"},"elasticache_route_table_tags":{"default":{},"description":"Additional tags for the elasticache route tables"},"elasticache_subnet_suffix":{"default":"elasticache","description":"Suffix to append to elasticache subnets name"},"elasticache_subnet_tags":{"default":{},"description":"Additional tags for the elasticache subnets"},"elasticache_subnets":{"default":[],"description":"A list of elasticache subnets"},"elasticloadbalancing_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for Elastic Load Balancing endpoint"},"elasticloadbalancing_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for Elastic Load Balancing endpoint"},"elasticloadbalancing_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for Elastic Load Balancing endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"enable_apigw_endpoint":{"default":false,"description":"Should be true if you want to provision an api gateway endpoint to the VPC"},"enable_cloudtrail_endpoint":{"default":false,"description":"Should be true if you want to provision a CloudTrail endpoint to the VPC"},"enable_dhcp_options":{"default":false,"description":"Should be true if you want to specify a DHCP options set with a custom domain name, DNS servers, NTP servers, netbios servers, and/or netbios server type"},"enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the VPC"},"enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the VPC"},"enable_dynamodb_endpoint":{"default":false,"description":"Should be true if you want to provision a DynamoDB endpoint to the VPC"},"enable_ec2_endpoint":{"default":false,"description":"Should be true if you want to provision an EC2 endpoint to the VPC"},"enable_ec2messages_endpoint":{"default":false,"description":"Should be true if you want to provision an EC2MESSAGES endpoint to the VPC"},"enable_ecr_api_endpoint":{"default":false,"description":"Should be true if you want to provision an ecr api endpoint to the VPC"},"enable_ecr_dkr_endpoint":{"default":false,"description":"Should be true if you want to provision an ecr dkr endpoint to the VPC"},"enable_ecs_agent_endpoint":{"default":false,"description":"Should be true if you want to provision a ECS Agent endpoint to the VPC"},"enable_ecs_endpoint":{"default":false,"description":"Should be true if you want to provision a ECS endpoint to the VPC"},"enable_ecs_telemetry_endpoint":{"default":false,"description":"Should be true if you want to provision a ECS Telemetry endpoint to the VPC"},"enable_elasticloadbalancing_endpoint":{"default":false,"description":"Should be true if you want to provision a Elastic Load Balancing endpoint to the VPC"},"enable_events_endpoint":{"default":false,"description":"Should be true if you want to provision a CloudWatch Events endpoint to the VPC"},"enable_kms_endpoint":{"default":false,"description":"Should be true if you want to provision a KMS endpoint to the VPC"},"enable_logs_endpoint":{"default":false,"description":"Should be true if you want to provision a CloudWatch Logs endpoint to the VPC"},"enable_monitoring_endpoint":{"default":false,"description":"Should be true if you want to provision a CloudWatch Monitoring endpoint to the VPC"},"enable_nat_gateway":{"default":false,"description":"Should be true if you want to provision NAT Gateways for each of your private networks"},"enable_public_redshift":{"default":false,"description":"Controls if redshift should have public routing table"},"enable_s3_endpoint":{"default":false,"description":"Should be true if you want to provision an S3 endpoint to the VPC"},"enable_sns_endpoint":{"default":false,"description":"Should be true if you want to provision a SNS endpoint to the VPC"},"enable_sqs_endpoint":{"default":false,"description":"Should be true if you want to provision an SQS endpoint to the VPC"},"enable_ssm_endpoint":{"default":false,"description":"Should be true if you want to provision an SSM endpoint to the VPC"},"enable_ssmmessages_endpoint":{"default":false,"description":"Should be true if you want to provision a SSMMESSAGES endpoint to the VPC"},"enable_vpn_gateway":{"default":false,"description":"Should be true if you want to create a new VPN Gateway resource and attach it to the VPC"},"events_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for CloudWatch Events endpoint"},"events_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for CloudWatch Events endpoint"},"events_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for CloudWatch Events endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"external_nat_ip_ids":{"default":[],"description":"List of EIP IDs to be assigned to the NAT Gateways (used in combination with reuse_nat_ips)"},"igw_tags":{"default":{},"description":"Additional tags for the internet gateway"},"instance_tenancy":{"default":"default","description":"A tenancy option for instances launched into the VPC"},"intra_acl_tags":{"default":{},"description":"Additional tags for the intra subnets network ACL"},"intra_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for intra subnets"},"intra_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets inbound network ACLs"},"intra_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets outbound network ACLs"},"intra_route_table_tags":{"default":{},"description":"Additional tags for the intra route tables"},"intra_subnet_suffix":{"default":"intra","description":"Suffix to append to intra subnets name"},"intra_subnet_tags":{"default":{},"description":"Additional tags for the intra subnets"},"intra_subnets":{"default":[],"description":"A list of intra subnets"},"kms_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for KMS endpoint"},"kms_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for KMS endpoint"},"kms_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for KMS endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"logs_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for CloudWatch Logs endpoint"},"logs_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for CloudWatch Logs endpoint"},"logs_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for CloudWatch Logs endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"manage_default_network_acl":{"default":false,"description":"Should be true to adopt and manage Default Network ACL"},"manage_default_vpc":{"default":false,"description":"Should be true to adopt and manage Default VPC"},"map_public_ip_on_launch":{"default":true,"description":"Should be false if you do not want to auto-assign public IP on launch"},"monitoring_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for CloudWatch Monitoring endpoint"},"monitoring_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for CloudWatch Monitoring endpoint"},"monitoring_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for CloudWatch Monitoring endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"name":{"default":"","description":"Name to be used on all the resources as identifier"},"nat_eip_tags":{"default":{},"description":"Additional tags for the NAT EIP"},"nat_gateway_tags":{"default":{},"description":"Additional tags for the NAT gateways"},"one_nat_gateway_per_az":{"default":false,"description":"Should be true if you want only one NAT Gateway per availability zone. Requires `var.azs` to be set, and the number of `public_subnets` created to be greater than or equal to the number of availability zones specified in `var.azs`."},"private_acl_tags":{"default":{},"description":"Additional tags for the private subnets network ACL"},"private_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for private subnets"},"private_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets inbound network ACLs"},"private_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets outbound network ACLs"},"private_route_table_tags":{"default":{},"description":"Additional tags for the private route tables"},"private_subnet_suffix":{"default":"private","description":"Suffix to append to private subnets name"},"private_subnet_tags":{"default":{},"description":"Additional tags for the private subnets"},"private_subnets":{"default":[],"description":"A list of private subnets inside the VPC"},"propagate_private_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_public_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"public_acl_tags":{"default":{},"description":"Additional tags for the public subnets network ACL"},"public_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for public subnets"},"public_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets inbound network ACLs"},"public_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets outbound network ACLs"},"public_route_table_tags":{"default":{},"description":"Additional tags for the public route tables"},"public_subnet_suffix":{"default":"public","description":"Suffix to append to public subnets name"},"public_subnet_tags":{"default":{},"description":"Additional tags for the public subnets"},"public_subnets":{"default":[],"description":"A list of public subnets inside the VPC"},"redshift_acl_tags":{"default":{},"description":"Additional tags for the redshift subnets network ACL"},"redshift_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for redshift subnets"},"redshift_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets inbound network ACL rules"},"redshift_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets outbound network ACL rules"},"redshift_route_table_tags":{"default":{},"description":"Additional tags for the redshift route tables"},"redshift_subnet_group_tags":{"default":{},"description":"Additional tags for the redshift subnet group"},"redshift_subnet_suffix":{"default":"redshift","description":"Suffix to append to redshift subnets name"},"redshift_subnet_tags":{"default":{},"description":"Additional tags for the redshift subnets"},"redshift_subnets":{"default":[],"description":"A list of redshift subnets"},"reuse_nat_ips":{"default":false,"description":"Should be true if you don't want EIPs to be created for your NAT Gateways and will instead pass them in via the 'external_nat_ip_ids' variable"},"secondary_cidr_blocks":{"default":[],"description":"List of secondary CIDR blocks to associate with the VPC to extend the IP Address pool"},"single_nat_gateway":{"default":false,"description":"Should be true if you want to provision a single shared NAT Gateway across all of your private networks"},"sns_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for SNS endpoint"},"sns_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for SNS endpoint"},"sns_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for SNS endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"sqs_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for SQS endpoint"},"sqs_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for SQS endpoint"},"sqs_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for SQS endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"ssm_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for SSM endpoint"},"ssm_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for SSM endpoint"},"ssm_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for SSM endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"ssmmessages_endpoint_private_dns_enabled":{"default":false,"description":"Whether or not to associate a private hosted zone with the specified VPC for SSMMESSAGES endpoint"},"ssmmessages_endpoint_security_group_ids":{"default":[],"description":"The ID of one or more security groups to associate with the network interface for SSMMESSAGES endpoint"},"ssmmessages_endpoint_subnet_ids":{"default":[],"description":"The ID of one or more subnets in which to create a network interface for SSMMESSAGES endpoint. Only a single subnet within an AZ is supported. If omitted, private subnets will be used."},"tags":{"default":{},"description":"A map of tags to add to all resources"},"vpc_tags":{"default":{},"description":"Additional tags for the VPC"},"vpn_gateway_id":{"default":"","description":"ID of VPN Gateway to attach to the VPC"},"vpn_gateway_tags":{"default":{},"description":"Additional tags for the VPN gateway"}}},"raw_data":{"FileName":"network.tf","StartLine":1,"EndLine":24}},"network_label":{"source":"git::https://github.com/cloudposse/terraform-terraform-label.git?ref=0.5.0","expressions":{"convert_case":{"references":["var.convert_case"]},"delimiter":{"references":["var.delimiter"]},"enabled":{"constant_value":"true"},"name":{"references":["var.name"]},"namespace":{"references":["var.namespace"]},"stage":{"references":["var.stage"]},"tags":{"references":["var.default_tags"]}},"module":{"outputs":{"attributes":{"expression":{"references":["local.attributes"]},"description":"Normalized attributes"},"delimiter":{"expression":{"references":["local.delimiter"]},"description":"Delimiter between `namespace`, `stage`, `name` and `attributes`"},"id":{"expression":{"references":["local.id"]},"description":"Disambiguated ID"},"name":{"expression":{"references":["local.name"]},"description":"Normalized name"},"namespace":{"expression":{"references":["local.namespace"]},"description":"Normalized namespace"},"stage":{"expression":{"references":["local.stage"]},"description":"Normalized stage"},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"}},"variables":{"attributes":{"default":[],"description":"Additional attributes (e.g. `1`)"},"convert_case":{"default":true,"description":"Convert fields to lower case"},"delimiter":{"default":"-","description":"Delimiter to be used between `namespace`, `stage`, `name` and `attributes`"},"enabled":{"default":true,"description":"Set to false to prevent the module from creating any resources"},"name":{"default":"","description":"Solution name, e.g. `app` or `jenkins`"},"namespace":{"default":"","description":"Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'"},"stage":{"default":"","description":"Stage, e.g. 'prod', 'staging', 'dev'"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}},"raw_data":{"FileName":"labels.tf","StartLine":1,"EndLine":10}},"security_group_label":{"source":"git::https://github.com/cloudposse/terraform-terraform-label.git?ref=0.5.0","expressions":{"attributes":{"constant_value":["sg"]},"convert_case":{"references":["var.convert_case"]},"delimiter":{"references":["var.delimiter"]},"enabled":{"constant_value":"true"},"name":{"references":["var.name"]},"namespace":{"references":["var.namespace"]},"stage":{"references":["var.stage"]},"tags":{"references":["var.default_tags"]}},"module":{"outputs":{"attributes":{"expression":{"references":["local.attributes"]},"description":"Normalized attributes"},"delimiter":{"expression":{"references":["local.delimiter"]},"description":"Delimiter between `namespace`, `stage`, `name` and `attributes`"},"id":{"expression":{"references":["local.id"]},"description":"Disambiguated ID"},"name":{"expression":{"references":["local.name"]},"description":"Normalized name"},"namespace":{"expression":{"references":["local.namespace"]},"description":"Normalized namespace"},"stage":{"expression":{"references":["local.stage"]},"description":"Normalized stage"},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"}},"variables":{"attributes":{"default":[],"description":"Additional attributes (e.g. `1`)"},"convert_case":{"default":true,"description":"Convert fields to lower case"},"delimiter":{"default":"-","description":"Delimiter to be used between `namespace`, `stage`, `name` and `attributes`"},"enabled":{"default":true,"description":"Set to false to prevent the module from creating any resources"},"name":{"default":"","description":"Solution name, e.g. `app` or `jenkins`"},"namespace":{"default":"","description":"Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'"},"stage":{"default":"","description":"Stage, e.g. 'prod', 'staging', 'dev'"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}},"raw_data":{"FileName":"labels.tf","StartLine":12,"EndLine":22}},"server":{"source":"git::https://github.com/terraform-aws-modules/terraform-aws-ec2-instance?ref=v2.16.0","expressions":{"ami":{"references":["data.aws_ami.amazon_linux"]},"iam_instance_profile":{"references":["aws_iam_instance_profile.ConsoleMeInstanceProfile"]},"instance_count":{"constant_value":1},"instance_type":{"references":["var.instance_type"]},"key_name":{"references":["var.key_name"]},"metadata_options":{"constant_value":{"http_endpoint":"enabled","http_tokens":"required"}},"name":{"references":["module.compute_label.id"]},"root_block_device":{"references":["var.volume_size","module.kms_ebs.key_arn"]},"subnet_id":{"references":["module.network.private_subnets"]},"tags":{"references":["module.compute_label.tags"]},"user_data":{"references":["data.template_file.consoleme_userdata"]},"vpc_security_group_ids":{"references":["aws_security_group.server"]}},"module":{"outputs":{"arn":{"expression":{"references":["aws_instance.this"]},"description":"List of ARNs of instances"},"availability_zone":{"expression":{"references":["aws_instance.this"]},"description":"List of availability zones of instances"},"credit_specification":{"expression":{"references":["aws_instance.this"]},"description":"List of credit specification of instances"},"ebs_block_device_volume_ids":{"expression":{"references":["aws_instance.this"]},"description":"List of volume IDs of EBS block devices of instances"},"id":{"expression":{"references":["aws_instance.this"]},"description":"List of IDs of instances"},"instance_count":{"expression":{"references":["var.instance_count"]},"description":"Number of instances to launch specified as argument to this module"},"instance_state":{"expression":{"references":["aws_instance.this"]},"description":"List of instance states of instances"},"ipv6_addresses":{"expression":{"references":["aws_instance.this"]},"description":"List of assigned IPv6 addresses of instances"},"key_name":{"expression":{"references":["aws_instance.this"]},"description":"List of key names of instances"},"metadata_options":{"expression":{"references":["aws_instance.this"]},"description":"List of metadata options of instances"},"password_data":{"expression":{"references":["aws_instance.this"]},"description":"List of Base-64 encoded encrypted password data for the instance"},"placement_group":{"expression":{"references":["aws_instance.this"]},"description":"List of placement groups of instances"},"primary_network_interface_id":{"expression":{"references":["aws_instance.this"]},"description":"List of IDs of the primary network interface of instances"},"private_dns":{"expression":{"references":["aws_instance.this"]},"description":"List of private DNS names assigned to the instances. Can only be used inside the Amazon EC2, and only available if you've enabled DNS hostnames for your VPC"},"private_ip":{"expression":{"references":["aws_instance.this"]},"description":"List of private IP addresses assigned to the instances"},"public_dns":{"expression":{"references":["aws_instance.this"]},"description":"List of public DNS names assigned to the instances. For EC2-VPC, this is only available if you've enabled DNS hostnames for your VPC"},"public_ip":{"expression":{"references":["aws_instance.this"]},"description":"List of public IP addresses assigned to the instances, if applicable"},"root_block_device_volume_ids":{"expression":{"references":["aws_instance.this"]},"description":"List of volume IDs of root block devices of instances"},"security_groups":{"expression":{"references":["aws_instance.this"]},"description":"List of associated security groups of instances"},"subnet_id":{"expression":{"references":["aws_instance.this"]},"description":"List of IDs of VPC subnets of instances"},"tags":{"expression":{"references":["aws_instance.this"]},"description":"List of tags of instances"},"volume_tags":{"expression":{"references":["aws_instance.this"]},"description":"List of tags of volumes of instances"},"vpc_security_group_ids":{"expression":{"references":["aws_instance.this"]},"description":"List of associated security groups of instances, if running in non-default VPC"}},"resources":[{"address":"aws_instance.this","mode":"managed","type":"aws_instance","name":"this","provider_config_key":"server:aws","expressions":{"ami":{"references":["var.ami"]},"associate_public_ip_address":{"references":["var.associate_public_ip_address"]},"credit_specification":[{"cpu_credits":{"references":["local.is_t_instance_type","var.cpu_credits"]}}],"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"get_password_data":{"references":["var.get_password_data"]},"iam_instance_profile":{"references":["var.iam_instance_profile"]},"instance_initiated_shutdown_behavior":{"references":["var.instance_initiated_shutdown_behavior"]},"instance_type":{"references":["var.instance_type"]},"ipv6_address_count":{"references":["var.ipv6_address_count"]},"ipv6_addresses":{"references":["var.ipv6_addresses"]},"key_name":{"references":["var.key_name"]},"monitoring":{"references":["var.monitoring"]},"placement_group":{"references":["var.placement_group"]},"private_ip":{"references":["var.private_ips","var.private_ips","count.index","var.private_ip"]},"source_dest_check":{"references":["var.network_interface","var.source_dest_check"]},"subnet_id":{"references":["var.network_interface","var.subnet_id","var.subnet_ids","count.index"]},"tags":{"references":["var.instance_count","var.use_num_suffix","var.num_suffix_format","var.name","count.index","var.name","var.tags"]},"tenancy":{"references":["var.tenancy"]},"user_data":{"references":["var.user_data"]},"user_data_base64":{"references":["var.user_data_base64"]},"volume_tags":{"references":["var.instance_count","var.use_num_suffix","var.num_suffix_format","var.name","count.index","var.name","var.volume_tags"]},"vpc_security_group_ids":{"references":["var.vpc_security_group_ids"]}},"schema_version":1,"count_expression":{"references":["var.instance_count"]},"raw_data":{"FileName":".terraform/modules/server/main.tf","StartLine":5,"EndLine":105}}],"variables":{"ami":{"description":"ID of AMI to use for the instance"},"associate_public_ip_address":{"default":null,"description":"If true, the EC2 instance will have associated public IP address"},"cpu_credits":{"default":"standard","description":"The credit option for CPU usage (unlimited or standard)"},"disable_api_termination":{"default":false,"description":"If true, enables EC2 Instance Termination Protection"},"ebs_block_device":{"default":[],"description":"Additional EBS block devices to attach to the instance"},"ebs_optimized":{"default":false,"description":"If true, the launched EC2 instance will be EBS-optimized"},"ephemeral_block_device":{"default":[],"description":"Customize Ephemeral (also known as Instance Store) volumes on the instance"},"get_password_data":{"default":false,"description":"If true, wait for password data to become available and retrieve it."},"iam_instance_profile":{"default":"","description":"The IAM Instance Profile to launch the instance with. Specified as the name of the Instance Profile."},"instance_count":{"default":1,"description":"Number of instances to launch"},"instance_initiated_shutdown_behavior":{"default":"","description":"Shutdown behavior for the instance"},"instance_type":{"description":"The type of instance to start"},"ipv6_address_count":{"default":null,"description":"A number of IPv6 addresses to associate with the primary network interface. Amazon EC2 chooses the IPv6 addresses from the range of your subnet."},"ipv6_addresses":{"default":null,"description":"Specify one or more IPv6 addresses from the range of the subnet to associate with the primary network interface"},"key_name":{"default":"","description":"The key name to use for the instance"},"metadata_options":{"default":{},"description":"Customize the metadata options of the instance"},"monitoring":{"default":false,"description":"If true, the launched EC2 instance will have detailed monitoring enabled"},"name":{"description":"Name to be used on all resources as prefix"},"network_interface":{"default":[],"description":"Customize network interfaces to be attached at instance boot time"},"num_suffix_format":{"default":"-%d","description":"Numerical suffix format used as the volume and EC2 instance name suffix"},"placement_group":{"default":"","description":"The Placement Group to start the instance in"},"private_ip":{"default":null,"description":"Private IP address to associate with the instance in a VPC"},"private_ips":{"default":[],"description":"A list of private IP address to associate with the instance in a VPC. Should match the number of instances."},"root_block_device":{"default":[],"description":"Customize details about the root block device of the instance. See Block Devices below for details"},"source_dest_check":{"default":true,"description":"Controls if traffic is routed to the instance when the destination address does not match the instance. Used for NAT or VPNs."},"subnet_id":{"default":"","description":"The VPC Subnet ID to launch in"},"subnet_ids":{"default":[],"description":"A list of VPC Subnet IDs to launch in"},"tags":{"default":{},"description":"A mapping of tags to assign to the resource"},"tenancy":{"default":"default","description":"The tenancy of the instance (if the instance is running in a VPC). Available values: default, dedicated, host."},"use_num_suffix":{"default":false,"description":"Always append numerical suffix to instance name, even if instance_count is 1"},"user_data":{"default":null,"description":"The user data to provide when launching the instance. Do not pass gzip-compressed data via this argument; see user_data_base64 instead."},"user_data_base64":{"default":null,"description":"Can be used instead of user_data to pass base64-encoded binary data directly. Use this instead of user_data whenever the value is not a valid UTF-8 string. For example, gzip-encoded user data must be base64-encoded and passed via this argument to avoid corruption."},"volume_tags":{"default":{},"description":"A mapping of tags to assign to the devices created by the instance at launch time"},"vpc_security_group_ids":{"default":null,"description":"A list of security group IDs to associate with"}}},"raw_data":{"FileName":"main.tf","StartLine":1,"EndLine":31}}},"variables":{"allow_internet_access":{"default":false,"description":"Set to true to allow Internet access to the ConsoleMe server."},"allowed_inbound_cidr_blocks":{"default":[],"description":"Allowed inbound CIDRs for the security group rules."},"application_admin":{"description":"The user or group that will have administrative access in ConsoleMe"},"attributes":{"default":[],"description":"Additional attributes, e.g. `1`"},"bucket_name_prefix":{"description":"The name prefix of the S3 bucket that you want to upload the consoleme.tar.gz to, in the root of the bucket."},"consoleme_instance_profile_name":{"default":"consolemeInstanceProfile"},"convert_case":{"default":"true","description":"Convert fields to lower case"},"custom_user_data_script":{"default":"","description":"Additional userdata to pass in at runtime"},"default_tags":{"default":{},"description":"Default billing tags to be applied across all resources"},"delimiter":{"default":"-","description":"Delimiter to be used between (1) `namespace`, (2) `name`, (3) `stage` and (4) `attributes`"},"ec2_ami_name_filter":{"default":"amzn2-ami-hvm-2.0.2020*-x86_64-ebs","description":"The name of the AMI to search for. Defaults to amzn2-ami-hvm-2.0.2020*-x86_64-ebs"},"ec2_ami_owner_filter":{"default":"amazon","description":"List of AMI owners to limit search. Defaults to `amazon`."},"email_addresses":{"default":["email_address_here@example.com"]},"instance_type":{"default":"t2.medium","description":"The size of the Ec2 instance. Defaults to t2.medium"},"key_name":{"description":"The name of the SSH key in AWS to use for accessing the EC2 instance."},"kms_key_alias":{"default":"alias/consoleme","description":"The KMS key alias to use for the EBS Volume"},"lb-authentication-authorization-endpoint":{"description":"The authorization endpoint of the IdP you'd like to use in OIDC authentication."},"lb-authentication-client-id":{"description":"The client ID of the OIDC authenticator you'd like to use."},"lb-authentication-client-secret":{"description":"The client secret of the OIDC authenticator you'd like to use."},"lb-authentication-issuer":{"description":"The IdP issuer identifier you'd like to use in OIDC authentication."},"lb-authentication-jwt-email-key":{"default":"email","description":"Within the ID token JWT generated by the OIDC, what is the key for the 'email' field?"},"lb-authentication-scope":{"description":"The scopes to request from the OIDC provider, usually email and groups."},"lb-authentication-token-endpoint":{"description":"The token endpoint for the IdP you'd like to use in OIDC authentication."},"lb-authentication-user-info-endpoint":{"description":"The user info endpoint for the IdP you'd like to use in OIDC authentication."},"lb-certificate-arn":{"default":"","description":"The certificate the load balancer will use (as it terminates HTTPS). If not provided, a self-signed certificate will be used."},"lb-self-signed-cert-cn":{"default":"example.com","description":"If a self-signed cert is to be created, what is the common name of it?"},"lb_port":{"default":443,"description":"The port the load balancer will listen on."},"name":{"description":"Name, which could be the name of your solution or app. Third item in naming sequence."},"namespace":{"description":"Namespace, which could be your organization name. First item in naming sequence."},"private_subnet_cidrs":{"default":["10.1.1.0/28"],"description":"The CIDR block of the subnet the ConsoleMe server will be placed in."},"public_subnet_cidrs":{"default":["10.1.1.128/28","10.1.1.144/28"],"description":"The CIDR block of the subnet the load balancer will be placed in."},"region":{"description":"The AWS region for these resources, such as us-east-1."},"stage":{"description":"Stage, e.g. `prod`, `staging`, `dev`, or `test`. Second item in naming sequence."},"subnet_azs":{"description":"Subnets will be created in these availability zones (need at least two for load balancer)."},"sync_accounts_from_organizations":{"default":false,"description":"Sync accounts from AWS organizations?"},"sync_accounts_from_organizations_master_account_id":{"default":null,"description":"Organizations master account ID"},"sync_accounts_from_organizations_role_to_assume":{"default":"ConsoleMeTarget","description":"Organizations master role to assume"},"volume_size":{"default":50,"description":"The disk size for the EC2 instance root volume. Defaults to 50 (for 50GB)"},"vpc_cidr":{"default":"10.1.1.0/24","description":"The CIDR block for the VPC."},"your_ses_identity":{"default":"your_identity.example.com"}}}}}
