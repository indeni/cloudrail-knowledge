{"format_version":"0.1","terraform_version":"0.14.6","planned_values":{"root_module":{"resources":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","List","create","delete","recover","purge"],"object_id":"ddc8b952-aa8e-4ae1-aa42-0dfdf4f15db3","secret_permissions":["Get","List","set"],"storage_permissions":["Get"],"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"},{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","WrapKey","UnwrapKey"],"object_id":"azurerm_user_assigned_identity.sql.principal_id","secret_permissions":null,"storage_permissions":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"}],"contact":[],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"westeurope","name":"cr2523-keyvault","purge_protection_enabled":false,"resource_group_name":"cr2523-RG","sku_name":"standard","soft_delete_retention_days":7,"tags":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null}},{"address":"azurerm_key_vault_key.key","mode":"managed","type":"azurerm_key_vault_key","name":"key","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"expiration_date":null,"key_opts":["decrypt","encrypt","sign","unwrapKey","verify","wrapKey"],"key_size":2048,"key_type":"RSA","key_vault_id":"azurerm_key_vault.kv.id","name":"cr2523-sqlkey","not_before_date":null,"tags":null,"timeouts":null}},{"address":"azurerm_mssql_server.sql","mode":"managed","type":"azurerm_mssql_server","name":"sql","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"administrator_login":"4dm1n157r470r","administrator_login_password":"4-v3ry-53cr37-p455w0rd","azuread_administrator":[{"azuread_authentication_only":false,"login_username":"sqladmin","object_id":"ddc8b952-aa8e-4ae1-aa42-0dfdf4f15db3","tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"}],"connection_policy":"Default","identity":[{"type":"UserAssigned","user_assigned_identity_ids":["azurerm_user_assigned_identity.sql.id"]}],"location":"westeurope","minimum_tls_version":"1.1","name":"cr2523-sqlserver","primary_user_assigned_identity_id":"azurerm_user_assigned_identity.sql.id","public_network_access_enabled":false,"resource_group_name":"cr2523-RG","tags":{"environment":"production"},"timeouts":null,"version":"12.0"}},{"address":"azurerm_mssql_server_security_alert_policy.example","mode":"managed","type":"azurerm_mssql_server_security_alert_policy","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"disabled_alerts":null,"email_account_admins":false,"email_addresses":null,"resource_group_name":"cr2523-RG","retention_days":0,"server_name":"cr2523-sqlserver","state":"Enabled","storage_account_access_key":null,"storage_endpoint":null,"timeouts":null}},{"address":"azurerm_mssql_server_transparent_data_encryption.example","mode":"managed","type":"azurerm_mssql_server_transparent_data_encryption","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"key_vault_key_id":"azurerm_key_vault_key.key.id","server_id":"azurerm_mssql_server.sql.id","timeouts":null}},{"address":"azurerm_mssql_server_vulnerability_assessment.example","mode":"managed","type":"azurerm_mssql_server_vulnerability_assessment","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"recurring_scans":[{"email_subscription_admins":true,"emails":["email@example1.com","email@example2.com"],"enabled":true}],"server_security_alert_policy_id":"azurerm_mssql_server_security_alert_policy.example.id","storage_account_access_key":"azurerm_storage_account.example.primary_access_key","storage_container_path":"azurerm_storage_account.example.primary_blob_endpointcr2523container/","storage_container_sas_key":null,"timeouts":null}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"westeurope","name":"cr2523-RG","tags":null,"timeouts":null}},{"address":"azurerm_storage_account.example","mode":"managed","type":"azurerm_storage_account","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_blob_public_access":false,"azure_files_authentication":[],"custom_domain":[],"enable_https_traffic_only":true,"is_hns_enabled":false,"location":"westeurope","min_tls_version":"TLS1_0","name":"cr2523tststoracc","nfsv3_enabled":false,"queue_encryption_key_type":"Service","resource_group_name":"cr2523-RG","shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":null,"timeouts":null}},{"address":"azurerm_storage_container.example","mode":"managed","type":"azurerm_storage_container","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"container_access_type":"private","name":"cr2523container","storage_account_name":"cr2523tststoracc","timeouts":null}},{"address":"azurerm_user_assigned_identity.sql","mode":"managed","type":"azurerm_user_assigned_identity","name":"sql","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"location":"westeurope","name":"cr2523-userid","resource_group_name":"cr2523-RG","tags":null,"timeouts":null}}]}},"resource_changes":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","List","create","delete","recover","purge"],"object_id":"ddc8b952-aa8e-4ae1-aa42-0dfdf4f15db3","secret_permissions":["Get","List","set"],"storage_permissions":["Get"],"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"},{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","WrapKey","UnwrapKey"],"object_id":"azurerm_user_assigned_identity.sql.principal_id","secret_permissions":null,"storage_permissions":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"}],"contact":[],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"westeurope","name":"cr2523-keyvault","purge_protection_enabled":false,"resource_group_name":"cr2523-RG","sku_name":"standard","soft_delete_retention_days":7,"tags":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null},"after_unknown":{"access_policy":[{"key_permissions":[false,false,false,false,false,false],"secret_permissions":[false,false,false],"storage_permissions":[false]},{"key_permissions":[false,false,false]}],"contact":[],"id":true,"network_acls":true,"soft_delete_enabled":true,"vault_uri":true}}},{"address":"azurerm_key_vault_key.key","mode":"managed","type":"azurerm_key_vault_key","name":"key","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"expiration_date":null,"key_opts":["decrypt","encrypt","sign","unwrapKey","verify","wrapKey"],"key_size":2048,"key_type":"RSA","key_vault_id":"azurerm_key_vault.kv.id","name":"cr2523-sqlkey","not_before_date":null,"tags":null,"timeouts":null},"after_unknown":{"curve":true,"e":true,"id":true,"key_opts":[false,false,false,false,false,false],"n":true,"public_key_openssh":true,"public_key_pem":true,"version":true,"versionless_id":true,"x":true,"y":true}}},{"address":"azurerm_mssql_server.sql","mode":"managed","type":"azurerm_mssql_server","name":"sql","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"administrator_login":"4dm1n157r470r","administrator_login_password":"4-v3ry-53cr37-p455w0rd","azuread_administrator":[{"azuread_authentication_only":false,"login_username":"sqladmin","object_id":"ddc8b952-aa8e-4ae1-aa42-0dfdf4f15db3","tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"}],"connection_policy":"Default","identity":[{"type":"UserAssigned","user_assigned_identity_ids":["azurerm_user_assigned_identity.sql.id"]}],"location":"westeurope","minimum_tls_version":"1.1","name":"cr2523-sqlserver","primary_user_assigned_identity_id":"azurerm_user_assigned_identity.sql.id","public_network_access_enabled":false,"resource_group_name":"cr2523-RG","tags":{"environment":"production"},"timeouts":null,"version":"12.0"},"after_unknown":{"azuread_administrator":[{}],"extended_auditing_policy":true,"fully_qualified_domain_name":true,"id":true,"identity":[{"principal_id":true,"tenant_id":true,"user_assigned_identity_ids":[false]}],"restorable_dropped_database_ids":true,"tags":{}}}},{"address":"azurerm_mssql_server_security_alert_policy.example","mode":"managed","type":"azurerm_mssql_server_security_alert_policy","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"disabled_alerts":null,"email_account_admins":false,"email_addresses":null,"resource_group_name":"cr2523-RG","retention_days":0,"server_name":"cr2523-sqlserver","state":"Enabled","storage_account_access_key":null,"storage_endpoint":null,"timeouts":null},"after_unknown":{"id":true}}},{"address":"azurerm_mssql_server_transparent_data_encryption.example","mode":"managed","type":"azurerm_mssql_server_transparent_data_encryption","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"key_vault_key_id":"azurerm_key_vault_key.key.id","server_id":"azurerm_mssql_server.sql.id","timeouts":null},"after_unknown":{"id":true}}},{"address":"azurerm_mssql_server_vulnerability_assessment.example","mode":"managed","type":"azurerm_mssql_server_vulnerability_assessment","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"recurring_scans":[{"email_subscription_admins":true,"emails":["email@example1.com","email@example2.com"],"enabled":true}],"server_security_alert_policy_id":"azurerm_mssql_server_security_alert_policy.example.id","storage_account_access_key":"azurerm_storage_account.example.primary_access_key","storage_container_path":"azurerm_storage_account.example.primary_blob_endpointcr2523container/","storage_container_sas_key":null,"timeouts":null},"after_unknown":{"id":true,"recurring_scans":[{"emails":[false,false]}]}}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"westeurope","name":"cr2523-RG","tags":null,"timeouts":null},"after_unknown":{"id":true}}},{"address":"azurerm_storage_account.example","mode":"managed","type":"azurerm_storage_account","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_blob_public_access":false,"azure_files_authentication":[],"custom_domain":[],"enable_https_traffic_only":true,"is_hns_enabled":false,"location":"westeurope","min_tls_version":"TLS1_0","name":"cr2523tststoracc","nfsv3_enabled":false,"queue_encryption_key_type":"Service","resource_group_name":"cr2523-RG","shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":null,"timeouts":null},"after_unknown":{"access_tier":true,"azure_files_authentication":[],"blob_properties":true,"custom_domain":[],"id":true,"identity":true,"large_file_share_enabled":true,"network_rules":true,"primary_access_key":true,"primary_blob_connection_string":true,"primary_blob_endpoint":true,"primary_blob_host":true,"primary_connection_string":true,"primary_dfs_endpoint":true,"primary_dfs_host":true,"primary_file_endpoint":true,"primary_file_host":true,"primary_location":true,"primary_queue_endpoint":true,"primary_queue_host":true,"primary_table_endpoint":true,"primary_table_host":true,"primary_web_endpoint":true,"primary_web_host":true,"queue_properties":true,"routing":true,"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_blob_endpoint":true,"secondary_blob_host":true,"secondary_connection_string":true,"secondary_dfs_endpoint":true,"secondary_dfs_host":true,"secondary_file_endpoint":true,"secondary_file_host":true,"secondary_location":true,"secondary_queue_endpoint":true,"secondary_queue_host":true,"secondary_table_endpoint":true,"secondary_table_host":true,"secondary_web_endpoint":true,"secondary_web_host":true,"share_properties":true,"static_website":[]}}},{"address":"azurerm_storage_container.example","mode":"managed","type":"azurerm_storage_container","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"container_access_type":"private","name":"cr2523container","storage_account_name":"cr2523tststoracc","timeouts":null},"after_unknown":{"has_immutability_policy":true,"has_legal_hold":true,"id":true,"metadata":true,"resource_manager_id":true}}},{"address":"azurerm_user_assigned_identity.sql","mode":"managed","type":"azurerm_user_assigned_identity","name":"sql","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"westeurope","name":"cr2523-userid","resource_group_name":"cr2523-RG","tags":null,"timeouts":null},"after_unknown":{"client_id":true,"id":true,"principal_id":true,"tenant_id":true}}}],"prior_state":{"format_version":"0.1","terraform_version":"1.0.3","values":{"root_module":{"resources":[{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"2021-12-27 16:36:38.84433 +0000 UTC","object_id":"ddc8b952-aa8e-4ae1-aa42-0dfdf4f15db3","subscription_id":"230613d8-3b34-4790-b650-36f31045f19a","tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null}}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","expressions":{"features":[{}]}}},"root_module":{"resources":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.rg"]},"name":{"references":["local.resource_prefix"]},"purge_protection_enabled":{"constant_value":false},"resource_group_name":{"references":["azurerm_resource_group.rg"]},"sku_name":{"constant_value":"standard"},"soft_delete_retention_days":{"constant_value":7},"tenant_id":{"references":["data.azurerm_client_config.current"]}},"schema_version":2,"depends_on":["azurerm_mssql_server.sql"],"raw_data":{"FileName":"main.tf","StartLine":58,"EndLine":93}},{"address":"azurerm_key_vault_key.key","mode":"managed","type":"azurerm_key_vault_key","name":"key","provider_config_key":"azurerm","expressions":{"key_opts":{"constant_value":["decrypt","encrypt","sign","unwrapKey","verify","wrapKey"]},"key_size":{"constant_value":2048},"key_type":{"constant_value":"RSA"},"key_vault_id":{"references":["azurerm_key_vault.kv"]},"name":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":95,"EndLine":101}},{"address":"azurerm_mssql_server.sql","mode":"managed","type":"azurerm_mssql_server","name":"sql","provider_config_key":"azurerm","expressions":{"administrator_login":{"constant_value":"4dm1n157r470r"},"administrator_login_password":{"constant_value":"4-v3ry-53cr37-p455w0rd"},"azuread_administrator":[{"azuread_authentication_only":{"constant_value":false},"login_username":{"constant_value":"sqladmin"},"object_id":{"references":["data.azurerm_client_config.current"]},"tenant_id":{"references":["data.azurerm_client_config.current"]}}],"connection_policy":{"constant_value":"Default"},"identity":[{"type":{"constant_value":"UserAssigned"},"user_assigned_identity_ids":{"references":["azurerm_user_assigned_identity.sql"]}}],"location":{"references":["azurerm_resource_group.rg"]},"minimum_tls_version":{"constant_value":"1.1"},"name":{"references":["local.resource_prefix"]},"primary_user_assigned_identity_id":{"references":["azurerm_user_assigned_identity.sql"]},"public_network_access_enabled":{"constant_value":false},"resource_group_name":{"references":["azurerm_resource_group.rg"]},"tags":{"constant_value":{"environment":"production"}},"version":{"constant_value":"12.0"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":22,"EndLine":56}},{"address":"azurerm_mssql_server_security_alert_policy.example","mode":"managed","type":"azurerm_mssql_server_security_alert_policy","name":"example","provider_config_key":"azurerm","expressions":{"resource_group_name":{"references":["azurerm_resource_group.rg"]},"server_name":{"references":["azurerm_mssql_server.sql"]},"state":{"constant_value":"Enabled"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":122,"EndLine":126}},{"address":"azurerm_mssql_server_transparent_data_encryption.example","mode":"managed","type":"azurerm_mssql_server_transparent_data_encryption","name":"example","provider_config_key":"azurerm","expressions":{"key_vault_key_id":{"references":["azurerm_key_vault_key.key"]},"server_id":{"references":["azurerm_mssql_server.sql"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":103,"EndLine":106}},{"address":"azurerm_mssql_server_vulnerability_assessment.example","mode":"managed","type":"azurerm_mssql_server_vulnerability_assessment","name":"example","provider_config_key":"azurerm","expressions":{"recurring_scans":[{"email_subscription_admins":{"constant_value":true},"emails":{"constant_value":["email@example1.com","email@example2.com"]},"enabled":{"constant_value":true}}],"server_security_alert_policy_id":{"references":["azurerm_mssql_server_security_alert_policy.example"]},"storage_account_access_key":{"references":["azurerm_storage_account.example"]},"storage_container_path":{"references":["azurerm_storage_account.example","azurerm_storage_container.example"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":128,"EndLine":141}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_config_key":"azurerm","expressions":{"location":{"constant_value":"West Europe"},"name":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":11,"EndLine":14}},{"address":"azurerm_storage_account.example","mode":"managed","type":"azurerm_storage_account","name":"example","provider_config_key":"azurerm","expressions":{"account_replication_type":{"constant_value":"LRS"},"account_tier":{"constant_value":"Standard"},"location":{"references":["azurerm_resource_group.rg"]},"name":{"references":["local.resource_prefix"]},"resource_group_name":{"references":["azurerm_resource_group.rg"]}},"schema_version":2,"raw_data":{"FileName":"main.tf","StartLine":108,"EndLine":114}},{"address":"azurerm_storage_container.example","mode":"managed","type":"azurerm_storage_container","name":"example","provider_config_key":"azurerm","expressions":{"container_access_type":{"constant_value":"private"},"name":{"references":["local.resource_prefix"]},"storage_account_name":{"references":["azurerm_storage_account.example"]}},"schema_version":1,"raw_data":{"FileName":"main.tf","StartLine":116,"EndLine":120}},{"address":"azurerm_user_assigned_identity.sql","mode":"managed","type":"azurerm_user_assigned_identity","name":"sql","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.rg"]},"name":{"references":["local.resource_prefix"]},"resource_group_name":{"references":["azurerm_resource_group.rg"]}},"schema_version":1,"raw_data":{"FileName":"main.tf","StartLine":16,"EndLine":20}},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":9,"EndLine":9}}]}}}
