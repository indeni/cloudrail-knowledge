{"format_version":"0.1","terraform_version":"0.14.6","planned_values":{"outputs":{"principal_id":{"sensitive":false}},"root_module":{"resources":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","List","create","delete","recover"],"object_id":"53ef355e-49be-4c82-94fb-9ca9e30a444d","secret_permissions":["Get","List","set"],"storage_permissions":["Get"],"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"}],"contact":[],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"westeurope","name":"cr24501-keyvault","purge_protection_enabled":true,"resource_group_name":"cr24501-RG","sku_name":"standard","soft_delete_retention_days":7,"tags":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null}},{"address":"azurerm_key_vault_access_policy.storage","mode":"managed","type":"azurerm_key_vault_access_policy","name":"storage","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"application_id":null,"certificate_permissions":null,"key_permissions":["get","create","list","restore","recover","unwrapkey","wrapkey","encrypt","decrypt","sign","verify"],"key_vault_id":"azurerm_key_vault.kv.id","secret_permissions":["get"],"storage_permissions":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null}},{"address":"azurerm_key_vault_key.key","mode":"managed","type":"azurerm_key_vault_key","name":"key","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"expiration_date":null,"key_opts":["decrypt","encrypt","sign","unwrapKey","verify","wrapKey"],"key_size":2048,"key_type":"RSA","key_vault_id":"azurerm_key_vault.kv.id","name":"cr24501-key","not_before_date":null,"tags":null,"timeouts":null}},{"address":"azurerm_monitor_diagnostic_setting.example","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"log":[{"category":"AuditEvent","enabled":true,"retention_policy":[{"days":31,"enabled":true}]}],"log_analytics_destination_type":null,"log_analytics_workspace_id":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[{"days":null,"enabled":false}]}],"name":"example","storage_account_id":"azurerm_storage_account.storacc.id","target_resource_id":"azurerm_key_vault.kv.id","timeouts":null}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"westeurope","name":"cr24501-RG","tags":null,"timeouts":null}},{"address":"azurerm_storage_account.storacc","mode":"managed","type":"azurerm_storage_account","name":"storacc","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_blob_public_access":false,"azure_files_authentication":[],"custom_domain":[],"enable_https_traffic_only":true,"identity":[{"identity_ids":null,"type":"SystemAssigned"}],"is_hns_enabled":false,"location":"westeurope","min_tls_version":"TLS1_0","name":"cr24501tststacc","nfsv3_enabled":false,"queue_encryption_key_type":"Service","resource_group_name":"cr24501-RG","shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":null,"timeouts":null}},{"address":"azurerm_storage_account_customer_managed_key.example","mode":"managed","type":"azurerm_storage_account_customer_managed_key","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"key_name":"cr24501-key","key_vault_id":"azurerm_key_vault.kv.id","key_version":null,"storage_account_id":"azurerm_storage_account.storacc.id","timeouts":null,"user_assigned_identity_id":null}}]}},"resource_changes":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":["Get","List","create","delete","recover"],"object_id":"53ef355e-49be-4c82-94fb-9ca9e30a444d","secret_permissions":["Get","List","set"],"storage_permissions":["Get"],"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7"}],"contact":[],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"westeurope","name":"cr24501-keyvault","purge_protection_enabled":true,"resource_group_name":"cr24501-RG","sku_name":"standard","soft_delete_retention_days":7,"tags":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null},"after_unknown":{"access_policy":[{"key_permissions":[false,false,false,false,false],"secret_permissions":[false,false,false],"storage_permissions":[false]}],"contact":[],"id":true,"network_acls":true,"soft_delete_enabled":true,"vault_uri":true}}},{"address":"azurerm_key_vault_access_policy.storage","mode":"managed","type":"azurerm_key_vault_access_policy","name":"storage","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"application_id":null,"certificate_permissions":null,"key_permissions":["get","create","list","restore","recover","unwrapkey","wrapkey","encrypt","decrypt","sign","verify"],"key_vault_id":"azurerm_key_vault.kv.id","secret_permissions":["get"],"storage_permissions":null,"tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null},"after_unknown":{"id":true,"key_permissions":[false,false,false,false,false,false,false,false,false,false,false],"object_id":true,"secret_permissions":[false]}}},{"address":"azurerm_key_vault_key.key","mode":"managed","type":"azurerm_key_vault_key","name":"key","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"expiration_date":null,"key_opts":["decrypt","encrypt","sign","unwrapKey","verify","wrapKey"],"key_size":2048,"key_type":"RSA","key_vault_id":"azurerm_key_vault.kv.id","name":"cr24501-key","not_before_date":null,"tags":null,"timeouts":null},"after_unknown":{"curve":true,"e":true,"id":true,"key_opts":[false,false,false,false,false,false],"n":true,"public_key_openssh":true,"public_key_pem":true,"version":true,"versionless_id":true,"x":true,"y":true}}},{"address":"azurerm_monitor_diagnostic_setting.example","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"eventhub_authorization_rule_id":null,"eventhub_name":null,"log":[{"category":"AuditEvent","enabled":true,"retention_policy":[{"days":31,"enabled":true}]}],"log_analytics_destination_type":null,"log_analytics_workspace_id":null,"metric":[{"category":"AllMetrics","enabled":false,"retention_policy":[{"days":null,"enabled":false}]}],"name":"example","storage_account_id":"azurerm_storage_account.storacc.id","target_resource_id":"azurerm_key_vault.kv.id","timeouts":null},"after_unknown":{"id":true,"log":[{"retention_policy":[{}]}],"metric":[{"retention_policy":[{}]}]}}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"westeurope","name":"cr24501-RG","tags":null,"timeouts":null},"after_unknown":{"id":true}}},{"address":"azurerm_storage_account.storacc","mode":"managed","type":"azurerm_storage_account","name":"storacc","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_blob_public_access":false,"azure_files_authentication":[],"custom_domain":[],"enable_https_traffic_only":true,"identity":[{"identity_ids":null,"type":"SystemAssigned"}],"is_hns_enabled":false,"location":"westeurope","min_tls_version":"TLS1_0","name":"cr24501tststacc","nfsv3_enabled":false,"queue_encryption_key_type":"Service","resource_group_name":"cr24501-RG","shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":null,"timeouts":null},"after_unknown":{"access_tier":true,"azure_files_authentication":[],"blob_properties":true,"custom_domain":[],"id":true,"identity":[{"principal_id":true,"tenant_id":true}],"large_file_share_enabled":true,"network_rules":true,"primary_access_key":true,"primary_blob_connection_string":true,"primary_blob_endpoint":true,"primary_blob_host":true,"primary_connection_string":true,"primary_dfs_endpoint":true,"primary_dfs_host":true,"primary_file_endpoint":true,"primary_file_host":true,"primary_location":true,"primary_queue_endpoint":true,"primary_queue_host":true,"primary_table_endpoint":true,"primary_table_host":true,"primary_web_endpoint":true,"primary_web_host":true,"queue_properties":true,"routing":true,"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_blob_endpoint":true,"secondary_blob_host":true,"secondary_connection_string":true,"secondary_dfs_endpoint":true,"secondary_dfs_host":true,"secondary_file_endpoint":true,"secondary_file_host":true,"secondary_location":true,"secondary_queue_endpoint":true,"secondary_queue_host":true,"secondary_table_endpoint":true,"secondary_table_host":true,"secondary_web_endpoint":true,"secondary_web_host":true,"share_properties":true,"static_website":[]}}},{"address":"azurerm_storage_account_customer_managed_key.example","mode":"managed","type":"azurerm_storage_account_customer_managed_key","name":"example","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"key_name":"cr24501-key","key_vault_id":"azurerm_key_vault.kv.id","key_version":null,"storage_account_id":"azurerm_storage_account.storacc.id","timeouts":null,"user_assigned_identity_id":null},"after_unknown":{"id":true}}}],"output_changes":{"principal_id":{"actions":["create"],"before":null,"after_unknown":true}},"prior_state":{"format_version":"0.1","terraform_version":"0.14.11","values":{"root_module":{"resources":[{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"2021-12-29 08:18:41.780998 +0000 UTC","object_id":"53ef355e-49be-4c82-94fb-9ca9e30a444d","subscription_id":"230613d8-3b34-4790-b650-36f31045f19a","tenant_id":"568db8f3-e402-4c09-baa9-692e42029cc7","timeouts":null}}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","expressions":{"features":[{}]}}},"root_module":{"outputs":{"principal_id":{"expression":{"references":["azurerm_storage_account.storacc"]}}},"resources":[{"address":"azurerm_key_vault.kv","mode":"managed","type":"azurerm_key_vault","name":"kv","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.rg"]},"name":{"references":["local.resource_prefix"]},"purge_protection_enabled":{"constant_value":true},"resource_group_name":{"references":["azurerm_resource_group.rg"]},"sku_name":{"constant_value":"standard"},"soft_delete_retention_days":{"constant_value":7},"tenant_id":{"references":["data.azurerm_client_config.current"]}},"schema_version":2,"raw_data":{"FileName":"main.tf","StartLine":29,"EndLine":52}},{"address":"azurerm_key_vault_access_policy.storage","mode":"managed","type":"azurerm_key_vault_access_policy","name":"storage","provider_config_key":"azurerm","expressions":{"key_permissions":{"constant_value":["get","create","list","restore","recover","unwrapkey","wrapkey","encrypt","decrypt","sign","verify"]},"key_vault_id":{"references":["azurerm_key_vault.kv"]},"object_id":{"references":["azurerm_storage_account.storacc"]},"secret_permissions":{"constant_value":["get"]},"tenant_id":{"references":["data.azurerm_client_config.current"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":54,"EndLine":61}},{"address":"azurerm_key_vault_key.key","mode":"managed","type":"azurerm_key_vault_key","name":"key","provider_config_key":"azurerm","expressions":{"key_opts":{"constant_value":["decrypt","encrypt","sign","unwrapKey","verify","wrapKey"]},"key_size":{"constant_value":2048},"key_type":{"constant_value":"RSA"},"key_vault_id":{"references":["azurerm_key_vault.kv"]},"name":{"references":["local.resource_prefix"]}},"schema_version":0,"depends_on":["azurerm_key_vault_access_policy.storage"],"raw_data":{"FileName":"main.tf","StartLine":68,"EndLine":78}},{"address":"azurerm_monitor_diagnostic_setting.example","mode":"managed","type":"azurerm_monitor_diagnostic_setting","name":"example","provider_config_key":"azurerm","expressions":{"log":[{"category":{"constant_value":"AuditEvent"},"enabled":{"constant_value":true},"retention_policy":[{"days":{"constant_value":31},"enabled":{"constant_value":true}}]}],"metric":[{"category":{"constant_value":"AllMetrics"},"enabled":{"constant_value":false},"retention_policy":[{"enabled":{"constant_value":false}}]}],"name":{"constant_value":"example"},"storage_account_id":{"references":["azurerm_storage_account.storacc"]},"target_resource_id":{"references":["azurerm_key_vault.kv"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":86,"EndLine":106}},{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_config_key":"azurerm","expressions":{"location":{"constant_value":"West Europe"},"name":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":13,"EndLine":16}},{"address":"azurerm_storage_account.storacc","mode":"managed","type":"azurerm_storage_account","name":"storacc","provider_config_key":"azurerm","expressions":{"account_replication_type":{"constant_value":"LRS"},"account_tier":{"constant_value":"Standard"},"identity":[{"type":{"constant_value":"SystemAssigned"}}],"location":{"references":["azurerm_resource_group.rg"]},"name":{"references":["local.resource_prefix"]},"resource_group_name":{"references":["azurerm_resource_group.rg"]}},"schema_version":2,"raw_data":{"FileName":"main.tf","StartLine":18,"EndLine":27}},{"address":"azurerm_storage_account_customer_managed_key.example","mode":"managed","type":"azurerm_storage_account_customer_managed_key","name":"example","provider_config_key":"azurerm","expressions":{"key_name":{"references":["azurerm_key_vault_key.key"]},"key_vault_id":{"references":["azurerm_key_vault.kv"]},"storage_account_id":{"references":["azurerm_storage_account.storacc"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":80,"EndLine":84}},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":11,"EndLine":11}}]}}}
