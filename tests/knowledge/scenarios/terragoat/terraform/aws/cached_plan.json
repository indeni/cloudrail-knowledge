{"format_version":"0.1","terraform_version":"0.12.29","variables":{"ami":{"value":"ami-09a5b0b7edf08843d"},"availability_zone":{"value":"us-west-2a"},"availability_zone2":{"value":"us-west-2b"},"company_name":{"value":"acme"},"dbname":{"value":"db1"},"environment":{"value":"dev"},"neptune-dbname":{"value":"neptunedb1"},"password":{"value":"Aa1234321Bb"},"profile":{"value":"default"},"region":{"value":"us-west-2"}},"planned_values":{"outputs":{"db_app_public_dns":{"sensitive":false,"value":"aws_instance.db_app.public_dns"},"db_endpoint":{"sensitive":false,"value":"aws_db_instance.default.endpoint"},"ec2_public_dns":{"sensitive":false,"value":"aws_instance.web_host.public_dns"},"endpoint":{"sensitive":false,"value":"aws_eks_cluster.eks_cluster.endpoint"},"kubeconfig-certificate-authority-data":{"sensitive":false},"public_subnet":{"sensitive":false,"value":"aws_subnet.web_subnet.id"},"public_subnet2":{"sensitive":false,"value":"aws_subnet.web_subnet2.id"},"secret":{"sensitive":false,"value":"aws_iam_access_key.user.encrypted_secret"},"username":{"sensitive":false,"value":"167389268608-acme-dev-user"},"vpc_id":{"sensitive":false,"value":"aws_vpc.web_vpc.id"}},"root_module":{"resources":[{"address":"aws_db_instance.default","mode":"managed","type":"aws_db_instance","name":"default","provider_name":"aws","schema_version":1,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":0,"copy_tags_to_snapshot":false,"db_subnet_group_name":"sg-167389268608-acme-dev","delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"rds-167389268608-acme-dev","instance_class":"db.t3.micro","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"name":"db1","option_group_name":"og-167389268608-acme-dev","parameter_group_name":"pg-167389268608-acme-dev","password":"Aa1234321Bb","performance_insights_enabled":false,"publicly_accessible":true,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":false,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-rds"},"timeouts":null,"username":"admin","vpc_security_group_ids":["aws_security_group.default.id"]}},{"address":"aws_db_option_group.default","mode":"managed","type":"aws_db_option_group","name":"default","provider_name":"aws","schema_version":0,"values":{"engine_name":"mysql","major_engine_version":"8.0","name":"og-167389268608-acme-dev","option":[],"option_group_description":"Terraform OG","tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-og"},"timeouts":null}},{"address":"aws_db_parameter_group.default","mode":"managed","type":"aws_db_parameter_group","name":"default","provider_name":"aws","schema_version":0,"values":{"description":"Terraform PG","family":"mysql8.0","name":"pg-167389268608-acme-dev","parameter":[{"apply_method":"immediate","name":"character_set_client","value":"utf8"},{"apply_method":"immediate","name":"character_set_server","value":"utf8"}],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-pg"}}},{"address":"aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_name":"aws","schema_version":0,"values":{"description":"Terraform DB Subnet Group","name":"sg-167389268608-acme-dev","subnet_ids":["aws_subnet.web_subnet.id","aws_subnet.web_subnet2.id"],"tags":{"Environment":"167389268608-acme-dev","Name":"sg-167389268608-acme-dev"}}},{"address":"aws_ebs_snapshot.example_snapshot","mode":"managed","type":"aws_ebs_snapshot","name":"example_snapshot","provider_name":"aws","schema_version":0,"values":{"description":"167389268608-acme-dev-ebs-snapshot","tags":{"Name":"167389268608-acme-dev-ebs-snapshot"},"timeouts":null,"volume_id":"aws_ebs_volume.web_host_storage.id"}},{"address":"aws_ebs_volume.web_host_storage","mode":"managed","type":"aws_ebs_volume","name":"web_host_storage","provider_name":"aws","schema_version":0,"values":{"availability_zone":"us-west-2a","multi_attach_enabled":null,"outpost_arn":null,"size":1,"tags":{"Name":"167389268608-acme-dev-ebs"}}},{"address":"aws_ecr_repository.repository","mode":"managed","type":"aws_ecr_repository","name":"repository","provider_name":"aws","schema_version":0,"values":{"encryption_configuration":[],"image_scanning_configuration":[],"image_tag_mutability":"MUTABLE","name":"167389268608-acme-dev-repository","tags":{"Name":"167389268608-acme-dev-repository"},"timeouts":null}},{"address":"aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"aws","schema_version":0,"values":{"enabled_cluster_log_types":null,"encryption_config":[],"kubernetes_network_config":[],"name":"167389268608-acme-dev-eks","role_arn":"aws_iam_role.iam_for_eks.arn","tags":null,"timeouts":null,"vpc_config":[{"cluster_security_group_id":null,"endpoint_private_access":true,"endpoint_public_access":null,"public_access_cidrs":["0.0.0.0/0"],"security_group_ids":null,"subnet_ids":["aws_subnet.eks_subnet1.id","aws_subnet.eks_subnet2.id"],"vpc_id":null}]}},{"address":"aws_elasticsearch_domain.monitoring-framework","mode":"managed","type":"aws_elasticsearch_domain","name":"monitoring-framework","provider_name":"aws","schema_version":0,"values":{"advanced_security_options":[],"cluster_config":[{"dedicated_master_count":1,"dedicated_master_enabled":false,"dedicated_master_type":"m4.large.elasticsearch","instance_count":1,"instance_type":"t2.small.elasticsearch","warm_count":null,"warm_enabled":null,"warm_type":null,"zone_awareness_config":[],"zone_awareness_enabled":null}],"cognito_options":[],"domain_endpoint_options":[],"domain_name":"tg-dev-es","ebs_options":[{"ebs_enabled":true,"iops":null,"volume_size":30,"volume_type":null}],"elasticsearch_version":"2.3","encrypt_at_rest":[],"log_publishing_options":[],"node_to_node_encryption":[],"snapshot_options":[],"tags":null,"timeouts":null,"vpc_options":[]}},{"address":"aws_elasticsearch_domain_policy.monitoring-framework-policy","mode":"managed","type":"aws_elasticsearch_domain_policy","name":"monitoring-framework-policy","provider_name":"aws","schema_version":0,"values":{"access_policies":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      }\n    }\n  ]\n}","domain_name":"tg-dev-es"}},{"address":"aws_elb.weblb","mode":"managed","type":"aws_elb","name":"weblb","provider_name":"aws","schema_version":0,"values":{"access_logs":[],"connection_draining":true,"connection_draining_timeout":400,"cross_zone_load_balancing":true,"health_check":[{"healthy_threshold":2,"interval":30,"target":"HTTP:8000/","timeout":3,"unhealthy_threshold":2}],"idle_timeout":400,"instances":["aws_instance.web_host.id"],"listener":[{"instance_port":8000,"instance_protocol":"http","lb_port":80,"lb_protocol":"http","ssl_certificate_id":null}],"name":"weblb-terraform-elb","name_prefix":null,"security_groups":["aws_security_group.web-node.id"],"subnets":["aws_subnet.web_subnet.id"],"tags":{"Name":"foobar-terraform-elb"}}},{"address":"aws_flow_log.vpcflowlogs","mode":"managed","type":"aws_flow_log","name":"vpcflowlogs","provider_name":"aws","schema_version":0,"values":{"eni_id":null,"iam_role_arn":null,"log_destination":"aws_s3_bucket.flowbucket.arn","log_destination_type":"s3","max_aggregation_interval":600,"subnet_id":null,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-flowlogs"},"traffic_type":"ALL","vpc_id":"aws_vpc.web_vpc.id"}},{"address":"aws_iam_access_key.user","mode":"managed","type":"aws_iam_access_key","name":"user","provider_name":"aws","schema_version":0,"values":{"pgp_key":null,"user":"167389268608-acme-dev-user"}},{"address":"aws_iam_instance_profile.ec2profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2profile","provider_name":"aws","schema_version":0,"values":{"name":"167389268608-acme-dev-profile","name_prefix":null,"path":"/","role":"167389268608-acme-dev-role"}},{"address":"aws_iam_role.ec2role","mode":"managed","type":"aws_iam_role","name":"ec2role","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": \"sts:AssumeRole\",\n            \"Principal\": {\n               \"Service\": \"ec2.amazonaws.com\"\n            },\n            \"Effect\": \"Allow\",\n            \"Sid\": \"\"\n        }\n    ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"167389268608-acme-dev-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-role"}}},{"address":"aws_iam_role.iam_for_eks","mode":"managed","type":"aws_iam_role","name":"iam_for_eks","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"167389268608-acme-dev-iam-for-eks","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"167389268608-acme-dev-analysis-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role_policy.ec2policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2policy","provider_name":"aws","schema_version":0,"values":{"name":"167389268608-acme-dev-policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","role":"aws_iam_role.ec2role.id"}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSClusterPolicy","provider_name":"aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"167389268608-acme-dev-iam-for-eks"}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSServicePolicy","provider_name":"aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"167389268608-acme-dev-iam-for-eks"}},{"address":"aws_iam_user.user","mode":"managed","type":"aws_iam_user","name":"user","provider_name":"aws","schema_version":0,"values":{"force_destroy":true,"name":"167389268608-acme-dev-user","path":"/","permissions_boundary":null,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-user"}}},{"address":"aws_iam_user_policy.userpolicy","mode":"managed","type":"aws_iam_user_policy","name":"userpolicy","provider_name":"aws","schema_version":0,"values":{"name":"excess_policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","user":"167389268608-acme-dev-user"}},{"address":"aws_instance.db_app","mode":"managed","type":"aws_instance","name":"db_app","provider_name":"aws","schema_version":1,"values":{"ami":"ami-027e033da7800f292","credit_specification":[],"disable_api_termination":null,"ebs_block_device":[],"ebs_optimized":null,"enclave_options":[],"ephemeral_block_device":[],"get_password_data":false,"hibernation":null,"iam_instance_profile":"167389268608-acme-dev-profile","instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","metadata_options":[],"monitoring":null,"network_interface":[],"root_block_device":[],"source_dest_check":true,"subnet_id":"aws_subnet.web_subnet.id","tags":{"Name":"167389268608-acme-dev-dbapp"},"timeouts":null,"user_data":"#! /bin/bash\n### Config from https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateWebServer.html\nsudo yum -y update\nsudo yum -y install httpd php php-mysqlnd\nsudo systemctl enable httpd \nsudo systemctl start httpd\n\nsudo mkdir /var/www/inc\ncat \u003c\u003c EnD \u003e /tmp/dbinfo.inc\n\u003c?php\ndefine('DB_SERVER', 'aws_db_instance.default.endpoint');\ndefine('DB_USERNAME', 'admin');\ndefine('DB_PASSWORD', 'Aa1234321Bb');\ndefine('DB_DATABASE', 'db1');\n?\u003e\nEnD\nsudo mv /tmp/dbinfo.inc /var/www/inc \nsudo chown root:root /var/www/inc/dbinfo.inc\n\ncat \u003c\u003c EnD \u003e /tmp/index.php\n\u003c?php include \"../inc/dbinfo.inc\"; ?\u003e\n\u003chtml\u003e\n\u003cbody\u003e\n\u003ch1\u003eSample page\u003c/h1\u003e\n\u003c?php\n\n  /* Connect to MySQL and select the database. */\n  \\$connection = mysqli_connect(DB_SERVER, DB_USERNAME, DB_PASSWORD);\n\n  if (mysqli_connect_errno()) echo \"Failed to connect to MySQL: \" . mysqli_connect_error();\n\n  \\$database = mysqli_select_db(\\$connection, DB_DATABASE);\n\n  /* Ensure that the EMPLOYEES table exists. */\n  VerifyEmployeesTable(\\$connection, DB_DATABASE);\n\n  /* If input fields are populated, add a row to the EMPLOYEES table. */\n  \\$employee_name = htmlentities(\\$_POST['NAME']);\n  \\$employee_address = htmlentities(\\$_POST['ADDRESS']);\n\n  if (strlen(\\$employee_name) || strlen(\\$employee_address)) {\n    AddEmployee(\\$connection, \\$employee_name, \\$employee_address);\n  }\n?\u003e\n\n\u003c!-- Input form --\u003e\n\u003cform action=\"\u003c?PHP echo \\$_SERVER['SCRIPT_NAME'] ?\u003e\" method=\"POST\"\u003e\n  \u003ctable border=\"0\"\u003e\n    \u003ctr\u003e\n      \u003ctd\u003eNAME\u003c/td\u003e\n      \u003ctd\u003eADDRESS\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd\u003e\n        \u003cinput type=\"text\" name=\"NAME\" maxlength=\"45\" size=\"30\" /\u003e\n      \u003c/td\u003e\n      \u003ctd\u003e\n        \u003cinput type=\"text\" name=\"ADDRESS\" maxlength=\"90\" size=\"60\" /\u003e\n      \u003c/td\u003e\n      \u003ctd\u003e\n        \u003cinput type=\"submit\" value=\"Add Data\" /\u003e\n      \u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/table\u003e\n\u003c/form\u003e\n\n\u003c!-- Display table data. --\u003e\n\u003ctable border=\"1\" cellpadding=\"2\" cellspacing=\"2\"\u003e\n  \u003ctr\u003e\n    \u003ctd\u003eID\u003c/td\u003e\n    \u003ctd\u003eNAME\u003c/td\u003e\n    \u003ctd\u003eADDRESS\u003c/td\u003e\n  \u003c/tr\u003e\n\n\u003c?php\n\n\\$result = mysqli_query(\\$connection, \"SELECT * FROM EMPLOYEES\");\n\nwhile(\\$query_data = mysqli_fetch_row(\\$result)) {\n  echo \"\u003ctr\u003e\";\n  echo \"\u003ctd\u003e\",\\$query_data[0], \"\u003c/td\u003e\",\n       \"\u003ctd\u003e\",\\$query_data[1], \"\u003c/td\u003e\",\n       \"\u003ctd\u003e\",\\$query_data[2], \"\u003c/td\u003e\";\n  echo \"\u003c/tr\u003e\";\n}\n?\u003e\n\n\u003c/table\u003e\n\n\u003c!-- Clean up. --\u003e\n\u003c?php\n\n  mysqli_free_result(\\$result);\n  mysqli_close(\\$connection);\n\n?\u003e\n\n\u003c/body\u003e\n\u003c/html\u003e\n\n\n\u003c?php\n\n/* Add an employee to the table. */\nfunction AddEmployee(\\$connection, \\$name, \\$address) {\n   \\$n = mysqli_real_escape_string(\\$connection, \\$name);\n   \\$a = mysqli_real_escape_string(\\$connection, \\$address);\n\n   \\$query = \"INSERT INTO EMPLOYEES (NAME, ADDRESS) VALUES ('\\$n', '\\$a');\";\n\n   if(!mysqli_query(\\$connection, \\$query)) echo(\"\u003cp\u003eError adding employee data.\u003c/p\u003e\");\n}\n\n/* Check whether the table exists and, if not, create it. */\nfunction VerifyEmployeesTable(\\$connection, \\$dbName) {\n  if(!TableExists(\"EMPLOYEES\", \\$connection, \\$dbName))\n  {\n     \\$query = \"CREATE TABLE EMPLOYEES (\n         ID int(11) UNSIGNED AUTO_INCREMENT PRIMARY KEY,\n         NAME VARCHAR(45),\n         ADDRESS VARCHAR(90)\n       )\";\n\n     if(!mysqli_query(\\$connection, \\$query)) echo(\"\u003cp\u003eError creating table.\u003c/p\u003e\");\n  }\n}\n\n/* Check for the existence of a table. */\nfunction TableExists(\\$tableName, \\$connection, \\$dbName) {\n  \\$t = mysqli_real_escape_string(\\$connection, \\$tableName);\n  \\$d = mysqli_real_escape_string(\\$connection, \\$dbName);\n\n  \\$checktable = mysqli_query(\\$connection,\n      \"SELECT TABLE_NAME FROM information_schema.TABLES WHERE TABLE_NAME = '\\$t' AND TABLE_SCHEMA = '\\$d'\");\n\n  if(mysqli_num_rows(\\$checktable) \u003e 0) return true;\n\n  return false;\n}\n?\u003e               \nEnD\n\nsudo mv /tmp/index.php /var/www/html\nsudo chown root:root /var/www/html/index.php\n\n\n\n","user_data_base64":null,"volume_tags":null,"vpc_security_group_ids":["aws_security_group.web-node.id"]}},{"address":"aws_instance.web_host","mode":"managed","type":"aws_instance","name":"web_host","provider_name":"aws","schema_version":1,"values":{"ami":"ami-09a5b0b7edf08843d","credit_specification":[],"disable_api_termination":null,"ebs_block_device":[],"ebs_optimized":null,"enclave_options":[],"ephemeral_block_device":[],"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","metadata_options":[],"monitoring":null,"network_interface":[],"root_block_device":[],"source_dest_check":true,"subnet_id":"aws_subnet.web_subnet.id","tags":{"Name":"167389268608-acme-dev-ec2"},"timeouts":null,"user_data":"#! /bin/bash\nsudo apt-get update\nsudo apt-get install -y apache2\nsudo systemctl start apache2\nsudo systemctl enable apache2\nexport AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMAAA\nexport AWS_SECRET_ACCESS_KEY=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\nexport AWS_DEFAULT_REGION=us-west-2\necho \"\u003ch1\u003eDeployed via Terraform\u003c/h1\u003e\" | sudo tee /var/www/html/index.html\n","user_data_base64":null,"volume_tags":null,"vpc_security_group_ids":["aws_security_group.web-node.id"]}},{"address":"aws_internet_gateway.web_igw","mode":"managed","type":"aws_internet_gateway","name":"web_igw","provider_name":"aws","schema_version":0,"values":{"tags":{"Name":"167389268608-acme-dev-igw"},"vpc_id":"aws_vpc.web_vpc.id"}},{"address":"aws_kms_alias.logs_key_alias","mode":"managed","type":"aws_kms_alias","name":"logs_key_alias","provider_name":"aws","schema_version":0,"values":{"name":"alias/167389268608-acme-dev-logs-bucket-key","name_prefix":null,"target_key_id":"aws_kms_key.logs_key.key_id"}},{"address":"aws_kms_key.logs_key","mode":"managed","type":"aws_kms_key","name":"logs_key","provider_name":"aws","schema_version":0,"values":{"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"167389268608-acme-dev-logs bucket key","enable_key_rotation":false,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":null}},{"address":"aws_lambda_function.analysis_lambda","mode":"managed","type":"aws_lambda_function","name":"analysis_lambda","provider_name":"aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[{"variables":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}],"file_system_config":[],"filename":"resources/lambda_function_payload.zip","function_name":"167389268608-acme-dev-analysis","handler":"exports.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"reserved_concurrent_executions":-1,"role":"aws_iam_role.iam_for_lambda.arn","runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"asdfasdf","tags":null,"timeout":3,"timeouts":null,"tracing_config":[],"vpc_config":[]}},{"address":"aws_neptune_cluster.default","mode":"managed","type":"aws_neptune_cluster","name":"default","provider_name":"aws","schema_version":0,"values":{"apply_immediately":true,"backup_retention_period":5,"cluster_identifier":"neptunedb1","deletion_protection":null,"enable_cloudwatch_logs_exports":null,"engine":"neptune","final_snapshot_identifier":null,"iam_database_authentication_enabled":false,"iam_roles":null,"neptune_cluster_parameter_group_name":"default.neptune1","port":8182,"preferred_backup_window":"07:00-09:00","replication_source_identifier":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":false,"tags":null,"timeouts":null}},{"address":"aws_neptune_cluster_instance.default[0]","mode":"managed","type":"aws_neptune_cluster_instance","name":"default","index":0,"provider_name":"aws","schema_version":0,"values":{"apply_immediately":true,"auto_minor_version_upgrade":true,"cluster_identifier":"aws_neptune_cluster.default.id","engine":"neptune","instance_class":"db.t3.medium","neptune_parameter_group_name":"default.neptune1","port":8182,"promotion_tier":0,"publicly_accessible":false,"tags":null,"timeouts":null}},{"address":"aws_neptune_cluster_snapshot.default","mode":"managed","type":"aws_neptune_cluster_snapshot","name":"default","provider_name":"aws","schema_version":0,"values":{"db_cluster_identifier":"aws_neptune_cluster.default.id","db_cluster_snapshot_identifier":"resourcetestsnapshot1","timeouts":null}},{"address":"aws_network_interface.web-eni","mode":"managed","type":"aws_network_interface","name":"web-eni","provider_name":"aws","schema_version":0,"values":{"attachment":[],"description":null,"private_ips":["172.16.10.100"],"source_dest_check":true,"subnet_id":"aws_subnet.web_subnet.id","tags":{"Name":"167389268608-acme-dev-primary_network_interface"}}},{"address":"aws_route_table.web_rtb","mode":"managed","type":"aws_route_table","name":"web_rtb","provider_name":"aws","schema_version":0,"values":{"tags":{"Name":"167389268608-acme-dev-rtb"},"vpc_id":"aws_vpc.web_vpc.id"}},{"address":"aws_route_table_association.rtbassoc","mode":"managed","type":"aws_route_table_association","name":"rtbassoc","provider_name":"aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"aws_route_table.web_rtb.id","subnet_id":"aws_subnet.web_subnet.id"}},{"address":"aws_route_table_association.rtbassoc2","mode":"managed","type":"aws_route_table_association","name":"rtbassoc2","provider_name":"aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"aws_route_table.web_rtb.id","subnet_id":"aws_subnet.web_subnet2.id"}},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_name":"aws","schema_version":0,"values":{"acl":"public-read","bucket":"167389268608-acme-dev-data","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-data"},"versioning":[],"website":[]}},{"address":"aws_s3_bucket.data_science","mode":"managed","type":"aws_s3_bucket","name":"data_science","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"167389268608-acme-dev-data-science","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[{"target_bucket":"aws_s3_bucket.logs.id","target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"versioning":[{"enabled":true,"mfa_delete":null}],"website":[]}},{"address":"aws_s3_bucket.financials","mode":"managed","type":"aws_s3_bucket","name":"financials","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"167389268608-acme-dev-financials","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-financials"},"versioning":[],"website":[]}},{"address":"aws_s3_bucket.flowbucket","mode":"managed","type":"aws_s3_bucket","name":"flowbucket","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"167389268608-acme-dev-flowlogs","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-flowlogs"},"versioning":[],"website":[]}},{"address":"aws_s3_bucket.logs","mode":"managed","type":"aws_s3_bucket","name":"logs","provider_name":"aws","schema_version":0,"values":{"acl":"log-delivery-write","bucket":"167389268608-acme-dev-logs","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"aws_kms_key.logs_key.arn","sse_algorithm":"aws:kms"}]}]}],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-logs"},"versioning":[{"enabled":true,"mfa_delete":null}],"website":[]}},{"address":"aws_s3_bucket.operations","mode":"managed","type":"aws_s3_bucket","name":"operations","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"167389268608-acme-dev-operations","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-operations"},"versioning":[{"enabled":true,"mfa_delete":null}],"website":[]}},{"address":"aws_s3_bucket_object.data_object","mode":"managed","type":"aws_s3_bucket_object","name":"data_object","provider_name":"aws","schema_version":0,"values":{"acl":"private","bucket":"aws_s3_bucket.data.id","cache_control":null,"content":null,"content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"force_destroy":false,"key":"customer-master.xlsx","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":"resources/customer-master.xlsx","tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-customer-master"},"website_redirect":null}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"aws","schema_version":1,"values":{"description":"Managed by Terraform","name":"167389268608-acme-dev-rds-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-rds-sg"},"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"}},{"address":"aws_security_group.web-node","mode":"managed","type":"aws_security_group","name":"web-node","provider_name":"aws","schema_version":1,"values":{"description":"167389268608-acme-dev Security Group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}],"name":"167389268608-acme-dev-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":null,"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"}},{"address":"aws_security_group_rule.egress","mode":"managed","type":"aws_security_group_rule","name":"egress","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"aws_security_group.default.id","self":false,"to_port":0,"type":"egress"}},{"address":"aws_security_group_rule.ingress","mode":"managed","type":"aws_security_group_rule","name":"ingress","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["172.16.0.0/16"],"description":null,"from_port":3306,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"aws_security_group.default.id","self":false,"to_port":3306,"type":"ingress"}},{"address":"aws_subnet.eks_subnet1","mode":"managed","type":"aws_subnet","name":"eks_subnet1","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"10.10.10.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-eks-subnet","kubernetes.io/cluster/167389268608-acme-dev-eks":"shared"},"timeouts":null,"vpc_id":"aws_vpc.eks_vpc.id"}},{"address":"aws_subnet.eks_subnet2","mode":"managed","type":"aws_subnet","name":"eks_subnet2","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"10.10.11.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-eks-subnet2","kubernetes.io/cluster/167389268608-acme-dev-eks":"shared"},"timeouts":null,"vpc_id":"aws_vpc.eks_vpc.id"}},{"address":"aws_subnet.web_subnet","mode":"managed","type":"aws_subnet","name":"web_subnet","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"172.16.10.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-subnet"},"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"}},{"address":"aws_subnet.web_subnet2","mode":"managed","type":"aws_subnet","name":"web_subnet2","provider_name":"aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"172.16.11.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-subnet2"},"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"}},{"address":"aws_volume_attachment.ebs_att","mode":"managed","type":"aws_volume_attachment","name":"ebs_att","provider_name":"aws","schema_version":0,"values":{"device_name":"/dev/sdh","force_detach":null,"instance_id":"aws_instance.web_host.id","skip_destroy":null,"volume_id":"aws_ebs_volume.web_host_storage.id"}},{"address":"aws_vpc.eks_vpc","mode":"managed","type":"aws_vpc","name":"eks_vpc","provider_name":"aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.10.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"167389268608-acme-dev-eks-vpc"}}},{"address":"aws_vpc.web_vpc","mode":"managed","type":"aws_vpc","name":"web_vpc","provider_name":"aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"172.16.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"167389268608-acme-dev-vpc"}}},{"address":"null_resource.push_image","mode":"managed","type":"null_resource","name":"push_image","provider_name":"null","schema_version":0,"values":{"triggers":null}}]}},"resource_changes":[{"address":"aws_db_instance.default","mode":"managed","type":"aws_db_instance","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":0,"copy_tags_to_snapshot":false,"db_subnet_group_name":"sg-167389268608-acme-dev","delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_iam_role_name":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"rds-167389268608-acme-dev","instance_class":"db.t3.micro","iops":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"name":"db1","option_group_name":"og-167389268608-acme-dev","parameter_group_name":"pg-167389268608-acme-dev","password":"Aa1234321Bb","performance_insights_enabled":false,"publicly_accessible":true,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"security_group_names":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":false,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-rds"},"timeouts":null,"username":"admin","vpc_security_group_ids":["aws_security_group.default.id"]},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"backup_window":true,"ca_cert_identifier":true,"character_set_name":true,"endpoint":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"maintenance_window":true,"monitoring_role_arn":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"status":true,"storage_type":true,"tags":{},"timezone":true,"vpc_security_group_ids":[false]}}},{"address":"aws_db_option_group.default","mode":"managed","type":"aws_db_option_group","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"engine_name":"mysql","major_engine_version":"8.0","name":"og-167389268608-acme-dev","option":[],"option_group_description":"Terraform OG","tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-og"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"option":[],"tags":{}}}},{"address":"aws_db_parameter_group.default","mode":"managed","type":"aws_db_parameter_group","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Terraform PG","family":"mysql8.0","name":"pg-167389268608-acme-dev","parameter":[{"apply_method":"immediate","name":"character_set_client","value":"utf8"},{"apply_method":"immediate","name":"character_set_server","value":"utf8"}],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-pg"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"parameter":[{},{}],"tags":{}}}},{"address":"aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Terraform DB Subnet Group","name":"sg-167389268608-acme-dev","subnet_ids":["aws_subnet.web_subnet.id","aws_subnet.web_subnet2.id"],"tags":{"Environment":"167389268608-acme-dev","Name":"sg-167389268608-acme-dev"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":[false,false],"tags":{}}}},{"address":"aws_ebs_snapshot.example_snapshot","mode":"managed","type":"aws_ebs_snapshot","name":"example_snapshot","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"167389268608-acme-dev-ebs-snapshot","tags":{"Name":"167389268608-acme-dev-ebs-snapshot"},"timeouts":null,"volume_id":"aws_ebs_volume.web_host_storage.id"},"after_unknown":{"arn":true,"data_encryption_key_id":true,"encrypted":true,"id":true,"kms_key_id":true,"owner_alias":true,"owner_id":true,"tags":{},"volume_size":true}}},{"address":"aws_ebs_volume.web_host_storage","mode":"managed","type":"aws_ebs_volume","name":"web_host_storage","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":"us-west-2a","multi_attach_enabled":null,"outpost_arn":null,"size":1,"tags":{"Name":"167389268608-acme-dev-ebs"}},"after_unknown":{"arn":true,"encrypted":true,"id":true,"iops":true,"kms_key_id":true,"snapshot_id":true,"tags":{},"type":true}}},{"address":"aws_ecr_repository.repository","mode":"managed","type":"aws_ecr_repository","name":"repository","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"image_scanning_configuration":[],"image_tag_mutability":"MUTABLE","name":"167389268608-acme-dev-repository","tags":{"Name":"167389268608-acme-dev-repository"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[],"id":true,"image_scanning_configuration":[],"registry_id":true,"repository_url":true,"tags":{}}}},{"address":"aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"enabled_cluster_log_types":null,"encryption_config":[],"kubernetes_network_config":[],"name":"167389268608-acme-dev-eks","role_arn":"aws_iam_role.iam_for_eks.arn","tags":null,"timeouts":null,"vpc_config":[{"cluster_security_group_id":null,"endpoint_private_access":true,"endpoint_public_access":null,"public_access_cidrs":["0.0.0.0/0"],"security_group_ids":null,"subnet_ids":["aws_subnet.eks_subnet1.id","aws_subnet.eks_subnet2.id"],"vpc_id":null}]},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"encryption_config":[],"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":[],"platform_version":true,"status":true,"version":true,"vpc_config":[{"public_access_cidrs":[false],"subnet_ids":[false,false]}]}}},{"address":"aws_elasticsearch_domain.monitoring-framework","mode":"managed","type":"aws_elasticsearch_domain","name":"monitoring-framework","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"advanced_security_options":[],"cluster_config":[{"dedicated_master_count":1,"dedicated_master_enabled":false,"dedicated_master_type":"m4.large.elasticsearch","instance_count":1,"instance_type":"t2.small.elasticsearch","warm_count":null,"warm_enabled":null,"warm_type":null,"zone_awareness_config":[],"zone_awareness_enabled":null}],"cognito_options":[],"domain_endpoint_options":[],"domain_name":"tg-dev-es","ebs_options":[{"ebs_enabled":true,"iops":null,"volume_size":30,"volume_type":null}],"elasticsearch_version":"2.3","encrypt_at_rest":[],"log_publishing_options":[],"node_to_node_encryption":[],"snapshot_options":[],"tags":null,"timeouts":null,"vpc_options":[]},"after_unknown":{"access_policies":true,"advanced_options":true,"advanced_security_options":[],"arn":true,"cluster_config":[{"zone_awareness_config":[]}],"cognito_options":[],"domain_endpoint_options":[],"domain_id":true,"ebs_options":[{}],"encrypt_at_rest":[],"endpoint":true,"id":true,"kibana_endpoint":true,"log_publishing_options":[],"node_to_node_encryption":[],"snapshot_options":[],"vpc_options":[]}}},{"address":"aws_elasticsearch_domain_policy.monitoring-framework-policy","mode":"managed","type":"aws_elasticsearch_domain_policy","name":"monitoring-framework-policy","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"access_policies":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      }\n    }\n  ]\n}","domain_name":"tg-dev-es"},"after_unknown":{"id":true}}},{"address":"aws_elb.weblb","mode":"managed","type":"aws_elb","name":"weblb","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"connection_draining":true,"connection_draining_timeout":400,"cross_zone_load_balancing":true,"health_check":[{"healthy_threshold":2,"interval":30,"target":"HTTP:8000/","timeout":3,"unhealthy_threshold":2}],"idle_timeout":400,"instances":["aws_instance.web_host.id"],"listener":[{"instance_port":8000,"instance_protocol":"http","lb_port":80,"lb_protocol":"http","ssl_certificate_id":null}],"name":"weblb-terraform-elb","name_prefix":null,"security_groups":["aws_security_group.web-node.id"],"subnets":["aws_subnet.web_subnet.id"],"tags":{"Name":"foobar-terraform-elb"}},"after_unknown":{"access_logs":[],"arn":true,"availability_zones":true,"dns_name":true,"health_check":[{}],"id":true,"instances":[false],"internal":true,"listener":[{}],"security_groups":[false],"source_security_group":true,"source_security_group_id":true,"subnets":[false],"tags":{},"zone_id":true}}},{"address":"aws_flow_log.vpcflowlogs","mode":"managed","type":"aws_flow_log","name":"vpcflowlogs","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"eni_id":null,"iam_role_arn":null,"log_destination":"aws_s3_bucket.flowbucket.arn","log_destination_type":"s3","max_aggregation_interval":600,"subnet_id":null,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-flowlogs"},"traffic_type":"ALL","vpc_id":"aws_vpc.web_vpc.id"},"after_unknown":{"arn":true,"id":true,"log_format":true,"log_group_name":true,"tags":{}}}},{"address":"aws_iam_access_key.user","mode":"managed","type":"aws_iam_access_key","name":"user","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"pgp_key":null,"user":"167389268608-acme-dev-user"},"after_unknown":{"encrypted_secret":true,"id":true,"key_fingerprint":true,"secret":true,"ses_smtp_password_v4":true,"status":true}}},{"address":"aws_iam_instance_profile.ec2profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2profile","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"167389268608-acme-dev-profile","name_prefix":null,"path":"/","role":"167389268608-acme-dev-role"},"after_unknown":{"arn":true,"create_date":true,"id":true,"unique_id":true}}},{"address":"aws_iam_role.ec2role","mode":"managed","type":"aws_iam_role","name":"ec2role","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": \"sts:AssumeRole\",\n            \"Principal\": {\n               \"Service\": \"ec2.amazonaws.com\"\n            },\n            \"Effect\": \"Allow\",\n            \"Sid\": \"\"\n        }\n    ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"167389268608-acme-dev-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-role"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"tags":{},"unique_id":true}}},{"address":"aws_iam_role.iam_for_eks","mode":"managed","type":"aws_iam_role","name":"iam_for_eks","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"167389268608-acme-dev-iam-for-eks","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"unique_id":true}}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"167389268608-acme-dev-analysis-lambda","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"unique_id":true}}},{"address":"aws_iam_role_policy.ec2policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2policy","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"167389268608-acme-dev-policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","role":"aws_iam_role.ec2role.id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSClusterPolicy","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"167389268608-acme-dev-iam-for-eks"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSServicePolicy","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy","role":"167389268608-acme-dev-iam-for-eks"},"after_unknown":{"id":true}}},{"address":"aws_iam_user.user","mode":"managed","type":"aws_iam_user","name":"user","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":true,"name":"167389268608-acme-dev-user","path":"/","permissions_boundary":null,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-user"}},"after_unknown":{"arn":true,"id":true,"tags":{},"unique_id":true}}},{"address":"aws_iam_user_policy.userpolicy","mode":"managed","type":"aws_iam_user_policy","name":"userpolicy","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"excess_policy","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n","user":"167389268608-acme-dev-user"},"after_unknown":{"id":true}}},{"address":"aws_instance.db_app","mode":"managed","type":"aws_instance","name":"db_app","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-027e033da7800f292","credit_specification":[],"disable_api_termination":null,"ebs_block_device":[],"ebs_optimized":null,"enclave_options":[],"ephemeral_block_device":[],"get_password_data":false,"hibernation":null,"iam_instance_profile":"167389268608-acme-dev-profile","instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","metadata_options":[],"monitoring":null,"network_interface":[],"root_block_device":[],"source_dest_check":true,"subnet_id":"aws_subnet.web_subnet.id","tags":{"Name":"167389268608-acme-dev-dbapp"},"timeouts":null,"user_data":"#! /bin/bash\n### Config from https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateWebServer.html\nsudo yum -y update\nsudo yum -y install httpd php php-mysqlnd\nsudo systemctl enable httpd \nsudo systemctl start httpd\n\nsudo mkdir /var/www/inc\ncat \u003c\u003c EnD \u003e /tmp/dbinfo.inc\n\u003c?php\ndefine('DB_SERVER', 'aws_db_instance.default.endpoint');\ndefine('DB_USERNAME', 'admin');\ndefine('DB_PASSWORD', 'Aa1234321Bb');\ndefine('DB_DATABASE', 'db1');\n?\u003e\nEnD\nsudo mv /tmp/dbinfo.inc /var/www/inc \nsudo chown root:root /var/www/inc/dbinfo.inc\n\ncat \u003c\u003c EnD \u003e /tmp/index.php\n\u003c?php include \"../inc/dbinfo.inc\"; ?\u003e\n\u003chtml\u003e\n\u003cbody\u003e\n\u003ch1\u003eSample page\u003c/h1\u003e\n\u003c?php\n\n  /* Connect to MySQL and select the database. */\n  \\$connection = mysqli_connect(DB_SERVER, DB_USERNAME, DB_PASSWORD);\n\n  if (mysqli_connect_errno()) echo \"Failed to connect to MySQL: \" . mysqli_connect_error();\n\n  \\$database = mysqli_select_db(\\$connection, DB_DATABASE);\n\n  /* Ensure that the EMPLOYEES table exists. */\n  VerifyEmployeesTable(\\$connection, DB_DATABASE);\n\n  /* If input fields are populated, add a row to the EMPLOYEES table. */\n  \\$employee_name = htmlentities(\\$_POST['NAME']);\n  \\$employee_address = htmlentities(\\$_POST['ADDRESS']);\n\n  if (strlen(\\$employee_name) || strlen(\\$employee_address)) {\n    AddEmployee(\\$connection, \\$employee_name, \\$employee_address);\n  }\n?\u003e\n\n\u003c!-- Input form --\u003e\n\u003cform action=\"\u003c?PHP echo \\$_SERVER['SCRIPT_NAME'] ?\u003e\" method=\"POST\"\u003e\n  \u003ctable border=\"0\"\u003e\n    \u003ctr\u003e\n      \u003ctd\u003eNAME\u003c/td\u003e\n      \u003ctd\u003eADDRESS\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd\u003e\n        \u003cinput type=\"text\" name=\"NAME\" maxlength=\"45\" size=\"30\" /\u003e\n      \u003c/td\u003e\n      \u003ctd\u003e\n        \u003cinput type=\"text\" name=\"ADDRESS\" maxlength=\"90\" size=\"60\" /\u003e\n      \u003c/td\u003e\n      \u003ctd\u003e\n        \u003cinput type=\"submit\" value=\"Add Data\" /\u003e\n      \u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/table\u003e\n\u003c/form\u003e\n\n\u003c!-- Display table data. --\u003e\n\u003ctable border=\"1\" cellpadding=\"2\" cellspacing=\"2\"\u003e\n  \u003ctr\u003e\n    \u003ctd\u003eID\u003c/td\u003e\n    \u003ctd\u003eNAME\u003c/td\u003e\n    \u003ctd\u003eADDRESS\u003c/td\u003e\n  \u003c/tr\u003e\n\n\u003c?php\n\n\\$result = mysqli_query(\\$connection, \"SELECT * FROM EMPLOYEES\");\n\nwhile(\\$query_data = mysqli_fetch_row(\\$result)) {\n  echo \"\u003ctr\u003e\";\n  echo \"\u003ctd\u003e\",\\$query_data[0], \"\u003c/td\u003e\",\n       \"\u003ctd\u003e\",\\$query_data[1], \"\u003c/td\u003e\",\n       \"\u003ctd\u003e\",\\$query_data[2], \"\u003c/td\u003e\";\n  echo \"\u003c/tr\u003e\";\n}\n?\u003e\n\n\u003c/table\u003e\n\n\u003c!-- Clean up. --\u003e\n\u003c?php\n\n  mysqli_free_result(\\$result);\n  mysqli_close(\\$connection);\n\n?\u003e\n\n\u003c/body\u003e\n\u003c/html\u003e\n\n\n\u003c?php\n\n/* Add an employee to the table. */\nfunction AddEmployee(\\$connection, \\$name, \\$address) {\n   \\$n = mysqli_real_escape_string(\\$connection, \\$name);\n   \\$a = mysqli_real_escape_string(\\$connection, \\$address);\n\n   \\$query = \"INSERT INTO EMPLOYEES (NAME, ADDRESS) VALUES ('\\$n', '\\$a');\";\n\n   if(!mysqli_query(\\$connection, \\$query)) echo(\"\u003cp\u003eError adding employee data.\u003c/p\u003e\");\n}\n\n/* Check whether the table exists and, if not, create it. */\nfunction VerifyEmployeesTable(\\$connection, \\$dbName) {\n  if(!TableExists(\"EMPLOYEES\", \\$connection, \\$dbName))\n  {\n     \\$query = \"CREATE TABLE EMPLOYEES (\n         ID int(11) UNSIGNED AUTO_INCREMENT PRIMARY KEY,\n         NAME VARCHAR(45),\n         ADDRESS VARCHAR(90)\n       )\";\n\n     if(!mysqli_query(\\$connection, \\$query)) echo(\"\u003cp\u003eError creating table.\u003c/p\u003e\");\n  }\n}\n\n/* Check for the existence of a table. */\nfunction TableExists(\\$tableName, \\$connection, \\$dbName) {\n  \\$t = mysqli_real_escape_string(\\$connection, \\$tableName);\n  \\$d = mysqli_real_escape_string(\\$connection, \\$dbName);\n\n  \\$checktable = mysqli_query(\\$connection,\n      \"SELECT TABLE_NAME FROM information_schema.TABLES WHERE TABLE_NAME = '\\$t' AND TABLE_SCHEMA = '\\$d'\");\n\n  if(mysqli_num_rows(\\$checktable) \u003e 0) return true;\n\n  return false;\n}\n?\u003e               \nEnD\n\nsudo mv /tmp/index.php /var/www/html\nsudo chown root:root /var/www/html/index.php\n\n\n\n","user_data_base64":null,"volume_tags":null,"vpc_security_group_ids":["aws_security_group.web-node.id"]},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"host_id":true,"id":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":[],"network_interface":[],"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":[],"secondary_private_ips":true,"security_groups":true,"tags":{},"tenancy":true,"vpc_security_group_ids":[false]}}},{"address":"aws_instance.web_host","mode":"managed","type":"aws_instance","name":"web_host","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-09a5b0b7edf08843d","credit_specification":[],"disable_api_termination":null,"ebs_block_device":[],"ebs_optimized":null,"enclave_options":[],"ephemeral_block_device":[],"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_initiated_shutdown_behavior":null,"instance_type":"t2.nano","metadata_options":[],"monitoring":null,"network_interface":[],"root_block_device":[],"source_dest_check":true,"subnet_id":"aws_subnet.web_subnet.id","tags":{"Name":"167389268608-acme-dev-ec2"},"timeouts":null,"user_data":"#! /bin/bash\nsudo apt-get update\nsudo apt-get install -y apache2\nsudo systemctl start apache2\nsudo systemctl enable apache2\nexport AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMAAA\nexport AWS_SECRET_ACCESS_KEY=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\nexport AWS_DEFAULT_REGION=us-west-2\necho \"\u003ch1\u003eDeployed via Terraform\u003c/h1\u003e\" | sudo tee /var/www/html/index.html\n","user_data_base64":null,"volume_tags":null,"vpc_security_group_ids":["aws_security_group.web-node.id"]},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"host_id":true,"id":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":[],"network_interface":[],"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":[],"secondary_private_ips":true,"security_groups":true,"tags":{},"tenancy":true,"vpc_security_group_ids":[false]}}},{"address":"aws_internet_gateway.web_igw","mode":"managed","type":"aws_internet_gateway","name":"web_igw","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"167389268608-acme-dev-igw"},"vpc_id":"aws_vpc.web_vpc.id"},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{}}}},{"address":"aws_kms_alias.logs_key_alias","mode":"managed","type":"aws_kms_alias","name":"logs_key_alias","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"name":"alias/167389268608-acme-dev-logs-bucket-key","name_prefix":null,"target_key_id":"aws_kms_key.logs_key.key_id"},"after_unknown":{"arn":true,"id":true,"target_key_arn":true}}},{"address":"aws_kms_key.logs_key","mode":"managed","type":"aws_kms_key","name":"logs_key","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"167389268608-acme-dev-logs bucket key","enable_key_rotation":false,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"policy":true}}},{"address":"aws_lambda_function.analysis_lambda","mode":"managed","type":"aws_lambda_function","name":"analysis_lambda","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[{"variables":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}],"file_system_config":[],"filename":"resources/lambda_function_payload.zip","function_name":"167389268608-acme-dev-analysis","handler":"exports.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"reserved_concurrent_executions":-1,"role":"aws_iam_role.iam_for_lambda.arn","runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"source_code_hash":"asdfasdf","tags":null,"timeout":3,"timeouts":null,"tracing_config":[],"vpc_config":[]},"after_unknown":{"arn":true,"dead_letter_config":[],"environment":[{"variables":{}}],"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"qualified_arn":true,"signing_job_arn":true,"signing_profile_version_arn":true,"source_code_size":true,"tracing_config":[],"version":true,"vpc_config":[]}}},{"address":"aws_neptune_cluster.default","mode":"managed","type":"aws_neptune_cluster","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"apply_immediately":true,"backup_retention_period":5,"cluster_identifier":"neptunedb1","deletion_protection":null,"enable_cloudwatch_logs_exports":null,"engine":"neptune","final_snapshot_identifier":null,"iam_database_authentication_enabled":false,"iam_roles":null,"neptune_cluster_parameter_group_name":"default.neptune1","port":8182,"preferred_backup_window":"07:00-09:00","replication_source_identifier":null,"skip_final_snapshot":true,"snapshot_identifier":null,"storage_encrypted":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"availability_zones":true,"cluster_identifier_prefix":true,"cluster_members":true,"cluster_resource_id":true,"endpoint":true,"engine_version":true,"hosted_zone_id":true,"id":true,"kms_key_arn":true,"neptune_subnet_group_name":true,"preferred_maintenance_window":true,"reader_endpoint":true,"vpc_security_group_ids":true}}},{"address":"aws_neptune_cluster_instance.default[0]","mode":"managed","type":"aws_neptune_cluster_instance","name":"default","index":0,"provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"apply_immediately":true,"auto_minor_version_upgrade":true,"cluster_identifier":"aws_neptune_cluster.default.id","engine":"neptune","instance_class":"db.t3.medium","neptune_parameter_group_name":"default.neptune1","port":8182,"promotion_tier":0,"publicly_accessible":false,"tags":null,"timeouts":null},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"dbi_resource_id":true,"endpoint":true,"engine_version":true,"id":true,"identifier":true,"identifier_prefix":true,"kms_key_arn":true,"neptune_subnet_group_name":true,"preferred_backup_window":true,"preferred_maintenance_window":true,"storage_encrypted":true,"writer":true}}},{"address":"aws_neptune_cluster_snapshot.default","mode":"managed","type":"aws_neptune_cluster_snapshot","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"db_cluster_identifier":"aws_neptune_cluster.default.id","db_cluster_snapshot_identifier":"resourcetestsnapshot1","timeouts":null},"after_unknown":{"allocated_storage":true,"availability_zones":true,"db_cluster_snapshot_arn":true,"engine":true,"engine_version":true,"id":true,"kms_key_id":true,"license_model":true,"port":true,"snapshot_type":true,"source_db_cluster_snapshot_arn":true,"status":true,"storage_encrypted":true,"vpc_id":true}}},{"address":"aws_network_interface.web-eni","mode":"managed","type":"aws_network_interface","name":"web-eni","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"attachment":[],"description":null,"private_ips":["172.16.10.100"],"source_dest_check":true,"subnet_id":"aws_subnet.web_subnet.id","tags":{"Name":"167389268608-acme-dev-primary_network_interface"}},"after_unknown":{"attachment":[],"id":true,"ipv6_address_count":true,"ipv6_addresses":true,"mac_address":true,"outpost_arn":true,"private_dns_name":true,"private_ip":true,"private_ips":[false],"private_ips_count":true,"security_groups":true,"tags":{}}}},{"address":"aws_route_table.web_rtb","mode":"managed","type":"aws_route_table","name":"web_rtb","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"167389268608-acme-dev-rtb"},"vpc_id":"aws_vpc.web_vpc.id"},"after_unknown":{"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{}}}},{"address":"aws_route_table_association.rtbassoc","mode":"managed","type":"aws_route_table_association","name":"rtbassoc","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"aws_route_table.web_rtb.id","subnet_id":"aws_subnet.web_subnet.id"},"after_unknown":{"id":true}}},{"address":"aws_route_table_association.rtbassoc2","mode":"managed","type":"aws_route_table_association","name":"rtbassoc2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"aws_route_table.web_rtb.id","subnet_id":"aws_subnet.web_subnet2.id"},"after_unknown":{"id":true}}},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"public-read","bucket":"167389268608-acme-dev-data","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-data"},"versioning":[],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"tags":{},"versioning":[],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket.data_science","mode":"managed","type":"aws_s3_bucket","name":"data_science","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"167389268608-acme-dev-data-science","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[{"target_bucket":"aws_s3_bucket.logs.id","target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"versioning":[{"enabled":true,"mfa_delete":null}],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[{}],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"versioning":[{}],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket.financials","mode":"managed","type":"aws_s3_bucket","name":"financials","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"167389268608-acme-dev-financials","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-financials"},"versioning":[],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"tags":{},"versioning":[],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket.flowbucket","mode":"managed","type":"aws_s3_bucket","name":"flowbucket","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"167389268608-acme-dev-flowlogs","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-flowlogs"},"versioning":[],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"tags":{},"versioning":[],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket.logs","mode":"managed","type":"aws_s3_bucket","name":"logs","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"log-delivery-write","bucket":"167389268608-acme-dev-logs","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"aws_kms_key.logs_key.arn","sse_algorithm":"aws:kms"}]}]}],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-logs"},"versioning":[{"enabled":true,"mfa_delete":null}],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"versioning":[{}],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket.operations","mode":"managed","type":"aws_s3_bucket","name":"operations","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"167389268608-acme-dev-operations","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-operations"},"versioning":[{"enabled":true,"mfa_delete":null}],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"tags":{},"versioning":[{}],"website":[],"website_domain":true,"website_endpoint":true}}},{"address":"aws_s3_bucket_object.data_object","mode":"managed","type":"aws_s3_bucket_object","name":"data_object","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"aws_s3_bucket.data.id","cache_control":null,"content":null,"content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"force_destroy":false,"key":"customer-master.xlsx","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":"resources/customer-master.xlsx","tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-customer-master"},"website_redirect":null},"after_unknown":{"content_type":true,"etag":true,"id":true,"kms_key_id":true,"server_side_encryption":true,"storage_class":true,"tags":{},"version_id":true}}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"167389268608-acme-dev-rds-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"Environment":"167389268608-acme-dev","Name":"167389268608-acme-dev-rds-sg"},"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"owner_id":true,"tags":{}}}},{"address":"aws_security_group.web-node","mode":"managed","type":"aws_security_group","name":"web-node","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"description":"167389268608-acme-dev Security Group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}],"name":"167389268608-acme-dev-sg","name_prefix":null,"revoke_rules_on_delete":false,"tags":null,"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false]}],"id":true,"ingress":[{"cidr_blocks":[false]},{"cidr_blocks":[false]}],"owner_id":true}}},{"address":"aws_security_group_rule.egress","mode":"managed","type":"aws_security_group_rule","name":"egress","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_group_id":"aws_security_group.default.id","self":false,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"source_security_group_id":true}}},{"address":"aws_security_group_rule.ingress","mode":"managed","type":"aws_security_group_rule","name":"ingress","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["172.16.0.0/16"],"description":null,"from_port":3306,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"aws_security_group.default.id","self":false,"to_port":3306,"type":"ingress"},"after_unknown":{"cidr_blocks":[false],"id":true,"source_security_group_id":true}}},{"address":"aws_subnet.eks_subnet1","mode":"managed","type":"aws_subnet","name":"eks_subnet1","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"10.10.10.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-eks-subnet","kubernetes.io/cluster/167389268608-acme-dev-eks":"shared"},"timeouts":null,"vpc_id":"aws_vpc.eks_vpc.id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{}}}},{"address":"aws_subnet.eks_subnet2","mode":"managed","type":"aws_subnet","name":"eks_subnet2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"10.10.11.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-eks-subnet2","kubernetes.io/cluster/167389268608-acme-dev-eks":"shared"},"timeouts":null,"vpc_id":"aws_vpc.eks_vpc.id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{}}}},{"address":"aws_subnet.web_subnet","mode":"managed","type":"aws_subnet","name":"web_subnet","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2a","cidr_block":"172.16.10.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-subnet"},"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{}}}},{"address":"aws_subnet.web_subnet2","mode":"managed","type":"aws_subnet","name":"web_subnet2","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-west-2b","cidr_block":"172.16.11.0/24","ipv6_cidr_block":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"167389268608-acme-dev-subnet2"},"timeouts":null,"vpc_id":"aws_vpc.web_vpc.id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{}}}},{"address":"aws_volume_attachment.ebs_att","mode":"managed","type":"aws_volume_attachment","name":"ebs_att","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"device_name":"/dev/sdh","force_detach":null,"instance_id":"aws_instance.web_host.id","skip_destroy":null,"volume_id":"aws_ebs_volume.web_host_storage.id"},"after_unknown":{"id":true}}},{"address":"aws_vpc.eks_vpc","mode":"managed","type":"aws_vpc","name":"eks_vpc","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.10.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"167389268608-acme-dev-eks-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{}}}},{"address":"aws_vpc.web_vpc","mode":"managed","type":"aws_vpc","name":"web_vpc","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"172.16.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"167389268608-acme-dev-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{}}}},{"address":"null_resource.push_image","mode":"managed","type":"null_resource","name":"push_image","provider_name":"null","change":{"actions":["create"],"before":null,"after":{"triggers":null},"after_unknown":{"id":true}}}],"output_changes":{"db_app_public_dns":{"actions":["create"],"before":null,"after":"aws_instance.db_app.public_dns","after_unknown":false},"db_endpoint":{"actions":["create"],"before":null,"after":"aws_db_instance.default.endpoint","after_unknown":false},"ec2_public_dns":{"actions":["create"],"before":null,"after":"aws_instance.web_host.public_dns","after_unknown":false},"endpoint":{"actions":["create"],"before":null,"after":"aws_eks_cluster.eks_cluster.endpoint","after_unknown":false},"kubeconfig-certificate-authority-data":{"actions":["create"],"before":null,"after_unknown":true},"public_subnet":{"actions":["create"],"before":null,"after":"aws_subnet.web_subnet.id","after_unknown":false},"public_subnet2":{"actions":["create"],"before":null,"after":"aws_subnet.web_subnet2.id","after_unknown":false},"secret":{"actions":["create"],"before":null,"after":"aws_iam_access_key.user.encrypted_secret","after_unknown":false},"username":{"actions":["create"],"before":null,"after":"167389268608-acme-dev-user","after_unknown":false},"vpc_id":{"actions":["create"],"before":null,"after":"aws_vpc.web_vpc.id","after_unknown":false}},"prior_state":{"format_version":"0.1","terraform_version":"0.12.29","values":{"root_module":{"resources":[{"address":"data.aws_ami.amazon-linux-2","mode":"data","type":"aws_ami","name":"amazon-linux-2","provider_name":"aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-west-2::image/ami-027e033da7800f292","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-036485f7aaef475e2","volume_size":"8","volume_type":"standard"},"no_device":"","virtual_name":""}],"creation_date":"2021-01-26T07:37:53.000Z","description":"Amazon Linux 2 AMI 2.0.20210126.0 x86_64 HVM ebs","executable_users":null,"filter":[{"name":"name","values":["amzn2-ami-hvm-*-x86_64-ebs"]},{"name":"owner-alias","values":["amazon"]}],"hypervisor":"xen","id":"ami-027e033da7800f292","image_id":"ami-027e033da7800f292","image_location":"amazon/amzn2-ami-hvm-2.0.20210126.0-x86_64-ebs","image_owner_alias":"amazon","image_type":"machine","kernel_id":null,"most_recent":true,"name":"amzn2-ami-hvm-2.0.20210126.0-x86_64-ebs","name_regex":null,"owner_id":"137112412989","owners":["amazon"],"platform":null,"product_codes":[],"public":true,"ramdisk_id":null,"root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-036485f7aaef475e2","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"virtualization_type":"hvm"}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"167389268608","arn":"arn:aws:sts::167389268608:assumed-role/AWSReservedSSO_admin_in_develop_7b13d69800adca00/y@indeni.com","id":"167389268608","user_id":"AROASN6JNRKAJ56VZ6FY7:y@indeni.com"}},{"address":"data.aws_iam_policy_document.iam_policy_eks","mode":"data","type":"aws_iam_policy_document","name":"iam_policy_eks","provider_name":"aws","schema_version":0,"values":{"id":"189502314","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["eks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.policy","mode":"data","type":"aws_iam_policy_document","name":"policy","provider_name":"aws","schema_version":0,"values":{"id":"3931805674","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"es:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["es:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["*"],"type":"AWS"}],"resources":["*"],"sid":""}],"version":"2012-10-17"}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"profile":{"references":["var.profile"]},"region":{"references":["var.region"]}}},"aws.plain_text_access_keys_provider":{"name":"aws","alias":"plain_text_access_keys_provider","expressions":{"access_key":{"constant_value":"AKIAIOSFODNN7EXAMPLE"},"region":{"constant_value":"us-west-1"},"secret_key":{"constant_value":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}}},"root_module":{"outputs":{"db_app_public_dns":{"expression":{"references":["aws_instance.db_app"]},"description":"DB Public DNS name"},"db_endpoint":{"expression":{"references":["aws_db_instance.default"]},"description":"DB Endpoint"},"ec2_public_dns":{"expression":{"references":["aws_instance.web_host"]},"description":"Web Host Public DNS name"},"endpoint":{"expression":{"references":["aws_eks_cluster.eks_cluster"]}},"kubeconfig-certificate-authority-data":{"expression":{"references":["aws_eks_cluster.eks_cluster"]}},"public_subnet":{"expression":{"references":["aws_subnet.web_subnet"]},"description":"The ID of the Public subnet"},"public_subnet2":{"expression":{"references":["aws_subnet.web_subnet2"]},"description":"The ID of the Public subnet"},"secret":{"expression":{"references":["aws_iam_access_key.user"]}},"username":{"expression":{"references":["aws_iam_user.user"]}},"vpc_id":{"expression":{"references":["aws_vpc.web_vpc"]},"description":"The ID of the VPC"}},"resources":[{"address":"aws_db_instance.default","mode":"managed","type":"aws_db_instance","name":"default","provider_config_key":"aws","expressions":{"allocated_storage":{"constant_value":"20"},"apply_immediately":{"constant_value":true},"backup_retention_period":{"constant_value":0},"db_subnet_group_name":{"references":["aws_db_subnet_group.default"]},"engine":{"constant_value":"mysql"},"engine_version":{"constant_value":"8.0"},"identifier":{"references":["local.resource_prefix"]},"instance_class":{"constant_value":"db.t3.micro"},"monitoring_interval":{"constant_value":0},"multi_az":{"constant_value":false},"name":{"references":["var.dbname"]},"option_group_name":{"references":["aws_db_option_group.default"]},"parameter_group_name":{"references":["aws_db_parameter_group.default"]},"password":{"references":["var.password"]},"publicly_accessible":{"constant_value":true},"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":false},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"username":{"constant_value":"admin"},"vpc_security_group_ids":{"references":["aws_security_group.default"]}},"schema_version":1,"raw_data":{"FileName":"db-app.tf","StartLine":1,"EndLine":32}},{"address":"aws_db_option_group.default","mode":"managed","type":"aws_db_option_group","name":"default","provider_config_key":"aws","expressions":{"engine_name":{"constant_value":"mysql"},"major_engine_version":{"constant_value":"8.0"},"name":{"references":["local.resource_prefix"]},"option_group_description":{"constant_value":"Terraform OG"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"db-app.tf","StartLine":34,"EndLine":44}},{"address":"aws_db_parameter_group.default","mode":"managed","type":"aws_db_parameter_group","name":"default","provider_config_key":"aws","expressions":{"description":{"constant_value":"Terraform PG"},"family":{"constant_value":"mysql8.0"},"name":{"references":["local.resource_prefix"]},"parameter":[{"apply_method":{"constant_value":"immediate"},"name":{"constant_value":"character_set_client"},"value":{"constant_value":"utf8"}},{"apply_method":{"constant_value":"immediate"},"name":{"constant_value":"character_set_server"},"value":{"constant_value":"utf8"}}],"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"db-app.tf","StartLine":46,"EndLine":67}},{"address":"aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_config_key":"aws","expressions":{"description":{"constant_value":"Terraform DB Subnet Group"},"name":{"references":["local.resource_prefix"]},"subnet_ids":{"references":["aws_subnet.web_subnet","aws_subnet.web_subnet2"]},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"db-app.tf","StartLine":69,"EndLine":78}},{"address":"aws_ebs_snapshot.example_snapshot","mode":"managed","type":"aws_ebs_snapshot","name":"example_snapshot","provider_config_key":"aws","expressions":{"description":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix"]},"volume_id":{"references":["aws_ebs_volume.web_host_storage"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":35,"EndLine":42}},{"address":"aws_ebs_volume.web_host_storage","mode":"managed","type":"aws_ebs_volume","name":"web_host_storage","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone"]},"size":{"constant_value":1},"tags":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":25,"EndLine":33}},{"address":"aws_ecr_repository.repository","mode":"managed","type":"aws_ecr_repository","name":"repository","provider_config_key":"aws","expressions":{"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"ecr.tf","StartLine":1,"EndLine":8}},{"address":"aws_eks_cluster.eks_cluster","mode":"managed","type":"aws_eks_cluster","name":"eks_cluster","provider_config_key":"aws","expressions":{"name":{"references":["local.eks_name"]},"role_arn":{"references":["aws_iam_role.iam_for_eks"]},"vpc_config":[{"endpoint_private_access":{"constant_value":true},"public_access_cidrs":{"constant_value":["0.0.0.0/0"]},"subnet_ids":{"references":["aws_subnet.eks_subnet1","aws_subnet.eks_subnet2"]}}]},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy"],"raw_data":{"FileName":"eks.tf","StartLine":64,"EndLine":78}},{"address":"aws_elasticsearch_domain.monitoring-framework","mode":"managed","type":"aws_elasticsearch_domain","name":"monitoring-framework","provider_config_key":"aws","expressions":{"cluster_config":[{"dedicated_master_count":{"constant_value":1},"dedicated_master_enabled":{"constant_value":false},"dedicated_master_type":{"constant_value":"m4.large.elasticsearch"},"instance_count":{"constant_value":1},"instance_type":{"constant_value":"t2.small.elasticsearch"}}],"domain_name":{"references":["var.environment"]},"ebs_options":[{"ebs_enabled":{"constant_value":true},"volume_size":{"constant_value":30}}],"elasticsearch_version":{"constant_value":"2.3"}},"schema_version":0,"raw_data":{"FileName":"es.tf","StartLine":1,"EndLine":17}},{"address":"aws_elasticsearch_domain_policy.monitoring-framework-policy","mode":"managed","type":"aws_elasticsearch_domain_policy","name":"monitoring-framework-policy","provider_config_key":"aws","expressions":{"access_policies":{"references":["data.aws_iam_policy_document.policy"]},"domain_name":{"references":["aws_elasticsearch_domain.monitoring-framework"]}},"schema_version":0,"raw_data":{"FileName":"es.tf","StartLine":30,"EndLine":33}},{"address":"aws_elb.weblb","mode":"managed","type":"aws_elb","name":"weblb","provider_config_key":"aws","expressions":{"connection_draining":{"constant_value":true},"connection_draining_timeout":{"constant_value":400},"cross_zone_load_balancing":{"constant_value":true},"health_check":[{"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"target":{"constant_value":"HTTP:8000/"},"timeout":{"constant_value":3},"unhealthy_threshold":{"constant_value":2}}],"idle_timeout":{"constant_value":400},"instances":{"references":["aws_instance.web_host"]},"listener":[{"instance_port":{"constant_value":8000},"instance_protocol":{"constant_value":"http"},"lb_port":{"constant_value":80},"lb_protocol":{"constant_value":"http"}}],"name":{"constant_value":"weblb-terraform-elb"},"security_groups":{"references":["aws_security_group.web-node"]},"subnets":{"references":["aws_subnet.web_subnet"]},"tags":{"constant_value":{"Name":"foobar-terraform-elb"}}},"schema_version":0,"raw_data":{"FileName":"elb.tf","StartLine":2,"EndLine":31}},{"address":"aws_flow_log.vpcflowlogs","mode":"managed","type":"aws_flow_log","name":"vpcflowlogs","provider_config_key":"aws","expressions":{"log_destination":{"references":["aws_s3_bucket.flowbucket"]},"log_destination_type":{"constant_value":"s3"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"traffic_type":{"constant_value":"ALL"},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":159,"EndLine":169}},{"address":"aws_iam_access_key.user","mode":"managed","type":"aws_iam_access_key","name":"user","provider_config_key":"aws","expressions":{"user":{"references":["aws_iam_user.user"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":12,"EndLine":14}},{"address":"aws_iam_instance_profile.ec2profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2profile","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"role":{"references":["aws_iam_role.ec2role"]}},"schema_version":0,"raw_data":{"FileName":"db-app.tf","StartLine":110,"EndLine":113}},{"address":"aws_iam_role.ec2role","mode":"managed","type":"aws_iam_role","name":"ec2role","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": \"sts:AssumeRole\",\n            \"Principal\": {\n               \"Service\": \"ec2.amazonaws.com\"\n            },\n            \"Effect\": \"Allow\",\n            \"Sid\": \"\"\n        }\n    ]\n}\n"},"name":{"references":["local.resource_prefix"]},"path":{"constant_value":"/"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"db-app.tf","StartLine":115,"EndLine":139}},{"address":"aws_iam_role.iam_for_eks","mode":"managed","type":"aws_iam_role","name":"iam_for_eks","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.iam_policy_eks"]},"name":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"eks.tf","StartLine":18,"EndLine":21}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n"},"name":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"lambda.tf","StartLine":1,"EndLine":19}},{"address":"aws_iam_role_policy.ec2policy","mode":"managed","type":"aws_iam_role_policy","name":"ec2policy","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"ec2:*\",\n        \"rds:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"},"role":{"references":["aws_iam_role.ec2role"]}},"schema_version":0,"raw_data":{"FileName":"db-app.tf","StartLine":141,"EndLine":161}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSClusterPolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy"},"role":{"references":["aws_iam_role.iam_for_eks"]}},"schema_version":0,"raw_data":{"FileName":"eks.tf","StartLine":23,"EndLine":26}},{"address":"aws_iam_role_policy_attachment.policy_attachment-AmazonEKSServicePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attachment-AmazonEKSServicePolicy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonEKSServicePolicy"},"role":{"references":["aws_iam_role.iam_for_eks"]}},"schema_version":0,"raw_data":{"FileName":"eks.tf","StartLine":28,"EndLine":31}},{"address":"aws_iam_user.user","mode":"managed","type":"aws_iam_user","name":"user","provider_config_key":"aws","expressions":{"force_destroy":{"constant_value":true},"name":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":1,"EndLine":10}},{"address":"aws_iam_user_policy.userpolicy","mode":"managed","type":"aws_iam_user_policy","name":"userpolicy","provider_config_key":"aws","expressions":{"name":{"constant_value":"excess_policy"},"policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:*\",\n        \"s3:*\",\n        \"lambda:*\",\n        \"cloudwatch:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"},"user":{"references":["aws_iam_user.user"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":16,"EndLine":37}},{"address":"aws_instance.db_app","mode":"managed","type":"aws_instance","name":"db_app","provider_config_key":"aws","expressions":{"ami":{"references":["data.aws_ami.amazon-linux-2"]},"iam_instance_profile":{"references":["aws_iam_instance_profile.ec2profile"]},"instance_type":{"constant_value":"t2.nano"},"subnet_id":{"references":["aws_subnet.web_subnet"]},"tags":{"references":["local.resource_prefix"]},"user_data":{"references":["aws_db_instance.default","aws_db_instance.default","var.password","aws_db_instance.default"]},"vpc_security_group_ids":{"references":["aws_security_group.web-node"]}},"schema_version":1,"raw_data":{"FileName":"db-app.tf","StartLine":178,"EndLine":339}},{"address":"aws_instance.web_host","mode":"managed","type":"aws_instance","name":"web_host","provider_config_key":"aws","expressions":{"ami":{"references":["var.ami"]},"instance_type":{"constant_value":"t2.nano"},"subnet_id":{"references":["aws_subnet.web_subnet"]},"tags":{"references":["local.resource_prefix"]},"user_data":{"constant_value":"#! /bin/bash\nsudo apt-get update\nsudo apt-get install -y apache2\nsudo systemctl start apache2\nsudo systemctl enable apache2\nexport AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMAAA\nexport AWS_SECRET_ACCESS_KEY=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\nexport AWS_DEFAULT_REGION=us-west-2\necho \"\u003ch1\u003eDeployed via Terraform\u003c/h1\u003e\" | sudo tee /var/www/html/index.html\n"},"vpc_security_group_ids":{"references":["aws_security_group.web-node"]}},"schema_version":1,"raw_data":{"FileName":"ec2.tf","StartLine":1,"EndLine":23}},{"address":"aws_internet_gateway.web_igw","mode":"managed","type":"aws_internet_gateway","name":"web_igw","provider_config_key":"aws","expressions":{"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":112,"EndLine":118}},{"address":"aws_kms_alias.logs_key_alias","mode":"managed","type":"aws_kms_alias","name":"logs_key_alias","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"target_key_id":{"references":["aws_kms_key.logs_key"]}},"schema_version":0,"raw_data":{"FileName":"kms.tf","StartLine":8,"EndLine":11}},{"address":"aws_kms_key.logs_key","mode":"managed","type":"aws_kms_key","name":"logs_key","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"constant_value":7},"description":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"kms.tf","StartLine":1,"EndLine":6}},{"address":"aws_lambda_function.analysis_lambda","mode":"managed","type":"aws_lambda_function","name":"analysis_lambda","provider_config_key":"aws","expressions":{"environment":[{"variables":{"constant_value":{"access_key":"AKIAIOSFODNN7EXAMPLE","secret_key":"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"}}}],"filename":{"constant_value":"resources/lambda_function_payload.zip"},"function_name":{"references":["local.resource_prefix"]},"handler":{"constant_value":"exports.test"},"role":{"references":["aws_iam_role.iam_for_lambda"]},"runtime":{"constant_value":"nodejs12.x"},"source_code_hash":{"constant_value":"asdfasdf"}},"schema_version":0,"raw_data":{"FileName":"lambda.tf","StartLine":21,"EndLine":38}},{"address":"aws_neptune_cluster.default","mode":"managed","type":"aws_neptune_cluster","name":"default","provider_config_key":"aws","expressions":{"apply_immediately":{"constant_value":true},"backup_retention_period":{"constant_value":5},"cluster_identifier":{"references":["var.neptune-dbname"]},"engine":{"constant_value":"neptune"},"iam_database_authentication_enabled":{"constant_value":false},"preferred_backup_window":{"constant_value":"07:00-09:00"},"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":false}},"schema_version":0,"raw_data":{"FileName":"neptune.tf","StartLine":1,"EndLine":10}},{"address":"aws_neptune_cluster_instance.default","mode":"managed","type":"aws_neptune_cluster_instance","name":"default","provider_config_key":"aws","expressions":{"apply_immediately":{"constant_value":true},"cluster_identifier":{"references":["aws_neptune_cluster.default"]},"engine":{"constant_value":"neptune"},"instance_class":{"constant_value":"db.t3.medium"}},"schema_version":0,"count_expression":{"constant_value":1},"raw_data":{"FileName":"neptune.tf","StartLine":12,"EndLine":19}},{"address":"aws_neptune_cluster_snapshot.default","mode":"managed","type":"aws_neptune_cluster_snapshot","name":"default","provider_config_key":"aws","expressions":{"db_cluster_identifier":{"references":["aws_neptune_cluster.default"]},"db_cluster_snapshot_identifier":{"constant_value":"resourcetestsnapshot1"}},"schema_version":0,"raw_data":{"FileName":"neptune.tf","StartLine":21,"EndLine":24}},{"address":"aws_network_interface.web-eni","mode":"managed","type":"aws_network_interface","name":"web-eni","provider_config_key":"aws","expressions":{"private_ips":{"constant_value":["172.16.10.100"]},"subnet_id":{"references":["aws_subnet.web_subnet"]},"tags":{"references":["local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":149,"EndLine":156}},{"address":"aws_route_table.web_rtb","mode":"managed","type":"aws_route_table","name":"web_rtb","provider_config_key":"aws","expressions":{"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":120,"EndLine":126}},{"address":"aws_route_table_association.rtbassoc","mode":"managed","type":"aws_route_table_association","name":"rtbassoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.web_rtb"]},"subnet_id":{"references":["aws_subnet.web_subnet"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":128,"EndLine":131}},{"address":"aws_route_table_association.rtbassoc2","mode":"managed","type":"aws_route_table_association","name":"rtbassoc2","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.web_rtb"]},"subnet_id":{"references":["aws_subnet.web_subnet2"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":133,"EndLine":136}},{"address":"aws_s3_bucket.data","mode":"managed","type":"aws_s3_bucket","name":"data","provider_config_key":"aws","expressions":{"acl":{"constant_value":"public-read"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":1,"EndLine":13}},{"address":"aws_s3_bucket.data_science","mode":"managed","type":"aws_s3_bucket","name":"data_science","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"logging":[{"target_bucket":{"references":["aws_s3_bucket.logs"]},"target_prefix":{"constant_value":"log/"}}],"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":55,"EndLine":67}},{"address":"aws_s3_bucket.financials","mode":"managed","type":"aws_s3_bucket","name":"financials","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":25,"EndLine":37}},{"address":"aws_s3_bucket.flowbucket","mode":"managed","type":"aws_s3_bucket","name":"flowbucket","provider_config_key":"aws","expressions":{"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":171,"EndLine":179}},{"address":"aws_s3_bucket.logs","mode":"managed","type":"aws_s3_bucket","name":"logs","provider_config_key":"aws","expressions":{"acl":{"constant_value":"log-delivery-write"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.logs_key"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]}],"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":69,"EndLine":88}},{"address":"aws_s3_bucket.operations","mode":"managed","type":"aws_s3_bucket","name":"operations","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.resource_prefix"]},"force_destroy":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":39,"EndLine":53}},{"address":"aws_s3_bucket_object.data_object","mode":"managed","type":"aws_s3_bucket_object","name":"data_object","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.data"]},"key":{"constant_value":"customer-master.xlsx"},"source":{"constant_value":"resources/customer-master.xlsx"},"tags":{"references":["local.resource_prefix","local.resource_prefix"]}},"schema_version":0,"raw_data":{"FileName":"s3.tf","StartLine":15,"EndLine":23}},{"address":"aws_security_group.default","mode":"managed","type":"aws_security_group","name":"default","provider_config_key":"aws","expressions":{"name":{"references":["local.resource_prefix"]},"tags":{"references":["local.resource_prefix","local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1,"raw_data":{"FileName":"db-app.tf","StartLine":80,"EndLine":88}},{"address":"aws_security_group.web-node","mode":"managed","type":"aws_security_group","name":"web-node","provider_config_key":"aws","expressions":{"description":{"references":["local.resource_prefix"]},"name":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1,"depends_on":["aws_vpc.web_vpc"],"raw_data":{"FileName":"ec2.tf","StartLine":50,"EndLine":78}},{"address":"aws_security_group_rule.egress","mode":"managed","type":"aws_security_group_rule","name":"egress","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"from_port":{"constant_value":0},"protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.default"]},"to_port":{"constant_value":0},"type":{"constant_value":"egress"}},"schema_version":2,"raw_data":{"FileName":"db-app.tf","StartLine":99,"EndLine":106}},{"address":"aws_security_group_rule.ingress","mode":"managed","type":"aws_security_group_rule","name":"ingress","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["aws_vpc.web_vpc"]},"from_port":{"constant_value":"3306"},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.default"]},"to_port":{"constant_value":"3306"},"type":{"constant_value":"ingress"}},"schema_version":2,"raw_data":{"FileName":"db-app.tf","StartLine":90,"EndLine":97}},{"address":"aws_subnet.eks_subnet1","mode":"managed","type":"aws_subnet","name":"eks_subnet1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone"]},"cidr_block":{"constant_value":"10.10.10.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.eks_name"]},"vpc_id":{"references":["aws_vpc.eks_vpc"]}},"schema_version":1,"raw_data":{"FileName":"eks.tf","StartLine":42,"EndLine":51}},{"address":"aws_subnet.eks_subnet2","mode":"managed","type":"aws_subnet","name":"eks_subnet2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone2"]},"cidr_block":{"constant_value":"10.10.11.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix","local.eks_name"]},"vpc_id":{"references":["aws_vpc.eks_vpc"]}},"schema_version":1,"raw_data":{"FileName":"eks.tf","StartLine":53,"EndLine":62}},{"address":"aws_subnet.web_subnet","mode":"managed","type":"aws_subnet","name":"web_subnet","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone"]},"cidr_block":{"constant_value":"172.16.10.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1,"raw_data":{"FileName":"ec2.tf","StartLine":89,"EndLine":98}},{"address":"aws_subnet.web_subnet2","mode":"managed","type":"aws_subnet","name":"web_subnet2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone2"]},"cidr_block":{"constant_value":"172.16.11.0/24"},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.resource_prefix"]},"vpc_id":{"references":["aws_vpc.web_vpc"]}},"schema_version":1,"raw_data":{"FileName":"ec2.tf","StartLine":100,"EndLine":109}},{"address":"aws_volume_attachment.ebs_att","mode":"managed","type":"aws_volume_attachment","name":"ebs_att","provider_config_key":"aws","expressions":{"device_name":{"constant_value":"/dev/sdh"},"instance_id":{"references":["aws_instance.web_host"]},"volume_id":{"references":["aws_ebs_volume.web_host_storage"]}},"schema_version":0,"raw_data":{"FileName":"ec2.tf","StartLine":44,"EndLine":48}},{"address":"aws_vpc.eks_vpc","mode":"managed","type":"aws_vpc","name":"eks_vpc","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"10.10.0.0/16"},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.resource_prefix"]}},"schema_version":1,"raw_data":{"FileName":"eks.tf","StartLine":33,"EndLine":40}},{"address":"aws_vpc.web_vpc","mode":"managed","type":"aws_vpc","name":"web_vpc","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"172.16.0.0/16"},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.resource_prefix"]}},"schema_version":1,"raw_data":{"FileName":"ec2.tf","StartLine":80,"EndLine":87}},{"address":"null_resource.push_image","mode":"managed","type":"null_resource","name":"push_image","provider_config_key":"null","provisioners":[{"type":"local-exec","expressions":{"command":{"references":["var.region","data.aws_caller_identity.current","var.region","aws_ecr_repository.repository","aws_ecr_repository.repository","local.docker_image","local.docker_image"]},"working_dir":{"references":["path.module"]}}}],"schema_version":0,"raw_data":{"FileName":"ecr.tf","StartLine":15,"EndLine":25}},{"address":"data.aws_ami.amazon-linux-2","mode":"data","type":"aws_ami","name":"amazon-linux-2","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"owner-alias"},"values":{"constant_value":["amazon"]}},{"name":{"constant_value":"name"},"values":{"constant_value":["amzn2-ami-hvm-*-x86_64-ebs"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0,"raw_data":{"FileName":"db-app.tf","StartLine":163,"EndLine":176}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0,"raw_data":{"FileName":"consts.tf","StartLine":2,"EndLine":2}},{"address":"data.aws_iam_policy_document.iam_policy_eks","mode":"data","type":"aws_iam_policy_document","name":"iam_policy_eks","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["eks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"raw_data":{"FileName":"eks.tf","StartLine":7,"EndLine":16}},{"address":"data.aws_iam_policy_document.policy","mode":"data","type":"aws_iam_policy_document","name":"policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["es:*"]},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]}}]},"schema_version":0,"raw_data":{"FileName":"es.tf","StartLine":19,"EndLine":28}}],"variables":{"ami":{"default":"ami-09a5b0b7edf08843d"},"availability_zone":{"default":"us-west-2a"},"availability_zone2":{"default":"us-west-2b"},"company_name":{"default":"acme"},"dbname":{"default":"db1","description":"Name of the Database"},"environment":{"default":"dev"},"neptune-dbname":{"default":"neptunedb1","description":"Name of the Neptune graph database"},"password":{"default":"Aa1234321Bb","description":"Database password"},"profile":{"default":"default"},"region":{"default":"us-west-2"}}}}}
