{"format_version":"0.1","terraform_version":"0.13.4","variables":{"alb_access_logs_bucket_name":{"value":null},"alb_access_logs_s3_prefix":{"value":null},"alb_create_security_group":{"value":true},"alb_enable_access_logs":{"value":false},"alb_ingress_allow_cidrs":{"value":null},"alb_security_group_ids":{"value":null},"alb_type_internal":{"value":false},"ecs_execution_role_arn":{"value":null},"efs_access_point_gid":{"value":1000},"efs_access_point_uid":{"value":1000},"efs_backup_cold_storage_after_days":{"value":30},"efs_backup_completion_window":{"value":120},"efs_backup_delete_after_days":{"value":120},"efs_backup_schedule":{"value":"cron(0 00 * * ? *)"},"efs_backup_start_window":{"value":60},"efs_enable_backup":{"value":true},"efs_enable_encryption":{"value":true},"efs_ia_lifecycle_policy":{"value":null},"efs_kms_key_arn":{"value":null},"efs_performance_mode":{"value":"generalPurpose"},"efs_provisioned_throughput_in_mibps":{"value":null},"efs_throughput_mode":{"value":"bursting"},"jenkins_controller_cpu":{"value":2048},"jenkins_controller_memory":{"value":4096},"jenkins_controller_port":{"value":8080},"jenkins_controller_task_log_retention_days":{"value":30},"jenkins_controller_task_role_arn":{"value":null},"jenkins_ecr_repository_name":{"value":"serverless-jenkins-controller"},"jenkins_jnlp_port":{"value":50000},"name_prefix":{"value":"serverless-jenkins"},"route53_alias_name":{"value":"jenkins-controller"},"route53_create_alias":{"value":"false"},"route53_zone_id":{"value":null},"tags":{"value":{}}},"planned_values":{"outputs":{"azs":{"sensitive":false,"value":["us-east-1a","us-east-1b","us-east-1c"]},"cgw_arns":{"sensitive":false,"value":[]},"cgw_ids":{"sensitive":false,"value":[]},"database_internet_gateway_route_id":{"sensitive":false,"value":""},"database_ipv6_egress_route_id":{"sensitive":false,"value":""},"database_nat_gateway_route_ids":{"sensitive":false,"value":[]},"database_network_acl_arn":{"sensitive":false,"value":""},"database_network_acl_id":{"sensitive":false,"value":""},"database_route_table_association_ids":{"sensitive":false,"value":[]},"database_route_table_ids":{"sensitive":false,"value":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"]},"database_subnet_arns":{"sensitive":false,"value":[]},"database_subnet_group":{"sensitive":false,"value":""},"database_subnet_group_name":{"sensitive":false,"value":""},"database_subnets":{"sensitive":false,"value":[]},"database_subnets_cidr_blocks":{"sensitive":false,"value":[]},"database_subnets_ipv6_cidr_blocks":{"sensitive":false,"value":[]},"default_network_acl_id":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].default_network_acl_id"},"default_route_table_id":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].default_route_table_id"},"default_security_group_id":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].default_security_group_id"},"default_vpc_arn":{"sensitive":false,"value":""},"default_vpc_cidr_block":{"sensitive":false,"value":""},"default_vpc_default_network_acl_id":{"sensitive":false,"value":""},"default_vpc_default_route_table_id":{"sensitive":false,"value":""},"default_vpc_default_security_group_id":{"sensitive":false,"value":""},"default_vpc_enable_dns_hostnames":{"sensitive":false,"value":""},"default_vpc_enable_dns_support":{"sensitive":false,"value":""},"default_vpc_id":{"sensitive":false,"value":""},"default_vpc_instance_tenancy":{"sensitive":false,"value":""},"default_vpc_main_route_table_id":{"sensitive":false,"value":""},"efs_access_point_id":{"sensitive":false,"value":"aws_efs_access_point.this.id"},"efs_aws_backup_plan_name":{"sensitive":false,"value":["serverless-jenkins-plan"]},"efs_aws_backup_vault_name":{"sensitive":false,"value":["serverless-jenkins-vault"]},"efs_file_system_dns_name":{"sensitive":false,"value":"aws_efs_file_system.this.dns_name"},"efs_file_system_id":{"sensitive":false,"value":"aws_efs_file_system.this.id"},"efs_security_group_id":{"sensitive":false,"value":"aws_security_group.efs_security_group.id"},"egress_only_internet_gateway_id":{"sensitive":false,"value":""},"elasticache_network_acl_arn":{"sensitive":false,"value":""},"elasticache_network_acl_id":{"sensitive":false,"value":""},"elasticache_route_table_association_ids":{"sensitive":false,"value":[]},"elasticache_route_table_ids":{"sensitive":false,"value":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"]},"elasticache_subnet_arns":{"sensitive":false,"value":[]},"elasticache_subnet_group":{"sensitive":false,"value":""},"elasticache_subnet_group_name":{"sensitive":false,"value":""},"elasticache_subnets":{"sensitive":false,"value":[]},"elasticache_subnets_cidr_blocks":{"sensitive":false,"value":[]},"elasticache_subnets_ipv6_cidr_blocks":{"sensitive":false,"value":[]},"igw_arn":{"sensitive":false,"value":"module.vpc.aws_internet_gateway.this[0].arn"},"igw_id":{"sensitive":false,"value":"module.vpc.aws_internet_gateway.this[0].id"},"intra_network_acl_arn":{"sensitive":false,"value":""},"intra_network_acl_id":{"sensitive":false,"value":""},"intra_route_table_association_ids":{"sensitive":false,"value":[]},"intra_route_table_ids":{"sensitive":false,"value":[]},"intra_subnet_arns":{"sensitive":false,"value":[]},"intra_subnets":{"sensitive":false,"value":[]},"intra_subnets_cidr_blocks":{"sensitive":false,"value":[]},"intra_subnets_ipv6_cidr_blocks":{"sensitive":false,"value":[]},"name":{"sensitive":false,"value":"my-vpc"},"nat_ids":{"sensitive":false,"value":["module.vpc.aws_eip.nat[0].id","module.vpc.aws_eip.nat[1].id","module.vpc.aws_eip.nat[2].id"]},"nat_public_ips":{"sensitive":false,"value":["module.vpc.aws_eip.nat[0].public_ip","module.vpc.aws_eip.nat[1].public_ip","module.vpc.aws_eip.nat[2].public_ip"]},"natgw_ids":{"sensitive":false,"value":["module.vpc.aws_nat_gateway.this[0].id","module.vpc.aws_nat_gateway.this[1].id","module.vpc.aws_nat_gateway.this[2].id"]},"outpost_network_acl_arn":{"sensitive":false,"value":""},"outpost_network_acl_id":{"sensitive":false,"value":""},"outpost_subnet_arns":{"sensitive":false,"value":[]},"outpost_subnets":{"sensitive":false,"value":[]},"outpost_subnets_cidr_blocks":{"sensitive":false,"value":[]},"outpost_subnets_ipv6_cidr_blocks":{"sensitive":false,"value":[]},"private_ipv6_egress_route_ids":{"sensitive":false,"value":[]},"private_nat_gateway_route_ids":{"sensitive":false,"value":["module.vpc.aws_route.private_nat_gateway[0].id","module.vpc.aws_route.private_nat_gateway[1].id","module.vpc.aws_route.private_nat_gateway[2].id"]},"private_network_acl_arn":{"sensitive":false,"value":""},"private_network_acl_id":{"sensitive":false,"value":""},"private_route_table_association_ids":{"sensitive":false,"value":["module.vpc.aws_route_table_association.private[0].id","module.vpc.aws_route_table_association.private[1].id","module.vpc.aws_route_table_association.private[2].id"]},"private_route_table_ids":{"sensitive":false,"value":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"]},"private_subnet_arns":{"sensitive":false,"value":["module.vpc.aws_subnet.private[0].arn","module.vpc.aws_subnet.private[1].arn","module.vpc.aws_subnet.private[2].arn"]},"private_subnets":{"sensitive":false,"value":["module.vpc.aws_subnet.private[0].id","module.vpc.aws_subnet.private[1].id","module.vpc.aws_subnet.private[2].id"]},"private_subnets_cidr_blocks":{"sensitive":false,"value":["10.0.1.0/24","10.0.2.0/24","10.0.3.0/24"]},"private_subnets_ipv6_cidr_blocks":{"sensitive":false,"value":[null,null,null]},"public_internet_gateway_ipv6_route_id":{"sensitive":false,"value":""},"public_internet_gateway_route_id":{"sensitive":false,"value":"module.vpc.aws_route.public_internet_gateway[0].id"},"public_network_acl_arn":{"sensitive":false,"value":""},"public_network_acl_id":{"sensitive":false,"value":""},"public_route_table_association_ids":{"sensitive":false,"value":["module.vpc.aws_route_table_association.public[0].id","module.vpc.aws_route_table_association.public[1].id","module.vpc.aws_route_table_association.public[2].id"]},"public_route_table_ids":{"sensitive":false,"value":["module.vpc.aws_route_table.public[0].id"]},"public_subnet_arns":{"sensitive":false,"value":["module.vpc.aws_subnet.public[0].arn","module.vpc.aws_subnet.public[1].arn","module.vpc.aws_subnet.public[2].arn"]},"public_subnets":{"sensitive":false,"value":["module.vpc.aws_subnet.public[0].id","module.vpc.aws_subnet.public[1].id","module.vpc.aws_subnet.public[2].id"]},"public_subnets_cidr_blocks":{"sensitive":false,"value":["10.0.101.0/24","10.0.102.0/24","10.0.103.0/24"]},"public_subnets_ipv6_cidr_blocks":{"sensitive":false,"value":[null,null,null]},"redshift_network_acl_arn":{"sensitive":false,"value":""},"redshift_network_acl_id":{"sensitive":false,"value":""},"redshift_public_route_table_association_ids":{"sensitive":false,"value":[]},"redshift_route_table_association_ids":{"sensitive":false,"value":[]},"redshift_route_table_ids":{"sensitive":false,"value":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"]},"redshift_subnet_arns":{"sensitive":false,"value":[]},"redshift_subnet_group":{"sensitive":false,"value":""},"redshift_subnets":{"sensitive":false,"value":[]},"redshift_subnets_cidr_blocks":{"sensitive":false,"value":[]},"redshift_subnets_ipv6_cidr_blocks":{"sensitive":false,"value":[]},"this_customer_gateway":{"sensitive":false,"value":{}},"vgw_arn":{"sensitive":false,"value":"module.vpc.aws_vpn_gateway.this[0].arn"},"vgw_id":{"sensitive":false,"value":"module.vpc.aws_vpn_gateway.this[0].id"},"vpc_arn":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].arn"},"vpc_cidr_block":{"sensitive":false,"value":"10.0.0.0/16"},"vpc_enable_dns_hostnames":{"sensitive":false,"value":false},"vpc_enable_dns_support":{"sensitive":false,"value":true},"vpc_flow_log_cloudwatch_iam_role_arn":{"sensitive":false,"value":""},"vpc_flow_log_destination_arn":{"sensitive":false,"value":""},"vpc_flow_log_destination_type":{"sensitive":false,"value":"cloud-watch-logs"},"vpc_flow_log_id":{"sensitive":false,"value":""},"vpc_id":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].id"},"vpc_instance_tenancy":{"sensitive":false,"value":"default"},"vpc_ipv6_association_id":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].ipv6_association_id"},"vpc_ipv6_cidr_block":{"sensitive":false},"vpc_main_route_table_id":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].main_route_table_id"},"vpc_owner_id":{"sensitive":false,"value":"module.vpc.aws_vpc.this[0].owner_id"},"vpc_secondary_cidr_blocks":{"sensitive":false,"value":[]}},"root_module":{"resources":[{"address":"aws_backup_plan.this[0]","mode":"managed","type":"aws_backup_plan","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"advanced_backup_setting":[],"name":"serverless-jenkins-plan","rule":[{"completion_window":120,"copy_action":[],"enable_continuous_backup":null,"lifecycle":[{"cold_storage_after":30,"delete_after":120}],"recovery_point_tags":{},"rule_name":"serverless-jenkins-backup-rule","schedule":"cron(0 00 * * ? *)","start_window":60,"target_vault_name":"serverless-jenkins-vault"}],"tags":{}}},{"address":"aws_backup_selection.this[0]","mode":"managed","type":"aws_backup_selection","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"iam_role_arn":"aws_iam_role.aws_backup_role[0].arn","name":"serverless-jenkins-selection","plan_id":"aws_backup_plan.this[0].id","resources":["aws_efs_file_system.this.arn"],"selection_tag":[]}},{"address":"aws_backup_vault.this[0]","mode":"managed","type":"aws_backup_vault","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"serverless-jenkins-vault","tags":{}}},{"address":"aws_cloudwatch_log_group.jenkins_controller_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"jenkins_controller_log_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"serverless-jenkins","name_prefix":null,"retention_in_days":30,"tags":{}}},{"address":"aws_ecr_repository.jenkins_controller","mode":"managed","type":"aws_ecr_repository","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[],"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"serverless-jenkins-controller","tags":null,"timeouts":null}},{"address":"aws_ecs_cluster.jenkins_agents","mode":"managed","type":"aws_ecs_cluster","name":"jenkins_agents","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_providers":["FARGATE_SPOT"],"configuration":[],"default_capacity_provider_strategy":[],"name":"serverless-jenkins-spot","setting":[{"name":"containerInsights","value":"enabled"}],"tags":{}}},{"address":"aws_ecs_cluster.jenkins_controller","mode":"managed","type":"aws_ecs_cluster","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_providers":["FARGATE"],"configuration":[],"default_capacity_provider_strategy":[],"name":"serverless-jenkins-main","setting":[{"name":"containerInsights","value":"enabled"}],"tags":{}}},{"address":"aws_ecs_service.jenkins_controller","mode":"managed","type":"aws_ecs_service","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_provider_strategy":[],"cluster":"aws_ecs_cluster.jenkins_controller.id","deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":100,"deployment_minimum_healthy_percent":0,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"serverless-jenkins-controller","container_port":8080,"elb_name":null,"target_group_arn":"aws_lb_target_group.this.arn"}],"name":"serverless-jenkins-controller","network_configuration":[{"assign_public_ip":false,"security_groups":["aws_security_group.jenkins_controller_security_group.id"],"subnets":["module.vpc.aws_subnet.private[0].id","module.vpc.aws_subnet.private[1].id","module.vpc.aws_subnet.private[2].id"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"1.4.0","propagate_tags":null,"scheduling_strategy":"REPLICA","service_registries":[{"container_name":null,"container_port":null,"port":50000,"registry_arn":"aws_service_discovery_service.controller.arn"}],"tags":null,"task_definition":"aws_ecs_task_definition.jenkins_controller.arn","timeouts":null,"wait_for_steady_state":false}},{"address":"aws_ecs_task_definition.jenkins_controller","mode":"managed","type":"aws_ecs_task_definition","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"container_definitions":"data.template_file.jenkins_controller_container_def.rendered","cpu":"2048","ephemeral_storage":[],"execution_role_arn":"aws_iam_role.jenkins_controller_task_role.arn","family":"serverless-jenkins","inference_accelerator":[],"ipc_mode":null,"memory":"4096","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"tags":{},"task_role_arn":"aws_iam_role.jenkins_controller_task_role.arn","volume":[{"docker_volume_configuration":[],"efs_volume_configuration":[{"authorization_config":[{"access_point_id":"aws_efs_access_point.this.id","iam":"ENABLED"}],"file_system_id":"aws_efs_file_system.this.id","root_directory":null,"transit_encryption":"ENABLED","transit_encryption_port":null}],"fsx_windows_file_server_volume_configuration":[],"host_path":null,"name":"serverless-jenkins-efs"}]}},{"address":"aws_efs_access_point.this","mode":"managed","type":"aws_efs_access_point","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"file_system_id":"aws_efs_file_system.this.id","posix_user":[{"gid":0,"secondary_gids":null,"uid":0}],"root_directory":[{"creation_info":[{"owner_gid":1000,"owner_uid":1000,"permissions":"755"}],"path":"/"}],"tags":{}}},{"address":"aws_efs_file_system.this","mode":"managed","type":"aws_efs_file_system","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"creation_token":"serverless-jenkins-fs","encrypted":true,"lifecycle_policy":[],"performance_mode":"generalPurpose","provisioned_throughput_in_mibps":null,"tags":{},"throughput_mode":"bursting"}},{"address":"aws_efs_file_system_policy.this","mode":"managed","type":"aws_efs_file_system_policy","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"file_system_id":"aws_efs_file_system.this.id","policy":"data.aws_iam_policy_document.efs_resource_policy.json"}},{"address":"aws_efs_mount_target.this[0]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"file_system_id":"aws_efs_file_system.this.id","security_groups":["aws_security_group.efs_security_group.id"],"subnet_id":"module.vpc.aws_subnet.private[0].id"}},{"address":"aws_efs_mount_target.this[1]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"file_system_id":"aws_efs_file_system.this.id","security_groups":["aws_security_group.efs_security_group.id"],"subnet_id":"module.vpc.aws_subnet.private[1].id"}},{"address":"aws_efs_mount_target.this[2]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"file_system_id":"aws_efs_file_system.this.id","security_groups":["aws_security_group.efs_security_group.id"],"subnet_id":"module.vpc.aws_subnet.private[2].id"}},{"address":"aws_iam_policy.ecs_execution_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_execution_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"serverless-jenkins-ecs-execution-policy","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\",\n        \"ecr:GetDownloadUrlForLayer\",\n        \"ecr:GetAuthorizationToken\",\n        \"ecr:BatchGetImage\",\n        \"ecr:BatchCheckLayerAvailability\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","tags":null}},{"address":"aws_iam_policy.jenkins_controller_task_policy","mode":"managed","type":"aws_iam_policy","name":"jenkins_controller_task_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"serverless-jenkins-controller-task-policy","name_prefix":null,"path":"/","policy":"data.aws_iam_policy_document.jenkins_controller_task_policy.json","tags":null}},{"address":"aws_iam_role.aws_backup_role[0]","mode":"managed","type":"aws_iam_role","name":"aws_backup_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"backup.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"serverless-jenkins-backup-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role.ecs_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"serverless-jenkins-ecs-execution-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{}}},{"address":"aws_iam_role.jenkins_controller_task_role","mode":"managed","type":"aws_iam_role","name":"jenkins_controller_task_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"serverless-jenkins-controller-task-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{}}},{"address":"aws_iam_role_policy_attachment.backup_role_policy[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"backup_role_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup","role":"aws_iam_role.aws_backup_role[0].id"}},{"address":"aws_iam_role_policy_attachment.ecs_execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"aws_iam_policy.ecs_execution_policy.arn","role":"serverless-jenkins-ecs-execution-role"}},{"address":"aws_iam_role_policy_attachment.jenkins_controller_task","mode":"managed","type":"aws_iam_role_policy_attachment","name":"jenkins_controller_task","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"aws_iam_policy.jenkins_controller_task_policy.arn","role":"serverless-jenkins-controller-task-role"}},{"address":"aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"customer_owned_ipv4_pool":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"idle_timeout":60,"internal":false,"load_balancer_type":"application","name":"serverless-jenkins-crtl-alb","name_prefix":null,"security_groups":["aws_security_group.alb_security_group[0].id"],"subnet_mapping":[],"subnets":["module.vpc.aws_subnet.public[0].id","module.vpc.aws_subnet.public[1].id","module.vpc.aws_subnet.public[2].id"],"tags":{},"timeouts":null}},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":null,"redirect":[{"host":null,"path":null,"port":"443","protocol":"HTTPS","query":null,"status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"load_balancer_arn":"aws_lb.this.arn","port":80,"protocol":"HTTP","tags":null,"timeouts":null}},{"address":"aws_lb_listener.https","mode":"managed","type":"aws_lb_listener","name":"https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":null,"redirect":[],"target_group_arn":"aws_lb_target_group.this.arn","type":"forward"}],"load_balancer_arn":"aws_lb.this.arn","port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-FS-1-2-Res-2019-08","tags":null,"timeouts":null}},{"address":"aws_lb_listener_rule.redirect_http_to_https","mode":"managed","type":"aws_lb_listener_rule","name":"redirect_http_to_https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":null,"redirect":[{"host":null,"path":null,"port":"443","protocol":"HTTPS","query":null,"status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"condition":[{"host_header":[],"http_header":[{"http_header_name":"*","values":["*"]}],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"listener_arn":"aws_lb_listener.http.arn","tags":null}},{"address":"aws_lb_target_group.this","mode":"managed","type":"aws_lb_target_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":null,"interval":null,"matcher":null,"path":"/login","port":null,"protocol":null,"timeout":null,"unhealthy_threshold":null}],"lambda_multi_value_headers_enabled":false,"name":"serverless-jenkins-crtl","name_prefix":null,"port":8080,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"stickiness":[],"tags":{},"target_type":"ip","vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"aws_security_group.alb_security_group[0]","mode":"managed","type":"aws_security_group","name":"alb_security_group","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"serverless-jenkins alb security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":null,"description":null,"from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":443},{"cidr_blocks":null,"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}],"name":"serverless-jenkins-alb","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"aws_security_group.efs_security_group","mode":"managed","type":"aws_security_group","name":"efs_security_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"serverless-jenkins efs security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":null,"description":null,"from_port":2049,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":["aws_security_group.jenkins_controller_security_group.id"],"self":null,"to_port":2049}],"name":"serverless-jenkins-efs","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"aws_security_group.jenkins_controller_security_group","mode":"managed","type":"aws_security_group","name":"jenkins_controller_security_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"serverless-jenkins controller security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":null,"description":null,"from_port":50000,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":["aws_security_group.alb_security_group[0].id"],"self":true,"to_port":50000},{"cidr_blocks":null,"description":null,"from_port":8080,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":["aws_security_group.alb_security_group[0].id"],"self":true,"to_port":8080}],"name":"serverless-jenkins-controller","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"aws_service_discovery_private_dns_namespace.controller","mode":"managed","type":"aws_service_discovery_private_dns_namespace","name":"controller","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Serverless Jenkins discovery managed zone.","name":"serverless-jenkins","tags":null,"vpc":"module.vpc.aws_vpc.this[0].id"}},{"address":"aws_service_discovery_service.controller","mode":"managed","type":"aws_service_discovery_service","name":"controller","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"dns_config":[{"dns_records":[{"ttl":10,"type":"A"},{"ttl":10,"type":"SRV"}],"namespace_id":"aws_service_discovery_private_dns_namespace.controller.id","routing_policy":"MULTIVALUE"}],"health_check_config":[],"health_check_custom_config":[{"failure_threshold":5}],"name":"controller","tags":null}},{"address":"data.aws_iam_policy_document.efs_resource_policy","mode":"data","type":"aws_iam_policy_document","name":"efs_resource_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["elasticfilesystem:ClientMount","elasticfilesystem:ClientRootAccess","elasticfilesystem:ClientWrite"],"condition":[{"test":"Bool","values":["true"],"variable":"aws:SecureTransport"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["arn:aws:iam::115553109071:root"],"type":"AWS"}],"resources":["arn:aws:elasticfilesystem:us-east-1:115553109071:file-system/aws_efs_file_system.this.id"],"sid":null}],"version":null}},{"address":"data.aws_iam_policy_document.jenkins_controller_task_policy","mode":"data","type":"aws_iam_policy_document","name":"jenkins_controller_task_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ecs:ListContainerInstances"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["aws_ecs_cluster.jenkins_agents.arn","aws_ecs_cluster.jenkins_controller.arn"],"sid":null},{"actions":["ecs:RunTask"],"condition":[{"test":"ArnEquals","values":["aws_ecs_cluster.jenkins_controller.arn","aws_ecs_cluster.jenkins_agents.arn"],"variable":"ecs:cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:ecs:us-east-1:115553109071:task-definition/*"],"sid":null},{"actions":["ecs:DescribeTasks","ecs:StopTask"],"condition":[{"test":"ArnEquals","values":["aws_ecs_cluster.jenkins_controller.arn","aws_ecs_cluster.jenkins_agents.arn"],"variable":"ecs:cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:ecs:us-east-1:115553109071:task/*"],"sid":null},{"actions":["ssm:GetParameter","ssm:GetParameters","ssm:PutParameter"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:ssm:us-east-1:115553109071:parameter/jenkins*"],"sid":null},{"actions":["kms:Decrypt"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:kms:us-east-1:115553109071:alias/aws/ssm"],"sid":null},{"actions":["iam:PassRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:iam::115553109071:role/*"],"sid":null},{"actions":["logs:CreateLogStream","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["aws_cloudwatch_log_group.jenkins_controller_log_group.arn:*"],"sid":null},{"actions":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetAuthorizationToken","ecr:GetDownloadUrlForLayer","ecs:DeregisterTaskDefinition","ecs:DescribeContainerInstances","ecs:DescribeTaskDefinition","ecs:ListClusters","ecs:ListTaskDefinitions","ecs:RegisterTaskDefinition","elasticfilesystem:ClientMount"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":null},{"actions":["elasticfilesystem:ClientRootAccess","elasticfilesystem:ClientWrite"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["aws_efs_file_system.this.arn"],"sid":null}],"version":null}},{"address":"data.template_file.jenkins_configuration_def","mode":"data","type":"template_file","name":"jenkins_configuration_def","provider_name":"registry.terraform.io/hashicorp/template","schema_version":0,"values":{"filename":null,"template":"jenkins:\n    systemMessage: \"Amazon Fargate Demo\"\n    numExecutors: 0\n    remotingSecurity:\n      enabled: true\n    agentProtocols:\n        - \"JNLP4-connect\"\n    securityRealm:\n        local:\n            allowsSignup: false\n            users:\n                - id: ecsuser\n                  password: \\$${ADMIN_PWD}\n    authorizationStrategy:\n        globalMatrix:\n            grantedPermissions:\n                - \"Overall/Read:anonymous\"\n                - \"Job/Read:anonymous\"\n                - \"View/Read:anonymous\"\n                - \"Overall/Administer:authenticated\"\n    crumbIssuer: \"standard\"\n    slaveAgentPort: 50000\n    clouds:\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate_spot}\n              name: \"fargate-cloud-spot\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example-spot\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate}\n              name: \"fargate-cloud\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\nsecurity:\n  sSHD:\n    port: -1\njobs:\n  - script: \u003e\n      pipelineJob('Simple job critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on non spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n  - script: \u003e\n      pipelineJob('Simple job non critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example-spot'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on a spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n","vars":{"agent_security_groups":"aws_security_group.jenkins_controller_security_group.id","cluster_region":"us-east-1","ecs_cluster_fargate":"aws_ecs_cluster.jenkins_controller.arn","ecs_cluster_fargate_spot":"aws_ecs_cluster.jenkins_agents.arn","jenkins_cloud_map_name":"controller.serverless-jenkins","jenkins_controller_port":"8080","jnlp_port":"50000","subnets":"module.vpc.aws_subnet.public[0].id,module.vpc.aws_subnet.public[1].id,module.vpc.aws_subnet.public[2].id"}}},{"address":"data.template_file.jenkins_controller_container_def","mode":"data","type":"template_file","name":"jenkins_controller_container_def","provider_name":"registry.terraform.io/hashicorp/template","schema_version":0,"values":{"filename":null,"template":"[\n    {\n      \"name\": \"${name}\",\n      \"image\": \"${container_image}\",\n      \"cpu\": ${cpu},\n      \"memory\": ${memory},\n      \"memoryReservation\": ${memory},\n      \"environment\": [\n        { \"name\" : \"JAVA_OPTS\", \"value\" : \"-Djenkins.install.runSetupWizard=false\" }\n      ],\n      \"essential\": true,\n      \"mountPoints\": [\n        {\n          \"containerPath\": \"${jenkins_home}\",\n          \"sourceVolume\": \"${source_volume}\"\n        }\n      ],\n      \"portMappings\": [\n        {\n          \"containerPort\": ${jenkins_controller_port}\n        },\n        {\n          \"containerPort\": ${jnlp_port}\n        }\n      ],\n      \"logConfiguration\": {\n        \"logDriver\": \"awslogs\",\n        \"options\": {\n            \"awslogs-group\": \"${log_group}\",\n            \"awslogs-region\": \"${region}\",\n            \"awslogs-stream-prefix\": \"controller\"\n        }\n      },\n      \"secrets\": [\n        {\n          \"name\": \"ADMIN_PWD\",\n          \"valueFrom\": \"arn:aws:ssm:${region}:${account_id}:parameter/jenkins-pwd\"\n        }\n      ]\n    }\n]\n  ","vars":{"account_id":"115553109071","container_image":"aws_ecr_repository.jenkins_controller.repository_url","cpu":"2048","jenkins_controller_port":"8080","jenkins_home":"/var/jenkins_home","jnlp_port":"50000","log_group":"serverless-jenkins","memory":"4096","name":"serverless-jenkins-controller","region":"us-east-1","source_volume":"serverless-jenkins-efs"}}},{"address":"null_resource.build_docker_image","mode":"managed","type":"null_resource","name":"build_docker_image","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":{"src_hash":"jenkins:\n    systemMessage: \"Amazon Fargate Demo\"\n    numExecutors: 0\n    remotingSecurity:\n      enabled: true\n    agentProtocols:\n        - \"JNLP4-connect\"\n    securityRealm:\n        local:\n            allowsSignup: false\n            users:\n                - id: ecsuser\n                  password: \\$${ADMIN_PWD}\n    authorizationStrategy:\n        globalMatrix:\n            grantedPermissions:\n                - \"Overall/Read:anonymous\"\n                - \"Job/Read:anonymous\"\n                - \"View/Read:anonymous\"\n                - \"Overall/Administer:authenticated\"\n    crumbIssuer: \"standard\"\n    slaveAgentPort: 50000\n    clouds:\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate_spot}\n              name: \"fargate-cloud-spot\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example-spot\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate}\n              name: \"fargate-cloud\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\nsecurity:\n  sSHD:\n    port: -1\njobs:\n  - script: \u003e\n      pipelineJob('Simple job critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on non spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n  - script: \u003e\n      pipelineJob('Simple job non critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example-spot'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on a spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n"}}},{"address":"null_resource.render_template","mode":"managed","type":"null_resource","name":"render_template","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":{"src_hash":"jenkins:\n    systemMessage: \"Amazon Fargate Demo\"\n    numExecutors: 0\n    remotingSecurity:\n      enabled: true\n    agentProtocols:\n        - \"JNLP4-connect\"\n    securityRealm:\n        local:\n            allowsSignup: false\n            users:\n                - id: ecsuser\n                  password: \\$${ADMIN_PWD}\n    authorizationStrategy:\n        globalMatrix:\n            grantedPermissions:\n                - \"Overall/Read:anonymous\"\n                - \"Job/Read:anonymous\"\n                - \"View/Read:anonymous\"\n                - \"Overall/Administer:authenticated\"\n    crumbIssuer: \"standard\"\n    slaveAgentPort: 50000\n    clouds:\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate_spot}\n              name: \"fargate-cloud-spot\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example-spot\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate}\n              name: \"fargate-cloud\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\nsecurity:\n  sSHD:\n    port: -1\njobs:\n  - script: \u003e\n      pipelineJob('Simple job critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on non spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n  - script: \u003e\n      pipelineJob('Simple job non critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example-spot'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on a spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n"}}}],"child_modules":[{"resources":[{"address":"module.vpc.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"},"timeouts":null,"vpc":true}},{"address":"module.vpc.aws_eip.nat[1]","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"},"timeouts":null,"vpc":true}},{"address":"module.vpc.aws_eip.nat[2]","mode":"managed","type":"aws_eip","name":"nat","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"},"timeouts":null,"vpc":true}},{"address":"module.vpc.aws_internet_gateway.this[0]","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_nat_gateway.this[0]","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"module.vpc.aws_eip.nat[0].id","connectivity_type":"public","subnet_id":"module.vpc.aws_subnet.public[0].id","tags":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"}}},{"address":"module.vpc.aws_nat_gateway.this[1]","mode":"managed","type":"aws_nat_gateway","name":"this","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"module.vpc.aws_eip.nat[1].id","connectivity_type":"public","subnet_id":"module.vpc.aws_subnet.public[1].id","tags":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"}}},{"address":"module.vpc.aws_nat_gateway.this[2]","mode":"managed","type":"aws_nat_gateway","name":"this","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"module.vpc.aws_eip.nat[2].id","connectivity_type":"public","subnet_id":"module.vpc.aws_subnet.public[2].id","tags":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"}}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":"module.vpc.aws_nat_gateway.this[0].id","route_table_id":"module.vpc.aws_route_table.private[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null}},{"address":"module.vpc.aws_route.private_nat_gateway[1]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":"module.vpc.aws_nat_gateway.this[1].id","route_table_id":"module.vpc.aws_route_table.private[1].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null}},{"address":"module.vpc.aws_route.private_nat_gateway[2]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":"module.vpc.aws_nat_gateway.this[2].id","route_table_id":"module.vpc.aws_route_table.private[2].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null}},{"address":"module.vpc.aws_route.public_internet_gateway[0]","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":"module.vpc.aws_internet_gateway.this[0].id","local_gateway_id":null,"nat_gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null}},{"address":"module.vpc.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_route_table.private[2]","mode":"managed","type":"aws_route_table","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"dev","Name":"my-vpc-public","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.private[0].id","subnet_id":"module.vpc.aws_subnet.private[0].id"}},{"address":"module.vpc.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.private[1].id","subnet_id":"module.vpc.aws_subnet.private[1].id"}},{"address":"module.vpc.aws_route_table_association.private[2]","mode":"managed","type":"aws_route_table_association","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.private[2].id","subnet_id":"module.vpc.aws_subnet.private[2].id"}},{"address":"module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","subnet_id":"module.vpc.aws_subnet.public[0].id"}},{"address":"module.vpc.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","subnet_id":"module.vpc.aws_subnet.public[1].id"}},{"address":"module.vpc.aws_route_table_association.public[2]","mode":"managed","type":"aws_route_table_association","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","subnet_id":"module.vpc.aws_subnet.public[2].id"}},{"address":"module.vpc.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_subnet.private[2]","mode":"managed","type":"aws_subnet","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-public-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public-us-east-1a","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.102.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-public-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public-us-east-1b","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_subnet.public[2]","mode":"managed","type":"aws_subnet","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.103.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-public-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public-us-east-1c","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"}},{"address":"module.vpc.aws_vpc.this[0]","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":false,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc","Terraform":"true"}}},{"address":"module.vpc.aws_vpn_gateway.this[0]","mode":"managed","type":"aws_vpn_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_side_asn":"64512","availability_zone":null,"tags":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"aws_backup_plan.this[0]","mode":"managed","type":"aws_backup_plan","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"advanced_backup_setting":[],"name":"serverless-jenkins-plan","rule":[{"completion_window":120,"copy_action":[],"enable_continuous_backup":null,"lifecycle":[{"cold_storage_after":30,"delete_after":120}],"recovery_point_tags":{},"rule_name":"serverless-jenkins-backup-rule","schedule":"cron(0 00 * * ? *)","start_window":60,"target_vault_name":"serverless-jenkins-vault"}],"tags":{}},"after_unknown":{"advanced_backup_setting":[],"arn":true,"id":true,"rule":[{"copy_action":[],"lifecycle":[{}],"recovery_point_tags":{}}],"tags":{},"tags_all":true,"version":true}}},{"address":"aws_backup_selection.this[0]","mode":"managed","type":"aws_backup_selection","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"iam_role_arn":"aws_iam_role.aws_backup_role[0].arn","name":"serverless-jenkins-selection","plan_id":"aws_backup_plan.this[0].id","resources":["aws_efs_file_system.this.arn"],"selection_tag":[]},"after_unknown":{"id":true,"resources":[false],"selection_tag":[]}}},{"address":"aws_backup_vault.this[0]","mode":"managed","type":"aws_backup_vault","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"serverless-jenkins-vault","tags":{}},"after_unknown":{"arn":true,"id":true,"kms_key_arn":true,"recovery_points":true,"tags":{},"tags_all":true}}},{"address":"aws_cloudwatch_log_group.jenkins_controller_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"jenkins_controller_log_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"serverless-jenkins","name_prefix":null,"retention_in_days":30,"tags":{}},"after_unknown":{"arn":true,"id":true,"tags":{},"tags_all":true}}},{"address":"aws_ecr_repository.jenkins_controller","mode":"managed","type":"aws_ecr_repository","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"serverless-jenkins-controller","tags":null,"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags_all":true}}},{"address":"aws_ecs_cluster.jenkins_agents","mode":"managed","type":"aws_ecs_cluster","name":"jenkins_agents","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_providers":["FARGATE_SPOT"],"configuration":[],"default_capacity_provider_strategy":[],"name":"serverless-jenkins-spot","setting":[{"name":"containerInsights","value":"enabled"}],"tags":{}},"after_unknown":{"arn":true,"capacity_providers":[false],"configuration":[],"default_capacity_provider_strategy":[],"id":true,"setting":[{}],"tags":{},"tags_all":true}}},{"address":"aws_ecs_cluster.jenkins_controller","mode":"managed","type":"aws_ecs_cluster","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_providers":["FARGATE"],"configuration":[],"default_capacity_provider_strategy":[],"name":"serverless-jenkins-main","setting":[{"name":"containerInsights","value":"enabled"}],"tags":{}},"after_unknown":{"arn":true,"capacity_providers":[false],"configuration":[],"default_capacity_provider_strategy":[],"id":true,"setting":[{}],"tags":{},"tags_all":true}}},{"address":"aws_ecs_service.jenkins_controller","mode":"managed","type":"aws_ecs_service","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_provider_strategy":[],"cluster":"aws_ecs_cluster.jenkins_controller.id","deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":100,"deployment_minimum_healthy_percent":0,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"serverless-jenkins-controller","container_port":8080,"elb_name":null,"target_group_arn":"aws_lb_target_group.this.arn"}],"name":"serverless-jenkins-controller","network_configuration":[{"assign_public_ip":false,"security_groups":["aws_security_group.jenkins_controller_security_group.id"],"subnets":["module.vpc.aws_subnet.private[0].id","module.vpc.aws_subnet.private[1].id","module.vpc.aws_subnet.private[2].id"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"1.4.0","propagate_tags":null,"scheduling_strategy":"REPLICA","service_registries":[{"container_name":null,"container_port":null,"port":50000,"registry_arn":"aws_service_discovery_service.controller.arn"}],"tags":null,"task_definition":"aws_ecs_task_definition.jenkins_controller.arn","timeouts":null,"wait_for_steady_state":false},"after_unknown":{"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"iam_role":true,"id":true,"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_registries":[{}],"tags_all":true}}},{"address":"aws_ecs_task_definition.jenkins_controller","mode":"managed","type":"aws_ecs_task_definition","name":"jenkins_controller","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"container_definitions":"data.template_file.jenkins_controller_container_def.rendered","cpu":"2048","ephemeral_storage":[],"execution_role_arn":"aws_iam_role.jenkins_controller_task_role.arn","family":"serverless-jenkins","inference_accelerator":[],"ipc_mode":null,"memory":"4096","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"tags":{},"task_role_arn":"aws_iam_role.jenkins_controller_task_role.arn","volume":[{"docker_volume_configuration":[],"efs_volume_configuration":[{"authorization_config":[{"access_point_id":"aws_efs_access_point.this.id","iam":"ENABLED"}],"file_system_id":"aws_efs_file_system.this.id","root_directory":null,"transit_encryption":"ENABLED","transit_encryption_port":null}],"fsx_windows_file_server_volume_configuration":[],"host_path":null,"name":"serverless-jenkins-efs"}]},"after_unknown":{"arn":true,"ephemeral_storage":[],"id":true,"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"tags":{},"tags_all":true,"volume":[{"docker_volume_configuration":[],"efs_volume_configuration":[{"authorization_config":[{}]}],"fsx_windows_file_server_volume_configuration":[]}]}}},{"address":"aws_efs_access_point.this","mode":"managed","type":"aws_efs_access_point","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"file_system_id":"aws_efs_file_system.this.id","posix_user":[{"gid":0,"secondary_gids":null,"uid":0}],"root_directory":[{"creation_info":[{"owner_gid":1000,"owner_uid":1000,"permissions":"755"}],"path":"/"}],"tags":{}},"after_unknown":{"arn":true,"file_system_arn":true,"id":true,"owner_id":true,"posix_user":[{}],"root_directory":[{"creation_info":[{}]}],"tags":{},"tags_all":true}}},{"address":"aws_efs_file_system.this","mode":"managed","type":"aws_efs_file_system","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"creation_token":"serverless-jenkins-fs","encrypted":true,"lifecycle_policy":[],"performance_mode":"generalPurpose","provisioned_throughput_in_mibps":null,"tags":{},"throughput_mode":"bursting"},"after_unknown":{"arn":true,"availability_zone_id":true,"availability_zone_name":true,"dns_name":true,"id":true,"kms_key_id":true,"lifecycle_policy":[],"number_of_mount_targets":true,"owner_id":true,"size_in_bytes":true,"tags":{},"tags_all":true}}},{"address":"aws_efs_file_system_policy.this","mode":"managed","type":"aws_efs_file_system_policy","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"file_system_id":"aws_efs_file_system.this.id","policy":"data.aws_iam_policy_document.efs_resource_policy.json"},"after_unknown":{"id":true}}},{"address":"aws_efs_mount_target.this[0]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"file_system_id":"aws_efs_file_system.this.id","security_groups":["aws_security_group.efs_security_group.id"],"subnet_id":"module.vpc.aws_subnet.private[0].id"},"after_unknown":{"availability_zone_id":true,"availability_zone_name":true,"dns_name":true,"file_system_arn":true,"id":true,"ip_address":true,"mount_target_dns_name":true,"network_interface_id":true,"owner_id":true,"security_groups":[false]}}},{"address":"aws_efs_mount_target.this[1]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"file_system_id":"aws_efs_file_system.this.id","security_groups":["aws_security_group.efs_security_group.id"],"subnet_id":"module.vpc.aws_subnet.private[1].id"},"after_unknown":{"availability_zone_id":true,"availability_zone_name":true,"dns_name":true,"file_system_arn":true,"id":true,"ip_address":true,"mount_target_dns_name":true,"network_interface_id":true,"owner_id":true,"security_groups":[false]}}},{"address":"aws_efs_mount_target.this[2]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"file_system_id":"aws_efs_file_system.this.id","security_groups":["aws_security_group.efs_security_group.id"],"subnet_id":"module.vpc.aws_subnet.private[2].id"},"after_unknown":{"availability_zone_id":true,"availability_zone_name":true,"dns_name":true,"file_system_arn":true,"id":true,"ip_address":true,"mount_target_dns_name":true,"network_interface_id":true,"owner_id":true,"security_groups":[false]}}},{"address":"aws_iam_policy.ecs_execution_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_execution_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"serverless-jenkins-ecs-execution-policy","name_prefix":null,"path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\",\n        \"ecr:GetDownloadUrlForLayer\",\n        \"ecr:GetAuthorizationToken\",\n        \"ecr:BatchGetImage\",\n        \"ecr:BatchCheckLayerAvailability\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","tags":null},"after_unknown":{"arn":true,"id":true,"policy_id":true,"tags_all":true}}},{"address":"aws_iam_policy.jenkins_controller_task_policy","mode":"managed","type":"aws_iam_policy","name":"jenkins_controller_task_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"serverless-jenkins-controller-task-policy","name_prefix":null,"path":"/","policy":"data.aws_iam_policy_document.jenkins_controller_task_policy.json","tags":null},"after_unknown":{"arn":true,"id":true,"policy_id":true,"tags_all":true}}},{"address":"aws_iam_role.aws_backup_role[0]","mode":"managed","type":"aws_iam_role","name":"aws_backup_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"backup.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"serverless-jenkins-backup-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[],"managed_policy_arns":true,"tags_all":true,"unique_id":true}}},{"address":"aws_iam_role.ecs_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"serverless-jenkins-ecs-execution-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[],"managed_policy_arns":true,"tags":{},"tags_all":true,"unique_id":true}}},{"address":"aws_iam_role.jenkins_controller_task_role","mode":"managed","type":"aws_iam_role","name":"jenkins_controller_task_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[],"max_session_duration":3600,"name":"serverless-jenkins-controller-task-role","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[],"managed_policy_arns":true,"tags":{},"tags_all":true,"unique_id":true}}},{"address":"aws_iam_role_policy_attachment.backup_role_policy[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"backup_role_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup","role":"aws_iam_role.aws_backup_role[0].id"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy_attachment.ecs_execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"aws_iam_policy.ecs_execution_policy.arn","role":"serverless-jenkins-ecs-execution-role"},"after_unknown":{"id":true}}},{"address":"aws_iam_role_policy_attachment.jenkins_controller_task","mode":"managed","type":"aws_iam_role_policy_attachment","name":"jenkins_controller_task","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"aws_iam_policy.jenkins_controller_task_policy.arn","role":"serverless-jenkins-controller-task-role"},"after_unknown":{"id":true}}},{"address":"aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"customer_owned_ipv4_pool":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"idle_timeout":60,"internal":false,"load_balancer_type":"application","name":"serverless-jenkins-crtl-alb","name_prefix":null,"security_groups":["aws_security_group.alb_security_group[0].id"],"subnet_mapping":[],"subnets":["module.vpc.aws_subnet.public[0].id","module.vpc.aws_subnet.public[1].id","module.vpc.aws_subnet.public[2].id"],"tags":{},"timeouts":null},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"dns_name":true,"id":true,"ip_address_type":true,"security_groups":[false],"subnet_mapping":[],"subnets":[false,false,false],"tags":{},"tags_all":true,"vpc_id":true,"zone_id":true}}},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":null,"redirect":[{"host":null,"path":null,"port":"443","protocol":"HTTPS","query":null,"status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"load_balancer_arn":"aws_lb.this.arn","port":80,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"id":true,"ssl_policy":true,"tags_all":true}}},{"address":"aws_lb_listener.https","mode":"managed","type":"aws_lb_listener","name":"https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":null,"redirect":[],"target_group_arn":"aws_lb_target_group.this.arn","type":"forward"}],"load_balancer_arn":"aws_lb.this.arn","port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-FS-1-2-Res-2019-08","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"id":true,"tags_all":true}}},{"address":"aws_lb_listener_rule.redirect_http_to_https","mode":"managed","type":"aws_lb_listener_rule","name":"redirect_http_to_https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":null,"redirect":[{"host":null,"path":null,"port":"443","protocol":"HTTPS","query":null,"status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"condition":[{"host_header":[],"http_header":[{"http_header_name":"*","values":["*"]}],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"listener_arn":"aws_lb_listener.http.arn","tags":null},"after_unknown":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"arn":true,"condition":[{"host_header":[],"http_header":[{"values":[false]}],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":true,"priority":true,"tags_all":true}}},{"address":"aws_lb_target_group.this","mode":"managed","type":"aws_lb_target_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":null,"interval":null,"matcher":null,"path":"/login","port":null,"protocol":null,"timeout":null,"unhealthy_threshold":null}],"lambda_multi_value_headers_enabled":false,"name":"serverless-jenkins-crtl","name_prefix":null,"port":8080,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"stickiness":[],"tags":{},"target_type":"ip","vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"arn_suffix":true,"health_check":[{}],"id":true,"load_balancing_algorithm_type":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":[],"tags":{},"tags_all":true}}},{"address":"aws_security_group.alb_security_group[0]","mode":"managed","type":"aws_security_group","name":"alb_security_group","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"serverless-jenkins alb security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":null,"description":null,"from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":443},{"cidr_blocks":null,"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}],"name":"serverless-jenkins-alb","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false]}],"id":true,"ingress":[{},{}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":true}}},{"address":"aws_security_group.efs_security_group","mode":"managed","type":"aws_security_group","name":"efs_security_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"serverless-jenkins efs security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":null,"description":null,"from_port":2049,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":["aws_security_group.jenkins_controller_security_group.id"],"self":null,"to_port":2049}],"name":"serverless-jenkins-efs","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false]}],"id":true,"ingress":[{"security_groups":[false]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":true}}},{"address":"aws_security_group.jenkins_controller_security_group","mode":"managed","type":"aws_security_group","name":"jenkins_controller_security_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"serverless-jenkins controller security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}],"ingress":[{"cidr_blocks":null,"description":null,"from_port":50000,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":["aws_security_group.alb_security_group[0].id"],"self":true,"to_port":50000},{"cidr_blocks":null,"description":null,"from_port":8080,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":["aws_security_group.alb_security_group[0].id"],"self":true,"to_port":8080}],"name":"serverless-jenkins-controller","revoke_rules_on_delete":false,"tags":{},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false]}],"id":true,"ingress":[{"security_groups":[false]},{"security_groups":[false]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":true}}},{"address":"aws_service_discovery_private_dns_namespace.controller","mode":"managed","type":"aws_service_discovery_private_dns_namespace","name":"controller","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Serverless Jenkins discovery managed zone.","name":"serverless-jenkins","tags":null,"vpc":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"hosted_zone":true,"id":true,"tags_all":true}}},{"address":"aws_service_discovery_service.controller","mode":"managed","type":"aws_service_discovery_service","name":"controller","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"dns_config":[{"dns_records":[{"ttl":10,"type":"A"},{"ttl":10,"type":"SRV"}],"namespace_id":"aws_service_discovery_private_dns_namespace.controller.id","routing_policy":"MULTIVALUE"}],"health_check_config":[],"health_check_custom_config":[{"failure_threshold":5}],"name":"controller","tags":null},"after_unknown":{"arn":true,"dns_config":[{"dns_records":[{},{}]}],"health_check_config":[],"health_check_custom_config":[{}],"id":true,"namespace_id":true,"tags_all":true}}},{"address":"data.aws_iam_policy_document.efs_resource_policy","mode":"data","type":"aws_iam_policy_document","name":"efs_resource_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["elasticfilesystem:ClientMount","elasticfilesystem:ClientRootAccess","elasticfilesystem:ClientWrite"],"condition":[{"test":"Bool","values":["true"],"variable":"aws:SecureTransport"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["arn:aws:iam::115553109071:root"],"type":"AWS"}],"resources":["arn:aws:elasticfilesystem:us-east-1:115553109071:file-system/aws_efs_file_system.this.id"],"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}}},{"address":"data.aws_iam_policy_document.jenkins_controller_task_policy","mode":"data","type":"aws_iam_policy_document","name":"jenkins_controller_task_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ecs:ListContainerInstances"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["aws_ecs_cluster.jenkins_agents.arn","aws_ecs_cluster.jenkins_controller.arn"],"sid":null},{"actions":["ecs:RunTask"],"condition":[{"test":"ArnEquals","values":["aws_ecs_cluster.jenkins_controller.arn","aws_ecs_cluster.jenkins_agents.arn"],"variable":"ecs:cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:ecs:us-east-1:115553109071:task-definition/*"],"sid":null},{"actions":["ecs:DescribeTasks","ecs:StopTask"],"condition":[{"test":"ArnEquals","values":["aws_ecs_cluster.jenkins_controller.arn","aws_ecs_cluster.jenkins_agents.arn"],"variable":"ecs:cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:ecs:us-east-1:115553109071:task/*"],"sid":null},{"actions":["ssm:GetParameter","ssm:GetParameters","ssm:PutParameter"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:ssm:us-east-1:115553109071:parameter/jenkins*"],"sid":null},{"actions":["kms:Decrypt"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:kms:us-east-1:115553109071:alias/aws/ssm"],"sid":null},{"actions":["iam:PassRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["arn:aws:iam::115553109071:role/*"],"sid":null},{"actions":["logs:CreateLogStream","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["aws_cloudwatch_log_group.jenkins_controller_log_group.arn:*"],"sid":null},{"actions":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetAuthorizationToken","ecr:GetDownloadUrlForLayer","ecs:DeregisterTaskDefinition","ecs:DescribeContainerInstances","ecs:DescribeTaskDefinition","ecs:ListClusters","ecs:ListTaskDefinitions","ecs:RegisterTaskDefinition","elasticfilesystem:ClientMount"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":null},{"actions":["elasticfilesystem:ClientRootAccess","elasticfilesystem:ClientWrite"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["aws_efs_file_system.this.arn"],"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false,false]},{"actions":[false],"condition":[{"values":[false,false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false,false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}}},{"address":"data.template_file.jenkins_configuration_def","mode":"data","type":"template_file","name":"jenkins_configuration_def","provider_name":"registry.terraform.io/hashicorp/template","change":{"actions":["read"],"before":null,"after":{"filename":null,"template":"jenkins:\n    systemMessage: \"Amazon Fargate Demo\"\n    numExecutors: 0\n    remotingSecurity:\n      enabled: true\n    agentProtocols:\n        - \"JNLP4-connect\"\n    securityRealm:\n        local:\n            allowsSignup: false\n            users:\n                - id: ecsuser\n                  password: \\$${ADMIN_PWD}\n    authorizationStrategy:\n        globalMatrix:\n            grantedPermissions:\n                - \"Overall/Read:anonymous\"\n                - \"Job/Read:anonymous\"\n                - \"View/Read:anonymous\"\n                - \"Overall/Administer:authenticated\"\n    crumbIssuer: \"standard\"\n    slaveAgentPort: 50000\n    clouds:\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate_spot}\n              name: \"fargate-cloud-spot\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example-spot\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate}\n              name: \"fargate-cloud\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\nsecurity:\n  sSHD:\n    port: -1\njobs:\n  - script: \u003e\n      pipelineJob('Simple job critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on non spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n  - script: \u003e\n      pipelineJob('Simple job non critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example-spot'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on a spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n","vars":{"agent_security_groups":"aws_security_group.jenkins_controller_security_group.id","cluster_region":"us-east-1","ecs_cluster_fargate":"aws_ecs_cluster.jenkins_controller.arn","ecs_cluster_fargate_spot":"aws_ecs_cluster.jenkins_agents.arn","jenkins_cloud_map_name":"controller.serverless-jenkins","jenkins_controller_port":"8080","jnlp_port":"50000","subnets":"module.vpc.aws_subnet.public[0].id,module.vpc.aws_subnet.public[1].id,module.vpc.aws_subnet.public[2].id"}},"after_unknown":{"id":true,"rendered":true,"vars":{}}}},{"address":"data.template_file.jenkins_controller_container_def","mode":"data","type":"template_file","name":"jenkins_controller_container_def","provider_name":"registry.terraform.io/hashicorp/template","change":{"actions":["read"],"before":null,"after":{"filename":null,"template":"[\n    {\n      \"name\": \"${name}\",\n      \"image\": \"${container_image}\",\n      \"cpu\": ${cpu},\n      \"memory\": ${memory},\n      \"memoryReservation\": ${memory},\n      \"environment\": [\n        { \"name\" : \"JAVA_OPTS\", \"value\" : \"-Djenkins.install.runSetupWizard=false\" }\n      ],\n      \"essential\": true,\n      \"mountPoints\": [\n        {\n          \"containerPath\": \"${jenkins_home}\",\n          \"sourceVolume\": \"${source_volume}\"\n        }\n      ],\n      \"portMappings\": [\n        {\n          \"containerPort\": ${jenkins_controller_port}\n        },\n        {\n          \"containerPort\": ${jnlp_port}\n        }\n      ],\n      \"logConfiguration\": {\n        \"logDriver\": \"awslogs\",\n        \"options\": {\n            \"awslogs-group\": \"${log_group}\",\n            \"awslogs-region\": \"${region}\",\n            \"awslogs-stream-prefix\": \"controller\"\n        }\n      },\n      \"secrets\": [\n        {\n          \"name\": \"ADMIN_PWD\",\n          \"valueFrom\": \"arn:aws:ssm:${region}:${account_id}:parameter/jenkins-pwd\"\n        }\n      ]\n    }\n]\n  ","vars":{"account_id":"115553109071","container_image":"aws_ecr_repository.jenkins_controller.repository_url","cpu":"2048","jenkins_controller_port":"8080","jenkins_home":"/var/jenkins_home","jnlp_port":"50000","log_group":"serverless-jenkins","memory":"4096","name":"serverless-jenkins-controller","region":"us-east-1","source_volume":"serverless-jenkins-efs"}},"after_unknown":{"id":true,"rendered":true,"vars":{}}}},{"address":"module.vpc.aws_eip.nat[0]","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_eip.nat[1]","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_eip.nat[2]","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocation_id":"module.vpc.aws_eip.nat[0].id","connectivity_type":"public","subnet_id":"module.vpc.aws_subnet.public[0].id","tags":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1a","Terraform":"true"}},"after_unknown":{"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.this[1]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"this","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocation_id":"module.vpc.aws_eip.nat[1].id","connectivity_type":"public","subnet_id":"module.vpc.aws_subnet.public[1].id","tags":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1b","Terraform":"true"}},"after_unknown":{"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.this[2]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"this","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocation_id":"module.vpc.aws_eip.nat[2].id","connectivity_type":"public","subnet_id":"module.vpc.aws_subnet.public[2].id","tags":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-us-east-1c","Terraform":"true"}},"after_unknown":{"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":"module.vpc.aws_nat_gateway.this[0].id","route_table_id":"module.vpc.aws_route_table.private[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"state":true,"timeouts":{}}}},{"address":"module.vpc.aws_route.private_nat_gateway[1]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":"module.vpc.aws_nat_gateway.this[1].id","route_table_id":"module.vpc.aws_route_table.private[1].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"state":true,"timeouts":{}}}},{"address":"module.vpc.aws_route.private_nat_gateway[2]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":"module.vpc.aws_nat_gateway.this[2].id","route_table_id":"module.vpc.aws_route_table.private[2].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"state":true,"timeouts":{}}}},{"address":"module.vpc.aws_route.public_internet_gateway[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":"module.vpc.aws_internet_gateway.this[0].id","local_gateway_id":null,"nat_gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"state":true,"timeouts":{}}}},{"address":"module.vpc.aws_route_table.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"dev","Name":"my-vpc-public","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.private[0].id","subnet_id":"module.vpc.aws_subnet.private[0].id"},"after_unknown":{"id":true}}},{"address":"module.vpc.aws_route_table_association.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.private[1].id","subnet_id":"module.vpc.aws_subnet.private[1].id"},"after_unknown":{"id":true}}},{"address":"module.vpc.aws_route_table_association.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.private[2].id","subnet_id":"module.vpc.aws_subnet.private[2].id"},"after_unknown":{"id":true}}},{"address":"module.vpc.aws_route_table_association.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","subnet_id":"module.vpc.aws_subnet.public[0].id"},"after_unknown":{"id":true}}},{"address":"module.vpc.aws_route_table_association.public[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","subnet_id":"module.vpc.aws_subnet.public[1].id"},"after_unknown":{"id":true}}},{"address":"module.vpc.aws_route_table_association.public[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"route_table_id":"module.vpc.aws_route_table.public[0].id","subnet_id":"module.vpc.aws_subnet.public[2].id"},"after_unknown":{"id":true}}},{"address":"module.vpc.aws_subnet.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1a","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1b","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-private-us-east-1c","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-public-us-east-1a","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public-us-east-1a","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[1]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.102.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-public-us-east-1b","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public-us-east-1b","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[2]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.103.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"dev","Name":"my-vpc-public-us-east-1c","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc-public-us-east-1c","Terraform":"true"},"timeouts":null,"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":false,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc","Terraform":"true"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpn_gateway.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_vpn_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"amazon_side_asn":"64512","availability_zone":null,"tags":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"my-vpc","Terraform":"true"},"vpc_id":"module.vpc.aws_vpc.this[0].id"},"after_unknown":{"arn":true,"id":true,"tags":{},"tags_all":{}}}},{"address":"null_resource.build_docker_image","mode":"managed","type":"null_resource","name":"build_docker_image","provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":{"src_hash":"jenkins:\n    systemMessage: \"Amazon Fargate Demo\"\n    numExecutors: 0\n    remotingSecurity:\n      enabled: true\n    agentProtocols:\n        - \"JNLP4-connect\"\n    securityRealm:\n        local:\n            allowsSignup: false\n            users:\n                - id: ecsuser\n                  password: \\$${ADMIN_PWD}\n    authorizationStrategy:\n        globalMatrix:\n            grantedPermissions:\n                - \"Overall/Read:anonymous\"\n                - \"Job/Read:anonymous\"\n                - \"View/Read:anonymous\"\n                - \"Overall/Administer:authenticated\"\n    crumbIssuer: \"standard\"\n    slaveAgentPort: 50000\n    clouds:\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate_spot}\n              name: \"fargate-cloud-spot\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example-spot\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate}\n              name: \"fargate-cloud\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\nsecurity:\n  sSHD:\n    port: -1\njobs:\n  - script: \u003e\n      pipelineJob('Simple job critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on non spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n  - script: \u003e\n      pipelineJob('Simple job non critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example-spot'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on a spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n"}},"after_unknown":{"id":true,"triggers":{}}}},{"address":"null_resource.render_template","mode":"managed","type":"null_resource","name":"render_template","provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":{"src_hash":"jenkins:\n    systemMessage: \"Amazon Fargate Demo\"\n    numExecutors: 0\n    remotingSecurity:\n      enabled: true\n    agentProtocols:\n        - \"JNLP4-connect\"\n    securityRealm:\n        local:\n            allowsSignup: false\n            users:\n                - id: ecsuser\n                  password: \\$${ADMIN_PWD}\n    authorizationStrategy:\n        globalMatrix:\n            grantedPermissions:\n                - \"Overall/Read:anonymous\"\n                - \"Job/Read:anonymous\"\n                - \"View/Read:anonymous\"\n                - \"Overall/Administer:authenticated\"\n    crumbIssuer: \"standard\"\n    slaveAgentPort: 50000\n    clouds:\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate_spot}\n              name: \"fargate-cloud-spot\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example-spot\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\n        - ecs:\n              allowedOverrides: \"inheritFrom,label,memory,cpu,image\"\n              credentialsId: \"\"\n              cluster: ${ecs_cluster_fargate}\n              name: \"fargate-cloud\"\n              regionName: ${cluster_region}\n              retentionTimeout: 10\n              jenkinsUrl: \"http://${jenkins_cloud_map_name}:${jenkins_controller_port}\"\n              templates:\n                  - assignPublicIp: true\n                    cpu: \"512\"\n                    image: \"jenkins/inbound-agent\"\n                    label: \"build-example\"\n                    launchType: \"FARGATE\"\n                    memory: 0\n                    memoryReservation: 1024\n                    networkMode: \"awsvpc\"\n                    privileged: false\n                    remoteFSRoot: \"/home/jenkins\"\n                    securityGroups: ${agent_security_groups}\n                    sharedMemorySize: 0\n                    subnets: ${subnets}\n                    templateName: \"build-example\"\n                    uniqueRemoteFSRoot: false\nsecurity:\n  sSHD:\n    port: -1\njobs:\n  - script: \u003e\n      pipelineJob('Simple job critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on non spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n  - script: \u003e\n      pipelineJob('Simple job non critical task') {\n        definition {\n          cps {\n            script('''\n              pipeline {\n                  agent {\n                      ecs {\n                          inheritFrom 'build-example-spot'\n                      }\n                  }\n                  stages {\n                    stage('Test') {\n                        steps {\n                            script {\n                                sh \"echo this was executed on a spot instance\"\n                            }\n                            sh 'sleep 120'\n                            sh 'echo sleep is done'\n                        }\n                    }\n                  }\n              }'''.stripIndent())\n              sandbox()\n          }\n        }\n      }\n"}},"after_unknown":{"id":true,"triggers":{}}}}],"output_changes":{"azs":{"actions":["create"],"before":null,"after":["us-east-1a","us-east-1b","us-east-1c"],"after_unknown":false},"cgw_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"cgw_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_internet_gateway_route_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_ipv6_egress_route_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_nat_gateway_route_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_network_acl_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_route_table_association_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_route_table_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"],"after_unknown":false},"database_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_subnet_group":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_subnet_group_name":{"actions":["create"],"before":null,"after":"","after_unknown":false},"database_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"database_subnets_ipv6_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"default_network_acl_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].default_network_acl_id","after_unknown":false},"default_route_table_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].default_route_table_id","after_unknown":false},"default_security_group_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].default_security_group_id","after_unknown":false},"default_vpc_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_cidr_block":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_default_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_default_route_table_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_default_security_group_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_enable_dns_hostnames":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_enable_dns_support":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_instance_tenancy":{"actions":["create"],"before":null,"after":"","after_unknown":false},"default_vpc_main_route_table_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"efs_access_point_id":{"actions":["create"],"before":null,"after":"aws_efs_access_point.this.id","after_unknown":false},"efs_aws_backup_plan_name":{"actions":["create"],"before":null,"after":["serverless-jenkins-plan"],"after_unknown":false},"efs_aws_backup_vault_name":{"actions":["create"],"before":null,"after":["serverless-jenkins-vault"],"after_unknown":false},"efs_file_system_dns_name":{"actions":["create"],"before":null,"after":"aws_efs_file_system.this.dns_name","after_unknown":false},"efs_file_system_id":{"actions":["create"],"before":null,"after":"aws_efs_file_system.this.id","after_unknown":false},"efs_security_group_id":{"actions":["create"],"before":null,"after":"aws_security_group.efs_security_group.id","after_unknown":false},"egress_only_internet_gateway_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_network_acl_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_route_table_association_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"elasticache_route_table_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"],"after_unknown":false},"elasticache_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"elasticache_subnet_group":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_subnet_group_name":{"actions":["create"],"before":null,"after":"","after_unknown":false},"elasticache_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"elasticache_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"elasticache_subnets_ipv6_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"igw_arn":{"actions":["create"],"before":null,"after":"module.vpc.aws_internet_gateway.this[0].arn","after_unknown":false},"igw_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_internet_gateway.this[0].id","after_unknown":false},"intra_network_acl_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"intra_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"intra_route_table_association_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_route_table_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"intra_subnets_ipv6_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"name":{"actions":["create"],"before":null,"after":"my-vpc","after_unknown":false},"nat_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_eip.nat[0].id","module.vpc.aws_eip.nat[1].id","module.vpc.aws_eip.nat[2].id"],"after_unknown":false},"nat_public_ips":{"actions":["create"],"before":null,"after":["module.vpc.aws_eip.nat[0].public_ip","module.vpc.aws_eip.nat[1].public_ip","module.vpc.aws_eip.nat[2].public_ip"],"after_unknown":false},"natgw_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_nat_gateway.this[0].id","module.vpc.aws_nat_gateway.this[1].id","module.vpc.aws_nat_gateway.this[2].id"],"after_unknown":false},"outpost_network_acl_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"outpost_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"outpost_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"outpost_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"outpost_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"outpost_subnets_ipv6_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"private_ipv6_egress_route_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"private_nat_gateway_route_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route.private_nat_gateway[0].id","module.vpc.aws_route.private_nat_gateway[1].id","module.vpc.aws_route.private_nat_gateway[2].id"],"after_unknown":false},"private_network_acl_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"private_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"private_route_table_association_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route_table_association.private[0].id","module.vpc.aws_route_table_association.private[1].id","module.vpc.aws_route_table_association.private[2].id"],"after_unknown":false},"private_route_table_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"],"after_unknown":false},"private_subnet_arns":{"actions":["create"],"before":null,"after":["module.vpc.aws_subnet.private[0].arn","module.vpc.aws_subnet.private[1].arn","module.vpc.aws_subnet.private[2].arn"],"after_unknown":false},"private_subnets":{"actions":["create"],"before":null,"after":["module.vpc.aws_subnet.private[0].id","module.vpc.aws_subnet.private[1].id","module.vpc.aws_subnet.private[2].id"],"after_unknown":false},"private_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":["10.0.1.0/24","10.0.2.0/24","10.0.3.0/24"],"after_unknown":false},"private_subnets_ipv6_cidr_blocks":{"actions":["create"],"before":null,"after":[null,null,null],"after_unknown":false},"public_internet_gateway_ipv6_route_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"public_internet_gateway_route_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_route.public_internet_gateway[0].id","after_unknown":false},"public_network_acl_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"public_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"public_route_table_association_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route_table_association.public[0].id","module.vpc.aws_route_table_association.public[1].id","module.vpc.aws_route_table_association.public[2].id"],"after_unknown":false},"public_route_table_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route_table.public[0].id"],"after_unknown":false},"public_subnet_arns":{"actions":["create"],"before":null,"after":["module.vpc.aws_subnet.public[0].arn","module.vpc.aws_subnet.public[1].arn","module.vpc.aws_subnet.public[2].arn"],"after_unknown":false},"public_subnets":{"actions":["create"],"before":null,"after":["module.vpc.aws_subnet.public[0].id","module.vpc.aws_subnet.public[1].id","module.vpc.aws_subnet.public[2].id"],"after_unknown":false},"public_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":["10.0.101.0/24","10.0.102.0/24","10.0.103.0/24"],"after_unknown":false},"public_subnets_ipv6_cidr_blocks":{"actions":["create"],"before":null,"after":[null,null,null],"after_unknown":false},"redshift_network_acl_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"redshift_network_acl_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"redshift_public_route_table_association_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"redshift_route_table_association_ids":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"redshift_route_table_ids":{"actions":["create"],"before":null,"after":["module.vpc.aws_route_table.private[0].id","module.vpc.aws_route_table.private[1].id","module.vpc.aws_route_table.private[2].id"],"after_unknown":false},"redshift_subnet_arns":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"redshift_subnet_group":{"actions":["create"],"before":null,"after":"","after_unknown":false},"redshift_subnets":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"redshift_subnets_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"redshift_subnets_ipv6_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false},"this_customer_gateway":{"actions":["create"],"before":null,"after":{},"after_unknown":false},"vgw_arn":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpn_gateway.this[0].arn","after_unknown":false},"vgw_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpn_gateway.this[0].id","after_unknown":false},"vpc_arn":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].arn","after_unknown":false},"vpc_cidr_block":{"actions":["create"],"before":null,"after":"10.0.0.0/16","after_unknown":false},"vpc_enable_dns_hostnames":{"actions":["create"],"before":null,"after":false,"after_unknown":false},"vpc_enable_dns_support":{"actions":["create"],"before":null,"after":true,"after_unknown":false},"vpc_flow_log_cloudwatch_iam_role_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_flow_log_destination_arn":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_flow_log_destination_type":{"actions":["create"],"before":null,"after":"cloud-watch-logs","after_unknown":false},"vpc_flow_log_id":{"actions":["create"],"before":null,"after":"","after_unknown":false},"vpc_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].id","after_unknown":false},"vpc_instance_tenancy":{"actions":["create"],"before":null,"after":"default","after_unknown":false},"vpc_ipv6_association_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].ipv6_association_id","after_unknown":false},"vpc_ipv6_cidr_block":{"actions":["create"],"before":null,"after_unknown":true},"vpc_main_route_table_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].main_route_table_id","after_unknown":false},"vpc_owner_id":{"actions":["create"],"before":null,"after":"module.vpc.aws_vpc.this[0].owner_id","after_unknown":false},"vpc_secondary_cidr_blocks":{"actions":["create"],"before":null,"after":[],"after_unknown":false}},"prior_state":{"format_version":"0.1","terraform_version":"0.13.4","values":{"root_module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"115553109071","arn":"arn:aws:sts::115553109071:assumed-role/AWSReservedSSO_admin_in_develop_fb314e4593b59bf2/imanuel.m@indeni.com","id":"115553109071","user_id":"AROARVZ4AQRHRH7ZLU5BZ:imanuel.m@indeni.com"}},{"address":"data.aws_ecr_authorization_token.token","mode":"data","type":"aws_ecr_authorization_token","name":"token","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"authorization_token":"QVdTOmV5SndZWGxzYjJGa0lqb2lUV1J2VlVWd1JIVmtkWFZGTlRSVk5FWldVMHR2WTBsVWRrRmpUMnRRYWxOUlRIcFFkbkZDT1ZCdVdtZFBXRUk1TWpORFlTdEVkRzVHTkVWQmREbHhibE5MVkZJMFZFVkpaa0pqUWtKMWQzRTJXbGxHUjFkUmVrUnBZemxvY0hsc1pHb3pXRk5RTVUxeFZtUlhPR2s1VUdsd2VXVlZhM05RUWpWc05sWlpjM05SYlUwd1ZIVlVVRU5XUXpoa1owcFJaVEIzZUd4cWQwZDZUek5qWmt0M1VrSlFiV1ZKYkUxRE1XcEpSbTgxYkRNeVJraENSRXRQUnpZM1JYSnRlaTkxWlVkR1REbEJTR3BaVWpoMUx6ZDFlSHBRVjNob1VXZHhZVE5WTm5CWU5FaGlNRlpUTjFNM1QwSjJVMGxpTkVscFExUlFSVUpwTlcxWldYVk1VRE55YlVGNE1IQk5iSGR2TTJKbFZYUlJiQzlNUnk4eWNWUXdOVVZpTDB0Tk9YQnliMmx5U1VaRk1GVkpZeTg0YUhWbWFFUnVSVlVyVVdwS1MyOVhZMFIxUlVKNmVGazRlbFpCYkdWeWFsSkxXWGw2U1hnMFIxTmhORmR2VTBGV0syVkdabTgyWnk5V05UaFlaRWxSUW1oR1JUQjZabFUxZEhwSmNVTXdkVk4zV1RSNVoyUkhPRXB0T1V4NGVUVTFiM1ZzUkROeWRFRkRha3RWTTNOYVNWcDJVVFJ0ZVhka1dYcG5MMkZrUVdOV1NsZEdSMlZPVjJ4MVR6a3ZSalV6VnpWek9GSm5iR1ZHTnpNclRWbHpkM1pKUVhaRmVtOU5jRTV5YWxnMmRtUlNUVWRZYVZVMFpFRlNXa2RLTW1GSVdsWTROblZFUVd3dldXTlFiMHA2UkRaaWNETXhNVk54U2tWR1ZFc3djSGx6WW1aaGNUaEdPQzlWT1VKMWJucE5XblZDUTFBNVVHZE1WVk53WlVOaFRqbHNaRTlUTlVoTmMyOUtTRVpIVG5jNFppdEVTWFZZTDA1bFJEY3JhaTl1WlhaeFdTdHlNM0JhVUc5MlZXOUVNMFJrZEZGUGFtUm1hbGxOVVhWRWVEZGtTWEZCVUVZcmNXNUhWekprT1V4bVRIbGxaWFUzUmxvNU5ESTFVVXRuZG1OVWNrUllaMU12VlN0bk56TkNlaXMxUzFsemNEQnlhbXd6UlRJeU5XUnJiVkpLVVZCVVkxRlBNRlZUTTNWUWFXVXhiWGNyUjB3M1dVZGlORVJQYXpGWU9XbHJiRVZCUmpBMVVWVmpVVlp6YUhjd2ExazVXa1pvU1U1Q05FbHNSRGRET0c1elZEaHhkRlJNWkVjd1RWa3pkRkpxUTNsalYycG1SVVJITDFVelJYSlFVMDV5WVhCc0sxWlBhMlpGVGtNeVJIQmphVTlhYkVsUlVFZEVUbTFQU0hWYVRqSnNNQzl0WjB0amQxSkRSVFZMUWpWT1JpdHJZVlZ5VjBnekszcHJTV1EyVEZscWJVeDJZbGh4UVhZNFpXNUZSelZsWkhoMFJtb3dSVU5NUW13d1JEWnBMekpMVTBwWGFWRmpSbGhPWkVsUmRVY3hRMU5hUTBZeFZHOHpURVo1UVZKaGNGTnBkRWRvYjNoSldUZFNTVlJLZWxKUU1HeElLMmx3YkZoSE9YWTFha1o1V1ZBMUwxQk9hSEZyVlhORlNTdFVTVzVaWXpCcFVtUnBWVk5DVlVoUVYwMVRTRFJWWkVscVMydGFhV2hzVFZwcVpEQjVZWEZzVTB4M1dXWm5lVEJ1V2tKb055OVBUbFpJU1U5eFNYaFJZelZJVDB4alZtdzNTV294YVZGMFdVZFRjR0p6YkVGdWVGSmtSRmhYTUU1M1NEUnlaa3h5VFdkUFN6UkpZbkZSVlVKVEsyeFRjVUV2UVhGdVlYSjJibmhVVVdVM1pYZDNVRWhPY0daTVdVeHlNMUV2TlUweU4ydG9hRWRCV1VzeE4ybHNVWFpSVFZKd1dFVTVNV0V2TTJadE1FUktWVGhTVjJ4cFkyZ3lTVFpIUmxkcmJqbDZXVFI1UjI1M1NtWkRla1ppUld0MmMzaElkV0puT1U1S1kycHhSekIwTTBKMlIzSjRiRXhEVTJsdmVtSlpPR1ZOVW1aNVp5OUhZVmh1VVRkQlduSTNOWHBOYWxkVVZsb3djbTVPT0RSdVFsVmpXbE5vVlZoaFkwdFRlbEE0UnpGeGJWZ3dlblJ3VTJ0R2MwUXdURWgzT1dNeVJrNHlUbEZVSzNwVVZIbGxWMjl6Y1ZBMlVURkdkSHBsYWsxWGNFUnBTM1JQTjA1WFUwVXJPVWRFTkRaMlFtWldVaTlpWVVWdk9EZDFSRUYzTUdwd1oxcERkSGQxY1d0TWQwRldTRWcxV2xKUk1GRTJZbXhETTBwRFIzaHJRemQyWkVKNkszbHpTRWhOVFZOR2FFSlJSbXhKWjBWR1RuQllLeXMxU1hsRWJVcE5Tbk41VFRaM1JtTlVUVnB2YWtoclFWaEtNSGhMU0hKVWNHUlBNRWMyWVdKNmVGRXZjRGd2VUhsblRteEhSR3MwZEVoWmJEZ3hRbXd3VTFOVVprOVVZbWRzTkhWV1RVa3pObkZaTkN0RmFrSk5iblJIU2xWT1VrcDVUbGRUVGxsUk5YTTRTakJVTTFVclpFazFWa3RWTUU1NFNqSTJZM2x6WlVFeVNURkJNblJaYnpKeWFFOVVjVll4Y0Zsdk4yZHdaR2RuYWpsRU1XbDVZVzV5U1dGVUwxWXdkbEY1Y0ZkUFltTkhTWEJZYWxOU1YxZHZOblprTUV4NlRrdERiSGwySWl3aVpHRjBZV3RsZVNJNklrRlJSVUpCU0doM2JUQlpZVWxUU21WU2RFcHROVzR4UnpaMWNXVmxhMWgxYjFoWVVHVTFWVVpqWlRsU2NUZ3ZNVFIzUVVGQlNEUjNaa0ZaU2t0dldrbG9kbU5PUVZGalIyOUhPSGRpVVVsQ1FVUkNiMEpuYTNGb2EybEhPWGN3UWtKM1JYZElaMWxLV1VsYVNVRlhWVVJDUVVWMVRVSkZSVVJPSzFsTWQyeHJSVUZ4U0hOWFFtUk1aMGxDUlVsQk4wVlJWVUUzYm1ST1RuSlplVEIxYUdvMFMwYzNSRzF4UW1aQ2VIcEtjbEpUV2xOWWNrUlRTMVF6ZFRSQlp6TjVibEp1YWpCMFRWbHlVa3BqY1VaUmRURjZSREkyYjIxWksydzJVbU0xS3pnOUlpd2lkbVZ5YzJsdmJpSTZJaklpTENKMGVYQmxJam9pUkVGVVFWOUxSVmtpTENKbGVIQnBjbUYwYVc5dUlqb3hOakkyTVRNME1ETTVmUT09","expires_at":"2021-07-12T23:53:59Z","id":"us-east-1","password":"eyJwYXlsb2FkIjoiTWRvVUVwRHVkdXVFNTRVNEZWU0tvY0lUdkFjT2tQalNRTHpQdnFCOVBuWmdPWEI5MjNDYStEdG5GNEVBdDlxblNLVFI0VEVJZkJjQkJ1d3E2WllGR1dRekRpYzlocHlsZGozWFNQMU1xVmRXOGk5UGlweWVVa3NQQjVsNlZZc3NRbU0wVHVUUENWQzhkZ0pRZTB3eGxqd0d6TzNjZkt3UkJQbWVJbE1DMWpJRm81bDMyRkhCREtPRzY3RXJtei91ZUdGTDlBSGpZUjh1Lzd1eHpQV3hoUWdxYTNVNnBYNEhiMFZTN1M3T0J2U0liNElpQ1RQRUJpNW1ZWXVMUDNybUF4MHBNbHdvM2JlVXRRbC9MRy8ycVQwNUViL0tNOXByb2lySUZFMFVJYy84aHVmaERuRVUrUWpKS29XY0R1RUJ6eFk4elZBbGVyalJLWXl6SXg0R1NhNFdvU0FWK2VGZm82Zy9WNThYZElRQmhGRTB6ZlU1dHpJcUMwdVN3WTR5Z2RHOEptOUx4eTU1b3VsRDNydEFDaktVM3NaSVp2UTRteXdkWXpnL2FkQWNWSldGR2VOV2x1TzkvRjUzVzVzOFJnbGVGNzMrTVlzd3ZJQXZFem9NcE5yalg2dmRSTUdYaVU0ZEFSWkdKMmFIWlY4NnVEQWwvWWNQb0p6RDZicDMxMVNxSkVGVEswcHlzYmZhcThGOC9VOUJ1bnpNWnVCQ1A5UGdMVVNwZUNhTjlsZE9TNUhNc29KSEZHTnc4ZitESXVYL05lRDcrai9uZXZxWStyM3BaUG92VW9EM0RkdFFPamRmallNUXVEeDdkSXFBUEYrcW5HVzJkOUxmTHllZXU3Rlo5NDI1UUtndmNUckRYZ1MvVStnNzNCeis1S1lzcDByamwzRTIyNWRrbVJKUVBUY1FPMFVTM3VQaWUxbXcrR0w3WUdiNERPazFYOWlrbEVBRjA1UVVjUVZzaHcwa1k5WkZoSU5CNElsRDdDOG5zVDhxdFRMZEcwTVkzdFJqQ3ljV2pmRURHL1UzRXJQU05yYXBsK1ZPa2ZFTkMyRHBjaU9abElRUEdETm1PSHVaTjJsMC9tZ0tjd1JDRTVLQjVORitrYVVyV0gzK3prSWQ2TFlqbUx2YlhxQXY4ZW5FRzVlZHh0RmowRUNMQmwwRDZpLzJLU0pXaVFjRlhOZElRdUcxQ1NaQ0YxVG8zTEZ5QVJhcFNpdEdob3hJWTdSSVRKelJQMGxIK2lwbFhHOXY1akZ5WVA1L1BOaHFrVXNFSStUSW5ZYzBpUmRpVVNCVUhQV01TSDRVZElqS2taaWhsTVpqZDB5YXFsU0x3WWZneTBuWkJoNy9PTlZISU9xSXhRYzVIT0xjVmw3SWoxaVF0WUdTcGJzbEFueFJkRFhXME53SDRyZkxyTWdPSzRJYnFRVUJTK2xTcUEvQXFuYXJ2bnhUUWU3ZXd3UEhOcGZMWUxyM1EvNU0yN2toaEdBWUsxN2lsUXZRTVJwWEU5MWEvM2ZtMERKVThSV2xpY2gySTZHRldrbjl6WTR5R253SmZDekZiRWt2c3hIdWJnOU5KY2pxRzB0M0J2R3J4bExDU2lvemJZOGVNUmZ5Zy9HYVhuUTdBWnI3NXpNaldUVlowcm5OODRuQlVjWlNoVVhhY0tTelA4RzFxbVgwenRwU2tGc0QwTEh3OWMyRk4yTlFUK3pUVHllV29zcVA2UTFGdHplak1XcERpS3RPN05XU0UrOUdENDZ2QmZWUi9iYUVvODd1REF3MGpwZ1pDdHd1cWtMd0FWSEg1WlJRMFE2YmxDM0pDR3hrQzd2ZEJ6K3lzSEhNTVNGaEJRRmxJZ0VGTnBYKys1SXlEbUpNSnN5TTZ3RmNUTVpvakhrQVhKMHhLSHJUcGRPMEc2YWJ6eFEvcDgvUHlnTmxHRGs0dEhZbDgxQmwwU1NUZk9UYmdsNHVWTUkzNnFZNCtFakJNbnRHSlVOUkp5TldTTllRNXM4SjBUM1UrZEk1VktVME54SjI2Y3lzZUEySTFBMnRZbzJyaE9UcVYxcFlvN2dwZGdnajlEMWl5YW5ySWFUL1YwdlF5cFdPYmNHSXBYalNSV1dvNnZkMEx6TktDbHl2IiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRUROK1lMd2xrRUFxSHNXQmRMZ0lCRUlBN0VRVUE3bmROTnJZeTB1aGo0S0c3RG1xQmZCeHpKclJTWlNYckRTS1QzdTRBZzN5blJuajB0TVlyUkpjcUZRdTF6RDI2b21ZK2w2UmM1Kzg9IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNjI2MTM0MDM5fQ==","proxy_endpoint":"https://115553109071.dkr.ecr.us-east-1.amazonaws.com","registry_id":null,"user_name":"AWS"}},{"address":"data.aws_iam_policy_document.aws_backup_assume_policy[0]","mode":"data","type":"aws_iam_policy_document","name":"aws_backup_assume_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"624367811","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"backup.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["backup.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.ecs_assume_policy","mode":"data","type":"aws_iam_policy_document","name":"ecs_assume_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"320642683","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ecs-tasks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_iam_policy_document.ecs_execution_policy","mode":"data","type":"aws_iam_policy_document","name":"ecs_execution_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"4112626552","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\",\n        \"ecr:GetDownloadUrlForLayer\",\n        \"ecr:GetAuthorizationToken\",\n        \"ecr:BatchGetImage\",\n        \"ecr:BatchCheckLayerAvailability\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetAuthorizationToken","ecr:GetDownloadUrlForLayer","logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"region":{"constant_value":"us-east-1"}}}},"root_module":{"outputs":{"efs_access_point_id":{"expression":{"references":["aws_efs_access_point.this"]},"description":"The id of the efs access point"},"efs_aws_backup_plan_name":{"expression":{"references":["aws_backup_plan.this"]},"description":"The name of the aws backup plan used for EFS backups"},"efs_aws_backup_vault_name":{"expression":{"references":["aws_backup_vault.this"]},"description":"The name of the aws backup vault used for EFS backups"},"efs_file_system_dns_name":{"expression":{"references":["aws_efs_file_system.this"]},"description":"The dns name of the efs file system"},"efs_file_system_id":{"expression":{"references":["aws_efs_file_system.this"]},"description":"The id of the efs file system"},"efs_security_group_id":{"expression":{"references":["aws_security_group.efs_security_group"]},"description":"The id of the efs security group"}},"resources":[{"address":"aws_backup_plan.this","mode":"managed","type":"aws_backup_plan","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.name_prefix"]},"rule":[{"completion_window":{"references":["var.efs_backup_completion_window"]},"recovery_point_tags":{"references":["var.tags"]},"rule_name":{"references":["var.name_prefix"]},"schedule":{"references":["var.efs_backup_schedule"]},"start_window":{"references":["var.efs_backup_start_window"]},"target_vault_name":{"references":["aws_backup_vault.this","count.index"]}}],"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.efs_enable_backup"]},"raw_data":{"FileName":"efs.tf","StartLine":49,"EndLine":70}},{"address":"aws_backup_selection.this","mode":"managed","type":"aws_backup_selection","name":"this","provider_config_key":"aws","expressions":{"iam_role_arn":{"references":["aws_iam_role.aws_backup_role","count.index"]},"name":{"references":["var.name_prefix"]},"plan_id":{"references":["aws_backup_plan.this","count.index"]},"resources":{"references":["aws_efs_file_system.this"]}},"schema_version":0,"count_expression":{"references":["var.efs_enable_backup"]},"raw_data":{"FileName":"efs.tf","StartLine":79,"EndLine":89}},{"address":"aws_backup_vault.this","mode":"managed","type":"aws_backup_vault","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.name_prefix"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.efs_enable_backup"]},"raw_data":{"FileName":"efs.tf","StartLine":72,"EndLine":77}},{"address":"aws_cloudwatch_log_group.jenkins_controller_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"jenkins_controller_log_group","provider_config_key":"aws","expressions":{"name":{"references":["var.name_prefix"]},"retention_in_days":{"references":["var.jenkins_controller_task_log_retention_days"]},"tags":{"references":["var.tags"]}},"schema_version":0,"raw_data":{"FileName":"ecs.tf","StartLine":40,"EndLine":45}},{"address":"aws_ecr_repository.jenkins_controller","mode":"managed","type":"aws_ecr_repository","name":"jenkins_controller","provider_config_key":"aws","expressions":{"image_scanning_configuration":[{"scan_on_push":{"constant_value":true}}],"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"references":["var.jenkins_ecr_repository_name"]}},"schema_version":0,"raw_data":{"FileName":"jenkins_image.tf","StartLine":8,"EndLine":16}},{"address":"aws_ecs_cluster.jenkins_agents","mode":"managed","type":"aws_ecs_cluster","name":"jenkins_agents","provider_config_key":"aws","expressions":{"capacity_providers":{"constant_value":["FARGATE_SPOT"]},"name":{"references":["var.name_prefix"]},"setting":[{"name":{"constant_value":"containerInsights"},"value":{"constant_value":"enabled"}}],"tags":{"references":["var.tags"]}},"schema_version":0,"raw_data":{"FileName":"ecs.tf","StartLine":12,"EndLine":20}},{"address":"aws_ecs_cluster.jenkins_controller","mode":"managed","type":"aws_ecs_cluster","name":"jenkins_controller","provider_config_key":"aws","expressions":{"capacity_providers":{"constant_value":["FARGATE"]},"name":{"references":["var.name_prefix"]},"setting":[{"name":{"constant_value":"containerInsights"},"value":{"constant_value":"enabled"}}],"tags":{"references":["var.tags"]}},"schema_version":0,"raw_data":{"FileName":"ecs.tf","StartLine":2,"EndLine":10}},{"address":"aws_ecs_service.jenkins_controller","mode":"managed","type":"aws_ecs_service","name":"jenkins_controller","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.jenkins_controller"]},"deployment_maximum_percent":{"constant_value":100},"deployment_minimum_healthy_percent":{"constant_value":0},"desired_count":{"constant_value":1},"launch_type":{"constant_value":"FARGATE"},"load_balancer":[{"container_name":{"references":["var.name_prefix"]},"container_port":{"references":["var.jenkins_controller_port"]},"target_group_arn":{"references":["aws_lb_target_group.this"]}}],"name":{"references":["var.name_prefix"]},"network_configuration":[{"assign_public_ip":{"constant_value":false},"security_groups":{"references":["aws_security_group.jenkins_controller_security_group"]},"subnets":{"references":["module.vpc.private_subnets"]}}],"platform_version":{"constant_value":"1.4.0"},"service_registries":[{"port":{"references":["var.jenkins_jnlp_port"]},"registry_arn":{"references":["aws_service_discovery_service.controller"]}}],"task_definition":{"references":["aws_ecs_task_definition.jenkins_controller"]}},"schema_version":0,"depends_on":["aws_lb_listener.https"],"raw_data":{"FileName":"ecs.tf","StartLine":77,"EndLine":109}},{"address":"aws_ecs_task_definition.jenkins_controller","mode":"managed","type":"aws_ecs_task_definition","name":"jenkins_controller","provider_config_key":"aws","expressions":{"container_definitions":{"references":["data.template_file.jenkins_controller_container_def"]},"cpu":{"references":["var.jenkins_controller_cpu"]},"execution_role_arn":{"references":["var.ecs_execution_role_arn","var.ecs_execution_role_arn","aws_iam_role.jenkins_controller_task_role"]},"family":{"references":["var.name_prefix"]},"memory":{"references":["var.jenkins_controller_memory"]},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]},"tags":{"references":["var.tags"]},"task_role_arn":{"references":["var.jenkins_controller_task_role_arn","var.jenkins_controller_task_role_arn","aws_iam_role.jenkins_controller_task_role"]},"volume":[{"efs_volume_configuration":[{"authorization_config":[{"access_point_id":{"references":["aws_efs_access_point.this"]},"iam":{"constant_value":"ENABLED"}}],"file_system_id":{"references":["aws_efs_file_system.this"]},"transit_encryption":{"constant_value":"ENABLED"}}],"name":{"references":["var.name_prefix"]}}]},"schema_version":1,"raw_data":{"FileName":"ecs.tf","StartLine":49,"EndLine":75}},{"address":"aws_efs_access_point.this","mode":"managed","type":"aws_efs_access_point","name":"this","provider_config_key":"aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.this"]},"posix_user":[{"gid":{"constant_value":0},"uid":{"constant_value":0}}],"root_directory":[{"creation_info":[{"owner_gid":{"references":["var.efs_access_point_uid"]},"owner_uid":{"references":["var.efs_access_point_gid"]},"permissions":{"constant_value":"755"}}],"path":{"constant_value":"/"}}],"tags":{"references":["var.tags"]}},"schema_version":0,"raw_data":{"FileName":"efs.tf","StartLine":21,"EndLine":38}},{"address":"aws_efs_file_system.this","mode":"managed","type":"aws_efs_file_system","name":"this","provider_config_key":"aws","expressions":{"creation_token":{"references":["var.name_prefix"]},"encrypted":{"references":["var.efs_enable_encryption"]},"kms_key_id":{"references":["var.efs_kms_key_arn"]},"performance_mode":{"references":["var.efs_performance_mode"]},"provisioned_throughput_in_mibps":{"references":["var.efs_provisioned_throughput_in_mibps"]},"tags":{"references":["var.tags"]},"throughput_mode":{"references":["var.efs_throughput_mode"]}},"schema_version":0,"raw_data":{"FileName":"efs.tf","StartLine":2,"EndLine":19}},{"address":"aws_efs_file_system_policy.this","mode":"managed","type":"aws_efs_file_system_policy","name":"this","provider_config_key":"aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.this"]},"policy":{"references":["data.aws_iam_policy_document.efs_resource_policy"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":28,"EndLine":31}},{"address":"aws_efs_mount_target.this","mode":"managed","type":"aws_efs_mount_target","name":"this","provider_config_key":"aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.this"]},"security_groups":{"references":["aws_security_group.efs_security_group"]},"subnet_id":{"references":["module.vpc.private_subnets","count.index"]}},"schema_version":0,"count_expression":{"constant_value":3},"raw_data":{"FileName":"efs.tf","StartLine":41,"EndLine":46}},{"address":"aws_iam_policy.ecs_execution_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_execution_policy","provider_config_key":"aws","expressions":{"name":{"references":["var.name_prefix"]},"policy":{"references":["data.aws_iam_policy_document.ecs_execution_policy"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":99,"EndLine":102}},{"address":"aws_iam_policy.jenkins_controller_task_policy","mode":"managed","type":"aws_iam_policy","name":"jenkins_controller_task_policy","provider_config_key":"aws","expressions":{"name":{"references":["var.name_prefix"]},"policy":{"references":["data.aws_iam_policy_document.jenkins_controller_task_policy"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":208,"EndLine":211}},{"address":"aws_iam_role.aws_backup_role","mode":"managed","type":"aws_iam_role","name":"aws_backup_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.aws_backup_assume_policy","count.index"]},"name":{"references":["var.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.efs_enable_backup"]},"raw_data":{"FileName":"iam.tf","StartLine":49,"EndLine":54}},{"address":"aws_iam_role.ecs_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ecs_assume_policy"]},"name":{"references":["var.name_prefix"]},"tags":{"references":["var.tags"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":93,"EndLine":97}},{"address":"aws_iam_role.jenkins_controller_task_role","mode":"managed","type":"aws_iam_role","name":"jenkins_controller_task_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ecs_assume_policy"]},"name":{"references":["var.name_prefix"]},"tags":{"references":["var.tags"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":213,"EndLine":217}},{"address":"aws_iam_role_policy_attachment.backup_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"backup_role_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup"},"role":{"references":["aws_iam_role.aws_backup_role","count.index"]}},"schema_version":0,"count_expression":{"references":["var.efs_enable_backup"]},"raw_data":{"FileName":"iam.tf","StartLine":56,"EndLine":61}},{"address":"aws_iam_role_policy_attachment.ecs_execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.ecs_execution_policy"]},"role":{"references":["aws_iam_role.ecs_execution_role"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":104,"EndLine":107}},{"address":"aws_iam_role_policy_attachment.jenkins_controller_task","mode":"managed","type":"aws_iam_role_policy_attachment","name":"jenkins_controller_task","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.jenkins_controller_task_policy"]},"role":{"references":["aws_iam_role.jenkins_controller_task_role"]}},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":219,"EndLine":222}},{"address":"aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_config_key":"aws","expressions":{"internal":{"references":["var.alb_type_internal"]},"load_balancer_type":{"constant_value":"application"},"name":{"references":["var.name_prefix"]},"security_groups":{"references":["var.alb_create_security_group","aws_security_group.alb_security_group[0]","var.alb_security_group_ids"]},"subnets":{"references":["module.vpc.public_subnets"]},"tags":{"references":["var.tags"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":119,"EndLine":136}},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_config_key":"aws","expressions":{"default_action":[{"redirect":[{"port":{"constant_value":"443"},"protocol":{"constant_value":"HTTPS"},"status_code":{"constant_value":"HTTP_301"}}],"type":{"constant_value":"redirect"}}],"load_balancer_arn":{"references":["aws_lb.this"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":158,"EndLine":172}},{"address":"aws_lb_listener.https","mode":"managed","type":"aws_lb_listener","name":"https","provider_config_key":"aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.this"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.this"]},"port":{"constant_value":443},"protocol":{"constant_value":"HTTPS"},"ssl_policy":{"constant_value":"ELBSecurityPolicy-FS-1-2-Res-2019-08"}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":174,"EndLine":184}},{"address":"aws_lb_listener_rule.redirect_http_to_https","mode":"managed","type":"aws_lb_listener_rule","name":"redirect_http_to_https","provider_config_key":"aws","expressions":{"action":[{"redirect":[{"port":{"constant_value":"443"},"protocol":{"constant_value":"HTTPS"},"status_code":{"constant_value":"HTTP_301"}}],"type":{"constant_value":"redirect"}}],"condition":[{"http_header":[{"http_header_name":{"constant_value":"*"},"values":{"constant_value":["*"]}}]}],"listener_arn":{"references":["aws_lb_listener.http"]}},"schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":186,"EndLine":205}},{"address":"aws_lb_target_group.this","mode":"managed","type":"aws_lb_target_group","name":"this","provider_config_key":"aws","expressions":{"health_check":[{"enabled":{"constant_value":true},"path":{"constant_value":"/login"}}],"name":{"references":["var.name_prefix"]},"port":{"references":["var.jenkins_controller_port"]},"protocol":{"constant_value":"HTTP"},"tags":{"references":["var.tags"]},"target_type":{"constant_value":"ip"},"vpc_id":{"references":["module.vpc.vpc_id"]}},"schema_version":0,"depends_on":["aws_lb.this"],"raw_data":{"FileName":"main.tf","StartLine":138,"EndLine":156}},{"address":"aws_route53_record.this","mode":"managed","type":"aws_route53_record","name":"this","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":true},"name":{"references":["aws_lb.this"]},"zone_id":{"references":["aws_lb.this"]}}],"name":{"references":["var.route53_alias_name"]},"type":{"constant_value":"A"},"zone_id":{"references":["var.route53_zone_id"]}},"schema_version":2,"count_expression":{"references":["var.route53_create_alias"]},"raw_data":{"FileName":"main.tf","StartLine":207,"EndLine":219}},{"address":"aws_security_group.alb_security_group","mode":"managed","type":"aws_security_group","name":"alb_security_group","provider_config_key":"aws","expressions":{"description":{"references":["var.name_prefix"]},"name":{"references":["var.name_prefix"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["module.vpc.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.alb_create_security_group"]},"raw_data":{"FileName":"main.tf","StartLine":88,"EndLine":117}},{"address":"aws_security_group.efs_security_group","mode":"managed","type":"aws_security_group","name":"efs_security_group","provider_config_key":"aws","expressions":{"description":{"references":["var.name_prefix"]},"name":{"references":["var.name_prefix"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["module.vpc.vpc_id"]}},"schema_version":1,"raw_data":{"FileName":"main.tf","StartLine":32,"EndLine":52}},{"address":"aws_security_group.jenkins_controller_security_group","mode":"managed","type":"aws_security_group","name":"jenkins_controller_security_group","provider_config_key":"aws","expressions":{"description":{"references":["var.name_prefix"]},"name":{"references":["var.name_prefix"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["module.vpc.vpc_id"]}},"schema_version":1,"raw_data":{"FileName":"main.tf","StartLine":55,"EndLine":84}},{"address":"aws_service_discovery_private_dns_namespace.controller","mode":"managed","type":"aws_service_discovery_private_dns_namespace","name":"controller","provider_config_key":"aws","expressions":{"description":{"constant_value":"Serverless Jenkins discovery managed zone."},"name":{"references":["var.name_prefix"]},"vpc":{"references":["module.vpc.vpc_id"]}},"schema_version":0,"raw_data":{"FileName":"ecs.tf","StartLine":112,"EndLine":116}},{"address":"aws_service_discovery_service.controller","mode":"managed","type":"aws_service_discovery_service","name":"controller","provider_config_key":"aws","expressions":{"dns_config":[{"dns_records":[{"ttl":{"constant_value":10},"type":{"constant_value":"A"}},{"ttl":{"constant_value":10},"type":{"constant_value":"SRV"}}],"namespace_id":{"references":["aws_service_discovery_private_dns_namespace.controller"]},"routing_policy":{"constant_value":"MULTIVALUE"}}],"health_check_custom_config":[{"failure_threshold":{"constant_value":5}}],"name":{"constant_value":"controller"}},"schema_version":0,"raw_data":{"FileName":"ecs.tf","StartLine":119,"EndLine":137}},{"address":"null_resource.build_docker_image","mode":"managed","type":"null_resource","name":"build_docker_image","provider_config_key":"null","provisioners":[{"type":"local-exec","expressions":{"command":{"references":["data.aws_ecr_authorization_token.token","local.ecr_endpoint","aws_ecr_repository.jenkins_controller","path.module","aws_ecr_repository.jenkins_controller"]}}}],"expressions":{"triggers":{"references":["path.module"]}},"schema_version":0,"depends_on":["null_resource.render_template"],"raw_data":{"FileName":"jenkins_image.tf","StartLine":49,"EndLine":61}},{"address":"null_resource.render_template","mode":"managed","type":"null_resource","name":"render_template","provider_config_key":"null","provisioners":[{"type":"local-exec","expressions":{"command":{"references":["path.module","data.template_file.jenkins_configuration_def"]}}}],"expressions":{"triggers":{"references":["path.module"]}},"schema_version":0,"depends_on":["data.template_file.jenkins_configuration_def"],"raw_data":{"FileName":"jenkins_image.tf","StartLine":35,"EndLine":47}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":5,"EndLine":5}},{"address":"data.aws_ecr_authorization_token.token","mode":"data","type":"aws_ecr_authorization_token","name":"token","provider_config_key":"aws","schema_version":0,"raw_data":{"FileName":"jenkins_image.tf","StartLine":1,"EndLine":1}},{"address":"data.aws_iam_policy_document.aws_backup_assume_policy","mode":"data","type":"aws_iam_policy_document","name":"aws_backup_assume_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["backup.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["var.efs_enable_backup"]},"raw_data":{"FileName":"iam.tf","StartLine":35,"EndLine":47}},{"address":"data.aws_iam_policy_document.ecs_assume_policy","mode":"data","type":"aws_iam_policy_document","name":"ecs_assume_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":65,"EndLine":75}},{"address":"data.aws_iam_policy_document.ecs_execution_policy","mode":"data","type":"aws_iam_policy_document","name":"ecs_execution_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ecr:GetAuthorizationToken","ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","logs:CreateLogStream","logs:CreateLogGroup","logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":77,"EndLine":91}},{"address":"data.aws_iam_policy_document.efs_resource_policy","mode":"data","type":"aws_iam_policy_document","name":"efs_resource_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["elasticfilesystem:ClientRootAccess","elasticfilesystem:ClientMount","elasticfilesystem:ClientWrite"]},"condition":[{"test":{"constant_value":"Bool"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:SecureTransport"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["local.account_id"]},"type":{"constant_value":"AWS"}}],"resources":{"references":["local.region","local.account_id","aws_efs_file_system.this"]}}]},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":2,"EndLine":26}},{"address":"data.aws_iam_policy_document.jenkins_controller_task_policy","mode":"data","type":"aws_iam_policy_document","name":"jenkins_controller_task_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ecs:ListContainerInstances"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_ecs_cluster.jenkins_controller","aws_ecs_cluster.jenkins_agents"]}},{"actions":{"constant_value":["ecs:RunTask"]},"condition":[{"test":{"constant_value":"ArnEquals"},"values":{"references":["aws_ecs_cluster.jenkins_controller","aws_ecs_cluster.jenkins_agents"]},"variable":{"constant_value":"ecs:cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["local.region","local.account_id"]}},{"actions":{"constant_value":["ecs:StopTask","ecs:DescribeTasks"]},"condition":[{"test":{"constant_value":"ArnEquals"},"values":{"references":["aws_ecs_cluster.jenkins_controller","aws_ecs_cluster.jenkins_agents"]},"variable":{"constant_value":"ecs:cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["local.region","local.account_id"]}},{"actions":{"constant_value":["ssm:PutParameter","ssm:GetParameter","ssm:GetParameters"]},"effect":{"constant_value":"Allow"},"resources":{"references":["local.region","local.account_id"]}},{"actions":{"constant_value":["kms:Decrypt"]},"effect":{"constant_value":"Allow"},"resources":{"references":["local.region","local.account_id"]}},{"actions":{"constant_value":["iam:PassRole"]},"effect":{"constant_value":"Allow"},"resources":{"references":["local.account_id"]}},{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_cloudwatch_log_group.jenkins_controller_log_group"]}},{"actions":{"constant_value":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer","elasticfilesystem:ClientMount","ecr:GetAuthorizationToken","ecs:RegisterTaskDefinition","ecs:ListClusters","ecs:DescribeContainerInstances","ecs:ListTaskDefinitions","ecs:DescribeTaskDefinition","ecs:DeregisterTaskDefinition"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}},{"actions":{"constant_value":["elasticfilesystem:ClientWrite","elasticfilesystem:ClientRootAccess"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_efs_file_system.this"]}}]},"schema_version":0,"raw_data":{"FileName":"iam.tf","StartLine":109,"EndLine":206}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0,"raw_data":{"FileName":"main.tf","StartLine":6,"EndLine":6}},{"address":"data.template_file.jenkins_configuration_def","mode":"data","type":"template_file","name":"jenkins_configuration_def","provider_config_key":"template","expressions":{"template":{"references":["path.module"]},"vars":{"references":["aws_ecs_cluster.jenkins_controller","aws_ecs_cluster.jenkins_agents","local.region","var.name_prefix","var.jenkins_controller_port","var.jenkins_jnlp_port","aws_security_group.jenkins_controller_security_group","module.vpc.public_subnets"]}},"schema_version":0,"raw_data":{"FileName":"jenkins_image.tf","StartLine":18,"EndLine":32}},{"address":"data.template_file.jenkins_controller_container_def","mode":"data","type":"template_file","name":"jenkins_controller_container_def","provider_config_key":"template","expressions":{"template":{"references":["path.module"]},"vars":{"references":["var.name_prefix","var.jenkins_controller_port","var.jenkins_jnlp_port","var.name_prefix","aws_ecr_repository.jenkins_controller","local.region","local.account_id","aws_cloudwatch_log_group.jenkins_controller_log_group","var.jenkins_controller_memory","var.jenkins_controller_cpu"]}},"schema_version":0,"raw_data":{"FileName":"ecs.tf","StartLine":22,"EndLine":38}}],"module_calls":{"vpc":{"source":"terraform-aws-modules/vpc/aws","expressions":{"azs":{"constant_value":["us-east-1a","us-east-1b","us-east-1c"]},"cidr":{"constant_value":"10.0.0.0/16"},"enable_nat_gateway":{"constant_value":true},"enable_vpn_gateway":{"constant_value":true},"name":{"constant_value":"my-vpc"},"private_subnets":{"constant_value":["10.0.1.0/24","10.0.2.0/24","10.0.3.0/24"]},"public_subnets":{"constant_value":["10.0.101.0/24","10.0.102.0/24","10.0.103.0/24"]},"tags":{"constant_value":{"Environment":"dev","Terraform":"true"}}},"module":{"outputs":{"azs":{"expression":{"references":["var.azs"]},"description":"A list of availability zones specified as argument to this module"},"cgw_arns":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of ARNs of Customer Gateway"},"cgw_ids":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of IDs of Customer Gateway"},"database_internet_gateway_route_id":{"expression":{"references":["aws_route.database_internet_gateway"]},"description":"ID of the database internet gateway route."},"database_ipv6_egress_route_id":{"expression":{"references":["aws_route.database_ipv6_egress"]},"description":"ID of the database IPv6 egress route."},"database_nat_gateway_route_ids":{"expression":{"references":["aws_route.database_nat_gateway"]},"description":"List of IDs of the database nat gateway route."},"database_network_acl_arn":{"expression":{"references":["aws_network_acl.database"]},"description":"ARN of the database network ACL"},"database_network_acl_id":{"expression":{"references":["aws_network_acl.database"]},"description":"ID of the database network ACL"},"database_route_table_association_ids":{"expression":{"references":["aws_route_table_association.database"]},"description":"List of IDs of the database route table association"},"database_route_table_ids":{"expression":{"references":["aws_route_table.database","aws_route_table.database","aws_route_table.private"]},"description":"List of IDs of database route tables"},"database_subnet_arns":{"expression":{"references":["aws_subnet.database"]},"description":"List of ARNs of database subnets"},"database_subnet_group":{"expression":{"references":["aws_db_subnet_group.database"]},"description":"ID of database subnet group"},"database_subnet_group_name":{"expression":{"references":["aws_db_subnet_group.database"]},"description":"Name of database subnet group"},"database_subnets":{"expression":{"references":["aws_subnet.database"]},"description":"List of IDs of database subnets"},"database_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of cidr_blocks of database subnets"},"database_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of IPv6 cidr_blocks of database subnets in an IPv6 enabled VPC"},"default_network_acl_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the default network ACL"},"default_route_table_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the default route table"},"default_security_group_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the security group created by default on VPC creation"},"default_vpc_arn":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ARN of the Default VPC"},"default_vpc_cidr_block":{"expression":{"references":["aws_default_vpc.this"]},"description":"The CIDR block of the Default VPC"},"default_vpc_default_network_acl_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the default network ACL of the Default VPC"},"default_vpc_default_route_table_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the default route table of the Default VPC"},"default_vpc_default_security_group_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the security group created by default on Default VPC creation"},"default_vpc_enable_dns_hostnames":{"expression":{"references":["aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS hostname support"},"default_vpc_enable_dns_support":{"expression":{"references":["aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS support"},"default_vpc_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the Default VPC"},"default_vpc_instance_tenancy":{"expression":{"references":["aws_default_vpc.this"]},"description":"Tenancy of instances spin up within Default VPC"},"default_vpc_main_route_table_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the main route table associated with the Default VPC"},"egress_only_internet_gateway_id":{"expression":{"references":["aws_egress_only_internet_gateway.this"]},"description":"The ID of the egress only Internet Gateway"},"elasticache_network_acl_arn":{"expression":{"references":["aws_network_acl.elasticache"]},"description":"ARN of the elasticache network ACL"},"elasticache_network_acl_id":{"expression":{"references":["aws_network_acl.elasticache"]},"description":"ID of the elasticache network ACL"},"elasticache_route_table_association_ids":{"expression":{"references":["aws_route_table_association.elasticache"]},"description":"List of IDs of the elasticache route table association"},"elasticache_route_table_ids":{"expression":{"references":["aws_route_table.elasticache","aws_route_table.elasticache","aws_route_table.private"]},"description":"List of IDs of elasticache route tables"},"elasticache_subnet_arns":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of ARNs of elasticache subnets"},"elasticache_subnet_group":{"expression":{"references":["aws_elasticache_subnet_group.elasticache"]},"description":"ID of elasticache subnet group"},"elasticache_subnet_group_name":{"expression":{"references":["aws_elasticache_subnet_group.elasticache"]},"description":"Name of elasticache subnet group"},"elasticache_subnets":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IDs of elasticache subnets"},"elasticache_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of cidr_blocks of elasticache subnets"},"elasticache_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IPv6 cidr_blocks of elasticache subnets in an IPv6 enabled VPC"},"igw_arn":{"expression":{"references":["aws_internet_gateway.this"]},"description":"The ARN of the Internet Gateway"},"igw_id":{"expression":{"references":["aws_internet_gateway.this"]},"description":"The ID of the Internet Gateway"},"intra_network_acl_arn":{"expression":{"references":["aws_network_acl.intra"]},"description":"ARN of the intra network ACL"},"intra_network_acl_id":{"expression":{"references":["aws_network_acl.intra"]},"description":"ID of the intra network ACL"},"intra_route_table_association_ids":{"expression":{"references":["aws_route_table_association.intra"]},"description":"List of IDs of the intra route table association"},"intra_route_table_ids":{"expression":{"references":["aws_route_table.intra"]},"description":"List of IDs of intra route tables"},"intra_subnet_arns":{"expression":{"references":["aws_subnet.intra"]},"description":"List of ARNs of intra subnets"},"intra_subnets":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IDs of intra subnets"},"intra_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of cidr_blocks of intra subnets"},"intra_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IPv6 cidr_blocks of intra subnets in an IPv6 enabled VPC"},"name":{"expression":{"references":["var.name"]},"description":"The name of the VPC specified as argument to this module"},"nat_ids":{"expression":{"references":["aws_eip.nat"]},"description":"List of allocation ID of Elastic IPs created for AWS NAT Gateway"},"nat_public_ips":{"expression":{"references":["var.reuse_nat_ips","var.external_nat_ips","aws_eip.nat"]},"description":"List of public Elastic IPs created for AWS NAT Gateway"},"natgw_ids":{"expression":{"references":["aws_nat_gateway.this"]},"description":"List of NAT Gateway IDs"},"outpost_network_acl_arn":{"expression":{"references":["aws_network_acl.outpost"]},"description":"ARN of the outpost network ACL"},"outpost_network_acl_id":{"expression":{"references":["aws_network_acl.outpost"]},"description":"ID of the outpost network ACL"},"outpost_subnet_arns":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of ARNs of outpost subnets"},"outpost_subnets":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IDs of outpost subnets"},"outpost_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of cidr_blocks of outpost subnets"},"outpost_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IPv6 cidr_blocks of outpost subnets in an IPv6 enabled VPC"},"private_ipv6_egress_route_ids":{"expression":{"references":["aws_route.private_ipv6_egress"]},"description":"List of IDs of the ipv6 egress route."},"private_nat_gateway_route_ids":{"expression":{"references":["aws_route.private_nat_gateway"]},"description":"List of IDs of the private nat gateway route."},"private_network_acl_arn":{"expression":{"references":["aws_network_acl.private"]},"description":"ARN of the private network ACL"},"private_network_acl_id":{"expression":{"references":["aws_network_acl.private"]},"description":"ID of the private network ACL"},"private_route_table_association_ids":{"expression":{"references":["aws_route_table_association.private"]},"description":"List of IDs of the private route table association"},"private_route_table_ids":{"expression":{"references":["aws_route_table.private"]},"description":"List of IDs of private route tables"},"private_subnet_arns":{"expression":{"references":["aws_subnet.private"]},"description":"List of ARNs of private subnets"},"private_subnets":{"expression":{"references":["aws_subnet.private"]},"description":"List of IDs of private subnets"},"private_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of cidr_blocks of private subnets"},"private_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of IPv6 cidr_blocks of private subnets in an IPv6 enabled VPC"},"public_internet_gateway_ipv6_route_id":{"expression":{"references":["aws_route.public_internet_gateway_ipv6"]},"description":"ID of the IPv6 internet gateway route."},"public_internet_gateway_route_id":{"expression":{"references":["aws_route.public_internet_gateway"]},"description":"ID of the internet gateway route."},"public_network_acl_arn":{"expression":{"references":["aws_network_acl.public"]},"description":"ARN of the public network ACL"},"public_network_acl_id":{"expression":{"references":["aws_network_acl.public"]},"description":"ID of the public network ACL"},"public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.public"]},"description":"List of IDs of the public route table association"},"public_route_table_ids":{"expression":{"references":["aws_route_table.public"]},"description":"List of IDs of public route tables"},"public_subnet_arns":{"expression":{"references":["aws_subnet.public"]},"description":"List of ARNs of public subnets"},"public_subnets":{"expression":{"references":["aws_subnet.public"]},"description":"List of IDs of public subnets"},"public_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of cidr_blocks of public subnets"},"public_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of IPv6 cidr_blocks of public subnets in an IPv6 enabled VPC"},"redshift_network_acl_arn":{"expression":{"references":["aws_network_acl.redshift"]},"description":"ARN of the redshift network ACL"},"redshift_network_acl_id":{"expression":{"references":["aws_network_acl.redshift"]},"description":"ID of the redshift network ACL"},"redshift_public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift_public"]},"description":"List of IDs of the public redshidt route table association"},"redshift_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift"]},"description":"List of IDs of the redshift route table association"},"redshift_route_table_ids":{"expression":{"references":["aws_route_table.redshift","aws_route_table.redshift","aws_route_table.private"]},"description":"List of IDs of redshift route tables"},"redshift_subnet_arns":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of ARNs of redshift subnets"},"redshift_subnet_group":{"expression":{"references":["aws_redshift_subnet_group.redshift"]},"description":"ID of redshift subnet group"},"redshift_subnets":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IDs of redshift subnets"},"redshift_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of cidr_blocks of redshift subnets"},"redshift_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IPv6 cidr_blocks of redshift subnets in an IPv6 enabled VPC"},"this_customer_gateway":{"expression":{"references":["aws_customer_gateway.this"]},"description":"Map of Customer Gateway attributes"},"vgw_arn":{"expression":{"references":["aws_vpn_gateway.this"]},"description":"The ARN of the VPN Gateway"},"vgw_id":{"expression":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this"]},"description":"The ID of the VPN Gateway"},"vpc_arn":{"expression":{"references":["aws_vpc.this"]},"description":"The ARN of the VPC"},"vpc_cidr_block":{"expression":{"references":["aws_vpc.this"]},"description":"The CIDR block of the VPC"},"vpc_enable_dns_hostnames":{"expression":{"references":["aws_vpc.this"]},"description":"Whether or not the VPC has DNS hostname support"},"vpc_enable_dns_support":{"expression":{"references":["aws_vpc.this"]},"description":"Whether or not the VPC has DNS support"},"vpc_flow_log_cloudwatch_iam_role_arn":{"expression":{"references":["local.flow_log_iam_role_arn"]},"description":"The ARN of the IAM role used when pushing logs to Cloudwatch log group"},"vpc_flow_log_destination_arn":{"expression":{"references":["local.flow_log_destination_arn"]},"description":"The ARN of the destination for VPC Flow Logs"},"vpc_flow_log_destination_type":{"expression":{"references":["var.flow_log_destination_type"]},"description":"The type of the destination for VPC Flow Logs"},"vpc_flow_log_id":{"expression":{"references":["aws_flow_log.this"]},"description":"The ID of the Flow Log resource"},"vpc_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the VPC"},"vpc_instance_tenancy":{"expression":{"references":["aws_vpc.this"]},"description":"Tenancy of instances spin up within VPC"},"vpc_ipv6_association_id":{"expression":{"references":["aws_vpc.this"]},"description":"The association ID for the IPv6 CIDR block"},"vpc_ipv6_cidr_block":{"expression":{"references":["aws_vpc.this"]},"description":"The IPv6 CIDR block"},"vpc_main_route_table_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the main route table associated with this VPC"},"vpc_owner_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the AWS account that owns the VPC"},"vpc_secondary_cidr_blocks":{"expression":{"references":["aws_vpc_ipv4_cidr_block_association.this"]},"description":"List of secondary CIDR blocks of the VPC"}},"resources":[{"address":"aws_cloudwatch_log_group.flow_log","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_log","provider_config_key":"vpc:aws","expressions":{"kms_key_id":{"references":["var.flow_log_cloudwatch_log_group_kms_key_id"]},"name":{"references":["var.flow_log_cloudwatch_log_group_name_prefix","local.vpc_id"]},"retention_in_days":{"references":["var.flow_log_cloudwatch_log_group_retention_in_days"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_log_group"]},"raw_data":{"FileName":".terraform/modules/vpc/vpc-flow-logs.tf","StartLine":34,"EndLine":42}},{"address":"aws_customer_gateway.this","mode":"managed","type":"aws_customer_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"bgp_asn":{"references":["each.value"]},"ip_address":{"references":["each.value"]},"tags":{"references":["var.name","each.key","var.tags","var.customer_gateway_tags"]},"type":{"constant_value":"ipsec.1"}},"schema_version":0,"for_each_expression":{"references":["var.customer_gateways"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1215,"EndLine":1229}},{"address":"aws_db_subnet_group.database","mode":"managed","type":"aws_db_subnet_group","name":"database","provider_config_key":"vpc:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.database_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.database_subnet_group_name","var.name","var.tags","var.database_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.create_database_subnet_group"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":481,"EndLine":495}},{"address":"aws_default_network_acl.this","mode":"managed","type":"aws_default_network_acl","name":"this","provider_config_key":"vpc:aws","expressions":{"default_network_acl_id":{"references":["aws_vpc.this"]},"subnet_ids":{"references":["aws_subnet.public","aws_subnet.private","aws_subnet.intra","aws_subnet.database","aws_subnet.redshift","aws_subnet.elasticache","aws_subnet.outpost","aws_network_acl.public","aws_network_acl.private","aws_network_acl.intra","aws_network_acl.database","aws_network_acl.redshift","aws_network_acl.elasticache","aws_network_acl.outpost"]},"tags":{"references":["var.default_network_acl_name","var.tags","var.default_network_acl_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.manage_default_network_acl"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":609,"EndLine":673}},{"address":"aws_default_route_table.default","mode":"managed","type":"aws_default_route_table","name":"default","provider_config_key":"vpc:aws","expressions":{"default_route_table_id":{"references":["aws_vpc.this[0]"]},"propagating_vgws":{"references":["var.default_route_table_propagating_vgws"]},"tags":{"references":["var.name","var.tags","var.default_route_table_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.manage_default_route_table"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":162,"EndLine":192}},{"address":"aws_default_security_group.this","mode":"managed","type":"aws_default_security_group","name":"this","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.default_security_group_name","var.tags","var.default_security_group_tags"]},"vpc_id":{"references":["aws_vpc.this[0]"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.manage_default_security_group"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":53,"EndLine":95}},{"address":"aws_default_vpc.this","mode":"managed","type":"aws_default_vpc","name":"this","provider_config_key":"vpc:aws","expressions":{"enable_classiclink":{"references":["var.default_vpc_enable_classiclink"]},"enable_dns_hostnames":{"references":["var.default_vpc_enable_dns_hostnames"]},"enable_dns_support":{"references":["var.default_vpc_enable_dns_support"]},"tags":{"references":["var.default_vpc_name","var.tags","var.default_vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.manage_default_vpc"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1301,"EndLine":1315}},{"address":"aws_egress_only_internet_gateway.this","mode":"managed","type":"aws_egress_only_internet_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_egress_only_igw","var.enable_ipv6","local.max_subnet_length"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":144,"EndLine":156}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_eip_tags"]},"vpc":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","var.reuse_nat_ips","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1065,"EndLine":1081}},{"address":"aws_elasticache_subnet_group.elasticache","mode":"managed","type":"aws_elasticache_subnet_group","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.name"]},"subnet_ids":{"references":["aws_subnet.elasticache"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.create_elasticache_subnet_group"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":569,"EndLine":575}},{"address":"aws_flow_log.this","mode":"managed","type":"aws_flow_log","name":"this","provider_config_key":"vpc:aws","expressions":{"iam_role_arn":{"references":["local.flow_log_iam_role_arn"]},"log_destination":{"references":["local.flow_log_destination_arn"]},"log_destination_type":{"references":["var.flow_log_destination_type"]},"log_format":{"references":["var.flow_log_log_format"]},"max_aggregation_interval":{"references":["var.flow_log_max_aggregation_interval"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]},"traffic_type":{"references":["var.flow_log_traffic_type"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.enable_flow_log"]},"raw_data":{"FileName":".terraform/modules/vpc/vpc-flow-logs.tf","StartLine":16,"EndLine":28}},{"address":"aws_iam_policy.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_policy","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"name_prefix":{"constant_value":"vpc-flow-log-to-cloudwatch-"},"policy":{"references":["data.aws_iam_policy_document.vpc_flow_log_cloudwatch[0]"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]},"raw_data":{"FileName":".terraform/modules/vpc/vpc-flow-logs.tf","StartLine":76,"EndLine":81}},{"address":"aws_iam_role.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.flow_log_cloudwatch_assume_role[0]"]},"name_prefix":{"constant_value":"vpc-flow-log-role-"},"permissions_boundary":{"references":["var.vpc_flow_log_permissions_boundary"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]},"raw_data":{"FileName":".terraform/modules/vpc/vpc-flow-logs.tf","StartLine":44,"EndLine":52}},{"address":"aws_iam_role_policy_attachment.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role_policy_attachment","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.vpc_flow_log_cloudwatch[0]"]},"role":{"references":["aws_iam_role.vpc_flow_log_cloudwatch[0]"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]},"raw_data":{"FileName":".terraform/modules/vpc/vpc-flow-logs.tf","StartLine":69,"EndLine":74}},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":130,"EndLine":142}},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"allocation_id":{"references":["local.nat_gateway_ips","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.public","var.single_nat_gateway","count.index"]},"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_gateway_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]},"depends_on":["aws_internet_gateway.this"],"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1083,"EndLine":1108}},{"address":"aws_network_acl.database","mode":"managed","type":"aws_network_acl","name":"database","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.database_subnet_suffix","var.name","var.tags","var.database_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":891,"EndLine":904}},{"address":"aws_network_acl.elasticache","mode":"managed","type":"aws_network_acl","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.elasticache_subnet_suffix","var.name","var.tags","var.elasticache_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":997,"EndLine":1010}},{"address":"aws_network_acl.intra","mode":"managed","type":"aws_network_acl","name":"intra","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.intra"]},"tags":{"references":["var.intra_subnet_suffix","var.name","var.tags","var.intra_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":838,"EndLine":851}},{"address":"aws_network_acl.outpost","mode":"managed","type":"aws_network_acl","name":"outpost","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.outpost"]},"tags":{"references":["var.outpost_subnet_suffix","var.name","var.tags","var.outpost_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":785,"EndLine":798}},{"address":"aws_network_acl.private","mode":"managed","type":"aws_network_acl","name":"private","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["var.private_subnet_suffix","var.name","var.tags","var.private_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":732,"EndLine":745}},{"address":"aws_network_acl.public","mode":"managed","type":"aws_network_acl","name":"public","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.public"]},"tags":{"references":["var.public_subnet_suffix","var.name","var.tags","var.public_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":679,"EndLine":692}},{"address":"aws_network_acl.redshift","mode":"managed","type":"aws_network_acl","name":"redshift","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.redshift_subnet_suffix","var.name","var.tags","var.redshift_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":944,"EndLine":957}},{"address":"aws_network_acl_rule.database_inbound","mode":"managed","type":"aws_network_acl_rule","name":"database_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0]"]},"protocol":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_inbound_acl_rules","count.index"]},"to_port":{"references":["var.database_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":906,"EndLine":921}},{"address":"aws_network_acl_rule.database_outbound","mode":"managed","type":"aws_network_acl_rule","name":"database_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0]"]},"protocol":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_outbound_acl_rules","count.index"]},"to_port":{"references":["var.database_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":923,"EndLine":938}},{"address":"aws_network_acl_rule.elasticache_inbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0]"]},"protocol":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1012,"EndLine":1027}},{"address":"aws_network_acl_rule.elasticache_outbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0]"]},"protocol":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1029,"EndLine":1044}},{"address":"aws_network_acl_rule.intra_inbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0]"]},"protocol":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_inbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":853,"EndLine":868}},{"address":"aws_network_acl_rule.intra_outbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0]"]},"protocol":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_outbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":870,"EndLine":885}},{"address":"aws_network_acl_rule.outpost_inbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0]"]},"protocol":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_inbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets","var.outpost_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":800,"EndLine":815}},{"address":"aws_network_acl_rule.outpost_outbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0]"]},"protocol":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_outbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets","var.outpost_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":817,"EndLine":832}},{"address":"aws_network_acl_rule.private_inbound","mode":"managed","type":"aws_network_acl_rule","name":"private_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0]"]},"protocol":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_inbound_acl_rules","count.index"]},"to_port":{"references":["var.private_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":747,"EndLine":762}},{"address":"aws_network_acl_rule.private_outbound","mode":"managed","type":"aws_network_acl_rule","name":"private_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0]"]},"protocol":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_outbound_acl_rules","count.index"]},"to_port":{"references":["var.private_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":764,"EndLine":779}},{"address":"aws_network_acl_rule.public_inbound","mode":"managed","type":"aws_network_acl_rule","name":"public_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0]"]},"protocol":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_inbound_acl_rules","count.index"]},"to_port":{"references":["var.public_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":694,"EndLine":709}},{"address":"aws_network_acl_rule.public_outbound","mode":"managed","type":"aws_network_acl_rule","name":"public_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0]"]},"protocol":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_outbound_acl_rules","count.index"]},"to_port":{"references":["var.public_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":711,"EndLine":726}},{"address":"aws_network_acl_rule.redshift_inbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0]"]},"protocol":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_inbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_inbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":959,"EndLine":974}},{"address":"aws_network_acl_rule.redshift_outbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0]"]},"protocol":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_outbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_outbound_acl_rules"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":976,"EndLine":991}},{"address":"aws_redshift_subnet_group.redshift","mode":"managed","type":"aws_redshift_subnet_group","name":"redshift","provider_config_key":"vpc:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.name"]},"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.name","var.tags","var.redshift_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.create_redshift_subnet_group"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":525,"EndLine":539}},{"address":"aws_route.database_internet_gateway","mode":"managed","type":"aws_route","name":"database_internet_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0]"]},"route_table_id":{"references":["aws_route_table.database[0]"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":277,"EndLine":287}},{"address":"aws_route.database_ipv6_egress","mode":"managed","type":"aws_route","name":"database_ipv6_egress","provider_config_key":"vpc:aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this[0]"]},"route_table_id":{"references":["aws_route_table.database[0]"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_egress_only_igw","var.enable_ipv6","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":301,"EndLine":311}},{"address":"aws_route.database_nat_gateway","mode":"managed","type":"aws_route","name":"database_nat_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.database","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route","var.enable_nat_gateway","var.single_nat_gateway","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":289,"EndLine":299}},{"address":"aws_route.private_ipv6_egress","mode":"managed","type":"aws_route","name":"private_ipv6_egress","provider_config_key":"vpc:aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_egress_only_igw","var.enable_ipv6","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1122,"EndLine":1128}},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1110,"EndLine":1120}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0]"]},"route_table_id":{"references":["aws_route_table.public[0]"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":212,"EndLine":222}},{"address":"aws_route.public_internet_gateway_ipv6","mode":"managed","type":"aws_route","name":"public_internet_gateway_ipv6","provider_config_key":"vpc:aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"gateway_id":{"references":["aws_internet_gateway.this[0]"]},"route_table_id":{"references":["aws_route_table.public[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.enable_ipv6","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":224,"EndLine":230}},{"address":"aws_route_table.database","mode":"managed","type":"aws_route_table","name":"database","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.create_database_internet_gateway_route","var.name","var.database_subnet_suffix","var.database_subnet_suffix","var.name","var.azs","count.index","var.tags","var.database_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.single_nat_gateway","var.create_database_internet_gateway_route","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":259,"EndLine":275}},{"address":"aws_route_table.elasticache","mode":"managed","type":"aws_route_table","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.elasticache_subnet_suffix","var.tags","var.elasticache_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_elasticache_subnet_route_table","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":335,"EndLine":347}},{"address":"aws_route_table.intra","mode":"managed","type":"aws_route_table","name":"intra","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.intra_subnet_suffix","var.tags","var.intra_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":353,"EndLine":365}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.name","var.private_subnet_suffix","var.private_subnet_suffix","var.name","var.azs","count.index","var.tags","var.private_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","local.max_subnet_length","local.nat_gateway_count"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":237,"EndLine":253}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.public_subnet_suffix","var.name","var.tags","var.public_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":198,"EndLine":210}},{"address":"aws_route_table.redshift","mode":"managed","type":"aws_route_table","name":"redshift","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.redshift_subnet_suffix","var.tags","var.redshift_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_redshift_subnet_route_table","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":317,"EndLine":329}},{"address":"aws_route_table_association.database","mode":"managed","type":"aws_route_table_association","name":"database","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.database","aws_route_table.private","var.create_database_subnet_route_table","var.single_nat_gateway","var.create_database_internet_gateway_route","count.index","count.index"]},"subnet_id":{"references":["aws_subnet.database","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1154,"EndLine":1162}},{"address":"aws_route_table_association.elasticache","mode":"managed","type":"aws_route_table_association","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.elasticache","aws_route_table.private","var.single_nat_gateway","var.create_elasticache_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.elasticache","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1184,"EndLine":1195}},{"address":"aws_route_table_association.intra","mode":"managed","type":"aws_route_table_association","name":"intra","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.intra"]},"subnet_id":{"references":["aws_subnet.intra","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_subnets","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1197,"EndLine":1202}},{"address":"aws_route_table_association.outpost","mode":"managed","type":"aws_route_table_association","name":"outpost","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.outpost","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_subnets","var.outpost_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1144,"EndLine":1152}},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_subnets","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1134,"EndLine":1142}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0]"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1204,"EndLine":1209}},{"address":"aws_route_table_association.redshift","mode":"managed","type":"aws_route_table_association","name":"redshift","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.private","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1164,"EndLine":1172}},{"address":"aws_route_table_association.redshift_public","mode":"managed","type":"aws_route_table_association","name":"redshift_public","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.public","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1174,"EndLine":1182}},{"address":"aws_subnet.database","mode":"managed","type":"aws_subnet","name":"database","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.database_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.database_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.database_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.database_subnet_ipv6_prefixes","aws_vpc.this[0]","var.database_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.database_subnet_suffix","var.name","var.azs","count.index","var.tags","var.database_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.database_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":457,"EndLine":479}},{"address":"aws_subnet.elasticache","mode":"managed","type":"aws_subnet","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.elasticache_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.elasticache_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.elasticache_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.elasticache_subnet_ipv6_prefixes","aws_vpc.this[0]","var.elasticache_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.elasticache_subnet_suffix","var.name","var.azs","count.index","var.tags","var.elasticache_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":545,"EndLine":567}},{"address":"aws_subnet.intra","mode":"managed","type":"aws_subnet","name":"intra","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.intra_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.intra_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.intra_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.intra_subnet_ipv6_prefixes","aws_vpc.this[0]","var.intra_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.intra_subnet_suffix","var.name","var.azs","count.index","var.tags","var.intra_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.intra_subnets","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":581,"EndLine":603}},{"address":"aws_subnet.outpost","mode":"managed","type":"aws_subnet","name":"outpost","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.outpost_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.outpost_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.outpost_az"]},"cidr_block":{"references":["var.outpost_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.outpost_subnet_ipv6_prefixes","aws_vpc.this[0]","var.outpost_subnet_ipv6_prefixes","count.index"]},"outpost_arn":{"references":["var.outpost_arn"]},"tags":{"references":["var.outpost_subnet_suffix","var.name","var.outpost_az","var.tags","var.outpost_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.outpost_subnets","var.outpost_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":428,"EndLine":451}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.private_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.private_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.private_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.private_subnet_ipv6_prefixes","aws_vpc.this[0]","var.private_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.private_subnet_suffix","var.name","var.azs","count.index","var.tags","var.private_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.private_subnets","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":400,"EndLine":422}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.public_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.public_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.public_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.public_subnet_ipv6_prefixes","aws_vpc.this[0]","var.public_subnet_ipv6_prefixes","count.index"]},"map_public_ip_on_launch":{"references":["var.map_public_ip_on_launch"]},"tags":{"references":["var.public_subnet_suffix","var.name","var.azs","count.index","var.tags","var.public_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.public_subnets","var.one_nat_gateway_per_az","var.public_subnets","var.azs","var.public_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":371,"EndLine":394}},{"address":"aws_subnet.redshift","mode":"managed","type":"aws_subnet","name":"redshift","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.redshift_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.redshift_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.redshift_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.redshift_subnet_ipv6_prefixes","aws_vpc.this[0]","var.redshift_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.redshift_subnet_suffix","var.name","var.azs","count.index","var.tags","var.redshift_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.redshift_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":501,"EndLine":523}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_config_key":"vpc:aws","expressions":{"assign_generated_ipv6_cidr_block":{"references":["var.enable_ipv6"]},"cidr_block":{"references":["var.cidr"]},"enable_classiclink":{"references":["var.enable_classiclink"]},"enable_classiclink_dns_support":{"references":["var.enable_classiclink_dns_support"]},"enable_dns_hostnames":{"references":["var.enable_dns_hostnames"]},"enable_dns_support":{"references":["var.enable_dns_support"]},"instance_tenancy":{"references":["var.instance_tenancy"]},"tags":{"references":["var.name","var.tags","var.vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":25,"EndLine":43}},{"address":"aws_vpc_dhcp_options.this","mode":"managed","type":"aws_vpc_dhcp_options","name":"this","provider_config_key":"vpc:aws","expressions":{"domain_name":{"references":["var.dhcp_options_domain_name"]},"domain_name_servers":{"references":["var.dhcp_options_domain_name_servers"]},"netbios_name_servers":{"references":["var.dhcp_options_netbios_name_servers"]},"netbios_node_type":{"references":["var.dhcp_options_netbios_node_type"]},"ntp_servers":{"references":["var.dhcp_options_ntp_servers"]},"tags":{"references":["var.name","var.tags","var.dhcp_options_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dhcp_options"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":101,"EndLine":117}},{"address":"aws_vpc_dhcp_options_association.this","mode":"managed","type":"aws_vpc_dhcp_options_association","name":"this","provider_config_key":"vpc:aws","expressions":{"dhcp_options_id":{"references":["aws_vpc_dhcp_options.this[0]"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dhcp_options"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":119,"EndLine":124}},{"address":"aws_vpc_ipv4_cidr_block_association.this","mode":"managed","type":"aws_vpc_ipv4_cidr_block_association","name":"this","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.secondary_cidr_blocks","count.index"]},"vpc_id":{"references":["aws_vpc.this[0]"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.secondary_cidr_blocks","var.secondary_cidr_blocks"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":45,"EndLine":51}},{"address":"aws_vpn_gateway.this","mode":"managed","type":"aws_vpn_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"amazon_side_asn":{"references":["var.amazon_side_asn"]},"availability_zone":{"references":["var.vpn_gateway_az"]},"tags":{"references":["var.name","var.tags","var.vpn_gateway_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_vpn_gateway"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1235,"EndLine":1249}},{"address":"aws_vpn_gateway_attachment.this","mode":"managed","type":"aws_vpn_gateway_attachment","name":"this","provider_config_key":"vpc:aws","expressions":{"vpc_id":{"references":["local.vpc_id"]},"vpn_gateway_id":{"references":["var.vpn_gateway_id"]}},"schema_version":0,"count_expression":{"references":["var.vpn_gateway_id"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1251,"EndLine":1256}},{"address":"aws_vpn_gateway_route_propagation.intra","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"intra","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.intra","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_intra_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","var.intra_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1284,"EndLine":1295}},{"address":"aws_vpn_gateway_route_propagation.private","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"private","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_private_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","var.private_subnets"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1271,"EndLine":1282}},{"address":"aws_vpn_gateway_route_propagation.public","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"public","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_public_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id"]},"raw_data":{"FileName":".terraform/modules/vpc/main.tf","StartLine":1258,"EndLine":1269}},{"address":"data.aws_iam_policy_document.flow_log_cloudwatch_assume_role","mode":"data","type":"aws_iam_policy_document","name":"flow_log_cloudwatch_assume_role","provider_config_key":"vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["vpc-flow-logs.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]},"raw_data":{"FileName":".terraform/modules/vpc/vpc-flow-logs.tf","StartLine":54,"EndLine":67}},{"address":"data.aws_iam_policy_document.vpc_flow_log_cloudwatch","mode":"data","type":"aws_iam_policy_document","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents","logs:DescribeLogGroups","logs:DescribeLogStreams"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"AWSVPCFlowLogsPushToCloudWatch"}}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]},"raw_data":{"FileName":".terraform/modules/vpc/vpc-flow-logs.tf","StartLine":83,"EndLine":100}}],"variables":{"amazon_side_asn":{"default":"64512","description":"The Autonomous System Number (ASN) for the Amazon side of the gateway. By default the virtual private gateway is created with the current default Amazon ASN."},"assign_ipv6_address_on_creation":{"default":false,"description":"Assign IPv6 address on subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"azs":{"default":[],"description":"A list of availability zones names or ids in the region"},"cidr":{"default":"0.0.0.0/0","description":"The CIDR block for the VPC. Default value is a valid CIDR, but not acceptable by AWS and should be overridden"},"create_database_internet_gateway_route":{"default":false,"description":"Controls if an internet gateway route for public database access should be created"},"create_database_nat_gateway_route":{"default":false,"description":"Controls if a nat gateway route should be created to give internet access to the database subnets"},"create_database_subnet_group":{"default":true,"description":"Controls if database subnet group should be created (n.b. database_subnets must also be set)"},"create_database_subnet_route_table":{"default":false,"description":"Controls if separate route table for database should be created"},"create_egress_only_igw":{"default":true,"description":"Controls if an Egress Only Internet Gateway is created and its related routes."},"create_elasticache_subnet_group":{"default":true,"description":"Controls if elasticache subnet group should be created"},"create_elasticache_subnet_route_table":{"default":false,"description":"Controls if separate route table for elasticache should be created"},"create_flow_log_cloudwatch_iam_role":{"default":false,"description":"Whether to create IAM role for VPC Flow Logs"},"create_flow_log_cloudwatch_log_group":{"default":false,"description":"Whether to create CloudWatch log group for VPC Flow Logs"},"create_igw":{"default":true,"description":"Controls if an Internet Gateway is created for public subnets and the related routes that connect them."},"create_redshift_subnet_group":{"default":true,"description":"Controls if redshift subnet group should be created"},"create_redshift_subnet_route_table":{"default":false,"description":"Controls if separate route table for redshift should be created"},"create_vpc":{"default":true,"description":"Controls if VPC should be created (it affects almost all resources)"},"customer_gateway_tags":{"default":{},"description":"Additional tags for the Customer Gateway"},"customer_gateways":{"default":{},"description":"Maps of Customer Gateway's attributes (BGP ASN and Gateway's Internet-routable external IP address)"},"database_acl_tags":{"default":{},"description":"Additional tags for the database subnets network ACL"},"database_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for database subnets"},"database_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets inbound network ACL rules"},"database_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets outbound network ACL rules"},"database_route_table_tags":{"default":{},"description":"Additional tags for the database route tables"},"database_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on database subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"database_subnet_group_name":{"default":null,"description":"Name of database subnet group"},"database_subnet_group_tags":{"default":{},"description":"Additional tags for the database subnet group"},"database_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 database subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"database_subnet_suffix":{"default":"db","description":"Suffix to append to database subnets name"},"database_subnet_tags":{"default":{},"description":"Additional tags for the database subnets"},"database_subnets":{"default":[],"description":"A list of database subnets"},"default_network_acl_egress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of egress rules to set on the Default Network ACL"},"default_network_acl_ingress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of ingress rules to set on the Default Network ACL"},"default_network_acl_name":{"default":"","description":"Name to be used on the Default Network ACL"},"default_network_acl_tags":{"default":{},"description":"Additional tags for the Default Network ACL"},"default_route_table_propagating_vgws":{"default":[],"description":"List of virtual gateways for propagation"},"default_route_table_routes":{"default":[],"description":"Configuration block of routes. See https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/default_route_table#route"},"default_route_table_tags":{"default":{},"description":"Additional tags for the default route table"},"default_security_group_egress":{"default":null,"description":"List of maps of egress rules to set on the default security group"},"default_security_group_ingress":{"default":null,"description":"List of maps of ingress rules to set on the default security group"},"default_security_group_name":{"default":"default","description":"Name to be used on the default security group"},"default_security_group_tags":{"default":{},"description":"Additional tags for the default security group"},"default_vpc_enable_classiclink":{"default":false,"description":"Should be true to enable ClassicLink in the Default VPC"},"default_vpc_enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the Default VPC"},"default_vpc_enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the Default VPC"},"default_vpc_name":{"default":"","description":"Name to be used on the Default VPC"},"default_vpc_tags":{"default":{},"description":"Additional tags for the Default VPC"},"dhcp_options_domain_name":{"default":"","description":"Specifies DNS name for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_domain_name_servers":{"default":["AmazonProvidedDNS"],"description":"Specify a list of DNS server addresses for DHCP options set, default to AWS provided (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_name_servers":{"default":[],"description":"Specify a list of netbios servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_node_type":{"default":"","description":"Specify netbios node_type for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_ntp_servers":{"default":[],"description":"Specify a list of NTP servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_tags":{"default":{},"description":"Additional tags for the DHCP option set (requires enable_dhcp_options set to true)"},"elasticache_acl_tags":{"default":{},"description":"Additional tags for the elasticache subnets network ACL"},"elasticache_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for elasticache subnets"},"elasticache_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets inbound network ACL rules"},"elasticache_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets outbound network ACL rules"},"elasticache_route_table_tags":{"default":{},"description":"Additional tags for the elasticache route tables"},"elasticache_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on elasticache subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"elasticache_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 elasticache subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"elasticache_subnet_suffix":{"default":"elasticache","description":"Suffix to append to elasticache subnets name"},"elasticache_subnet_tags":{"default":{},"description":"Additional tags for the elasticache subnets"},"elasticache_subnets":{"default":[],"description":"A list of elasticache subnets"},"enable_classiclink":{"default":null,"description":"Should be true to enable ClassicLink for the VPC. Only valid in regions and accounts that support EC2 Classic."},"enable_classiclink_dns_support":{"default":null,"description":"Should be true to enable ClassicLink DNS Support for the VPC. Only valid in regions and accounts that support EC2 Classic."},"enable_dhcp_options":{"default":false,"description":"Should be true if you want to specify a DHCP options set with a custom domain name, DNS servers, NTP servers, netbios servers, and/or netbios server type"},"enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the VPC"},"enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the VPC"},"enable_flow_log":{"default":false,"description":"Whether or not to enable VPC Flow Logs"},"enable_ipv6":{"default":false,"description":"Requests an Amazon-provided IPv6 CIDR block with a /56 prefix length for the VPC. You cannot specify the range of IP addresses, or the size of the CIDR block."},"enable_nat_gateway":{"default":false,"description":"Should be true if you want to provision NAT Gateways for each of your private networks"},"enable_public_redshift":{"default":false,"description":"Controls if redshift should have public routing table"},"enable_vpn_gateway":{"default":false,"description":"Should be true if you want to create a new VPN Gateway resource and attach it to the VPC"},"external_nat_ip_ids":{"default":[],"description":"List of EIP IDs to be assigned to the NAT Gateways (used in combination with reuse_nat_ips)"},"external_nat_ips":{"default":[],"description":"List of EIPs to be used for `nat_public_ips` output (used in combination with reuse_nat_ips and external_nat_ip_ids)"},"flow_log_cloudwatch_iam_role_arn":{"default":"","description":"The ARN for the IAM role that's used to post flow logs to a CloudWatch Logs log group. When flow_log_destination_arn is set to ARN of Cloudwatch Logs, this argument needs to be provided."},"flow_log_cloudwatch_log_group_kms_key_id":{"default":null,"description":"The ARN of the KMS Key to use when encrypting log data for VPC flow logs."},"flow_log_cloudwatch_log_group_name_prefix":{"default":"/aws/vpc-flow-log/","description":"Specifies the name prefix of CloudWatch Log Group for VPC flow logs."},"flow_log_cloudwatch_log_group_retention_in_days":{"default":null,"description":"Specifies the number of days you want to retain log events in the specified log group for VPC flow logs."},"flow_log_destination_arn":{"default":"","description":"The ARN of the CloudWatch log group or S3 bucket where VPC Flow Logs will be pushed. If this ARN is a S3 bucket the appropriate permissions need to be set on that bucket's policy. When create_flow_log_cloudwatch_log_group is set to false this argument must be provided."},"flow_log_destination_type":{"default":"cloud-watch-logs","description":"Type of flow log destination. Can be s3 or cloud-watch-logs."},"flow_log_log_format":{"default":null,"description":"The fields to include in the flow log record, in the order in which they should appear."},"flow_log_max_aggregation_interval":{"default":600,"description":"The maximum interval of time during which a flow of packets is captured and aggregated into a flow log record. Valid Values: `60` seconds or `600` seconds."},"flow_log_traffic_type":{"default":"ALL","description":"The type of traffic to capture. Valid values: ACCEPT, REJECT, ALL."},"igw_tags":{"default":{},"description":"Additional tags for the internet gateway"},"instance_tenancy":{"default":"default","description":"A tenancy option for instances launched into the VPC"},"intra_acl_tags":{"default":{},"description":"Additional tags for the intra subnets network ACL"},"intra_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for intra subnets"},"intra_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets inbound network ACLs"},"intra_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets outbound network ACLs"},"intra_route_table_tags":{"default":{},"description":"Additional tags for the intra route tables"},"intra_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on intra subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"intra_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 intra subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"intra_subnet_suffix":{"default":"intra","description":"Suffix to append to intra subnets name"},"intra_subnet_tags":{"default":{},"description":"Additional tags for the intra subnets"},"intra_subnets":{"default":[],"description":"A list of intra subnets"},"manage_default_network_acl":{"default":false,"description":"Should be true to adopt and manage Default Network ACL"},"manage_default_route_table":{"default":false,"description":"Should be true to manage default route table"},"manage_default_security_group":{"default":false,"description":"Should be true to adopt and manage default security group"},"manage_default_vpc":{"default":false,"description":"Should be true to adopt and manage Default VPC"},"map_public_ip_on_launch":{"default":true,"description":"Should be false if you do not want to auto-assign public IP on launch"},"name":{"default":"","description":"Name to be used on all the resources as identifier"},"nat_eip_tags":{"default":{},"description":"Additional tags for the NAT EIP"},"nat_gateway_tags":{"default":{},"description":"Additional tags for the NAT gateways"},"one_nat_gateway_per_az":{"default":false,"description":"Should be true if you want only one NAT Gateway per availability zone. Requires `var.azs` to be set, and the number of `public_subnets` created to be greater than or equal to the number of availability zones specified in `var.azs`."},"outpost_acl_tags":{"default":{},"description":"Additional tags for the outpost subnets network ACL"},"outpost_arn":{"default":null,"description":"ARN of Outpost you want to create a subnet in."},"outpost_az":{"default":null,"description":"AZ where Outpost is anchored."},"outpost_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for outpost subnets"},"outpost_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets inbound network ACLs"},"outpost_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets outbound network ACLs"},"outpost_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on outpost subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"outpost_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 outpost subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"outpost_subnet_suffix":{"default":"outpost","description":"Suffix to append to outpost subnets name"},"outpost_subnet_tags":{"default":{},"description":"Additional tags for the outpost subnets"},"outpost_subnets":{"default":[],"description":"A list of outpost subnets inside the VPC"},"private_acl_tags":{"default":{},"description":"Additional tags for the private subnets network ACL"},"private_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for private subnets"},"private_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets inbound network ACLs"},"private_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets outbound network ACLs"},"private_route_table_tags":{"default":{},"description":"Additional tags for the private route tables"},"private_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on private subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"private_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 private subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"private_subnet_suffix":{"default":"private","description":"Suffix to append to private subnets name"},"private_subnet_tags":{"default":{},"description":"Additional tags for the private subnets"},"private_subnets":{"default":[],"description":"A list of private subnets inside the VPC"},"propagate_intra_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_private_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_public_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"public_acl_tags":{"default":{},"description":"Additional tags for the public subnets network ACL"},"public_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for public subnets"},"public_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets inbound network ACLs"},"public_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets outbound network ACLs"},"public_route_table_tags":{"default":{},"description":"Additional tags for the public route tables"},"public_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on public subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"public_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 public subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"public_subnet_suffix":{"default":"public","description":"Suffix to append to public subnets name"},"public_subnet_tags":{"default":{},"description":"Additional tags for the public subnets"},"public_subnets":{"default":[],"description":"A list of public subnets inside the VPC"},"redshift_acl_tags":{"default":{},"description":"Additional tags for the redshift subnets network ACL"},"redshift_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for redshift subnets"},"redshift_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets inbound network ACL rules"},"redshift_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets outbound network ACL rules"},"redshift_route_table_tags":{"default":{},"description":"Additional tags for the redshift route tables"},"redshift_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on redshift subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"redshift_subnet_group_tags":{"default":{},"description":"Additional tags for the redshift subnet group"},"redshift_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 redshift subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"redshift_subnet_suffix":{"default":"redshift","description":"Suffix to append to redshift subnets name"},"redshift_subnet_tags":{"default":{},"description":"Additional tags for the redshift subnets"},"redshift_subnets":{"default":[],"description":"A list of redshift subnets"},"reuse_nat_ips":{"default":false,"description":"Should be true if you don't want EIPs to be created for your NAT Gateways and will instead pass them in via the 'external_nat_ip_ids' variable"},"secondary_cidr_blocks":{"default":[],"description":"List of secondary CIDR blocks to associate with the VPC to extend the IP Address pool"},"single_nat_gateway":{"default":false,"description":"Should be true if you want to provision a single shared NAT Gateway across all of your private networks"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"vpc_flow_log_permissions_boundary":{"default":null,"description":"The ARN of the Permissions Boundary for the VPC Flow Log IAM Role"},"vpc_flow_log_tags":{"default":{},"description":"Additional tags for the VPC Flow Logs"},"vpc_tags":{"default":{},"description":"Additional tags for the VPC"},"vpn_gateway_az":{"default":null,"description":"The Availability Zone for the VPN Gateway"},"vpn_gateway_id":{"default":"","description":"ID of VPN Gateway to attach to the VPC"},"vpn_gateway_tags":{"default":{},"description":"Additional tags for the VPN gateway"}}},"raw_data":{"FileName":"main.tf","StartLine":13,"EndLine":30}}},"variables":{"alb_access_logs_bucket_name":{"default":null},"alb_access_logs_s3_prefix":{"default":null},"alb_create_security_group":{"default":true,"description":"Should a security group allowing all traffic on ports 80 * 443 be created for the alb.\nIf false, a valid list of security groups must be passed with 'alb_security_group_ids'\n"},"alb_enable_access_logs":{"default":false},"alb_ingress_allow_cidrs":{"default":null,"description":"A list of cidrs to allow inbound into Jenkins."},"alb_security_group_ids":{"default":null,"description":"A list of security group ids to attach to the Application Load Balancer"},"alb_type_internal":{"default":false},"ecs_execution_role_arn":{"default":null,"description":"An custom execution role to use as the ecs exection role (optional)"},"efs_access_point_gid":{"default":1000,"description":"The gid number to associate with the EFS access point"},"efs_access_point_uid":{"default":1000,"description":"The uid number to associate with the EFS access point"},"efs_backup_cold_storage_after_days":{"default":30,"description":"Number of days until backup is moved to cold storage"},"efs_backup_completion_window":{"default":120,"description":"A value in minutes after a backup job is successfully started before\nit must be completed or it will be canceled by AWS Backup\n"},"efs_backup_delete_after_days":{"default":120,"description":"Number of days until backup is deleted. If cold storage transition\n'efs_backup_cold_storage_after_days' is declared, the delete value must\nbe 90 days greater\n"},"efs_backup_schedule":{"default":"cron(0 00 * * ? *)"},"efs_backup_start_window":{"default":60,"description":"A value in minutes after a backup is scheduled before a job will be\ncanceled if it doesn't start successfully\n"},"efs_enable_backup":{"default":true},"efs_enable_encryption":{"default":true},"efs_ia_lifecycle_policy":{"default":null},"efs_kms_key_arn":{"default":null},"efs_performance_mode":{"default":"generalPurpose"},"efs_provisioned_throughput_in_mibps":{"default":null},"efs_throughput_mode":{"default":"bursting"},"jenkins_controller_cpu":{"default":2048},"jenkins_controller_memory":{"default":4096},"jenkins_controller_port":{"default":8080},"jenkins_controller_task_log_retention_days":{"default":30},"jenkins_controller_task_role_arn":{"default":null,"description":"An custom task role to use for the jenkins controller (optional)"},"jenkins_ecr_repository_name":{"default":"serverless-jenkins-controller","description":"Name for Jenkins controller ECR repository"},"jenkins_jnlp_port":{"default":50000},"name_prefix":{"default":"serverless-jenkins"},"route53_alias_name":{"default":"jenkins-controller"},"route53_create_alias":{"default":"false"},"route53_zone_id":{"default":null},"tags":{"default":{},"description":"An object of tag key value pairs"}}}}}
